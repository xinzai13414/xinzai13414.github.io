<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>24.å¤šçº¿ç¨‹ | æ˜Ÿä»”äººç”Ÿå½•</title><noscript>å¼€å¯JavaScriptæ‰èƒ½è®¿é—®æœ¬ç«™å“¦~</noscript><link rel="icon" href="/img/pwa/favicon.ico"><!-- index.css--><link rel="stylesheet" href="/css/index.css?v=2.0.6"><!-- inject head--><link rel="canonical" href="http://example.com/post/fbc0ae86.html"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"><!-- aplayer--><!-- swiper--><!-- fancybox ui--><!-- katex--><!-- Open Graph--><meta name="description" content="çŸ¥è¯†ç‚¹ä¸€ï¼šThreadçº¿ç¨‹åŸºç¡€æœ‰ä¸€ä¸ªåœºæ™¯ï¼šåœ¨ä¸€ä¸ªç¨‹åºä¸­å³å¯ä»¥ç©æ¸¸æˆåˆå¯ä»¥æ’­æ”¾éŸ³ä¹ï¼Ÿ ä»¥ç°åœ¨ç¼–ç¨‹æ‰‹æ®µè€Œè¨€ â€”ã€‹ æä¾›ç¼–ç¨‹ç»“æ„ã€é¡ºåºã€åˆ†æ”¯ã€å¾ªç¯ã€‘ ä»£ç æ˜¯è¦éµå®ˆé¡ºåºæ‰§è¡Œï¼Œä»£ç éœ€è¦éµå®ˆä»ä¸Šè‡³ä¸‹é€è¡Œæ‰§è¡Œï¼Œåˆ©ç”¨åˆ†æ”¯å’Œå¾ªç¯ä¿®æ”¹å¾ªç¯æ‰§è¡Œä¸€äº›æ“ä½œï¼Œé€‰æ‹©æ€§æ‰§è¡ŒæŸä»£ç æˆ–è€…æ˜¯è®©æŸäº›ä»£ç é‡å¤æ‰§è¡Œï¼Œæ— è®ºå¦‚ä½•æ“ä½œä»£ç ä¾æ—§è¦é¡ºåº"><!-- pwa--><meta name="apple-mobile-web-app-capable" content="æ˜Ÿä»”äººç”Ÿå½•"><meta name="theme-color" content="var(--efu-main)"><meta name="apple-mobile-web-app-status-bar-style" content="var(--efu-main)"><link rel="bookmark" href="/img/pwa/favicon.ico"><link rel="apple-touch-icon" href="/img/pwa/favicon.ico" sizes="180x180"><script>console.log(' %c Solitude %c ' + '2.0.6' + ' %c https://github.com/everfu/hexo-theme-solitude',
    'background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff',
    'background:#ff9a9a ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff',
    'background:unset ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff')
</script><script>(()=>{
        const saveToLocal = {
            set: function setWithExpiry(key, value, ttl) {
                if (ttl === 0)
                    return
                const now = new Date()
                const expiryDay = ttl * 86400000
                const item = {
                    value: value,
                    expiry: now.getTime() + expiryDay
                }
                localStorage.setItem(key, JSON.stringify(item))
            },
            get: function getWithExpiry(key) {
                const itemStr = localStorage.getItem(key)
    
                if (!itemStr) {
                    return undefined
                }
                const item = JSON.parse(itemStr)
                const now = new Date()
    
                if (now.getTime() > item.expiry) {
                    localStorage.removeItem(key)
                    return undefined
                }
                return item.value
            }
        };
        window.utils = {
            saveToLocal: saveToLocal,
            getCSS: (url, id = false) => new Promise((resolve, reject) => {
              const link = document.createElement('link')
              link.rel = 'stylesheet'
              link.href = url
              if (id) link.id = id
              link.onerror = reject
              link.onload = link.onreadystatechange = function() {
                const loadState = this.readyState
                if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
                link.onload = link.onreadystatechange = null
                resolve()
              }
              document.head.appendChild(link)
            }),
            getScript: (url, attr = {}) => new Promise((resolve, reject) => {
              const script = document.createElement('script')
              script.src = url
              script.async = true
              script.onerror = reject
              script.onload = script.onreadystatechange = function() {
                const loadState = this.readyState
                if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
                script.onload = script.onreadystatechange = null
                resolve()
              }
    
              Object.keys(attr).forEach(key => {
                script.setAttribute(key, attr[key])
              })
    
              document.head.appendChild(script)
            }),
            addGlobalFn: (key, fn, name = false, parent = window) => {
                const globalFn = parent.globalFn || {}
                const keyObj = globalFn[key] || {}
        
                if (name && keyObj[name]) return
        
                name = name || Object.keys(keyObj).length
                keyObj[name] = fn
                globalFn[key] = keyObj
                parent.globalFn = globalFn
            },
        }
    })()</script><!-- global head--><script>const GLOBAL_CONFIG = {
    root: '/',
    algolia: undefined,
    localsearch: undefined,
    runtime: '2023-04-20 00:00:00',
    lazyload: {
        enable: false,
        error: '/img/error_load.avif'
    },
    copyright: {"limit":50,"author":"ä½œè€…: æ˜Ÿä»”","link":"é“¾æ¥: ","source":"æ¥æº: æ˜Ÿä»”äººç”Ÿå½•","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚ å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"},
    highlight: {"limit":200,"expand":true,"copy":true,"syntax":"highlight.js"},
    randomlink: false,
    lang: {"theme":{"dark":"å·²åˆ‡æ¢è‡³æ·±è‰²æ¨¡å¼","light":"å·²åˆ‡æ¢è‡³æµ…è‰²æ¨¡å¼"},"copy":{"success":"å¤åˆ¶æˆåŠŸ","error":"å¤åˆ¶å¤±è´¥"},"backtop":"è¿”å›é¡¶éƒ¨","time":{"day":"å¤©å‰","hour":"å°æ—¶å‰","just":"åˆšåˆš","min":"åˆ†é’Ÿå‰","month":"ä¸ªæœˆå‰"},"day":" å¤©","f12":"å¼€å‘è€…æ¨¡å¼å·²æ‰“å¼€ï¼Œè¯·éµå¾ªGPLåè®®ã€‚","totalk":"æ— éœ€åˆ é™¤ç©ºè¡Œï¼Œç›´æ¥è¾“å…¥è¯„è®ºå³å¯"},
    aside: {
        sayhello: {
            morning: "âœ¨ Good morning. It's a new day",
            noon: "It's time for a midday break",
            afternoon: "Tea time. ğŸµ",
            night: "early bedtime",
            goodnight: "Good night ğŸ˜´",
        },
        sayhello2: [],
        sayhello3: {
            prefix: 'å¥½ä¹…ä¸è§ï¼Œ',
            back: 'æ¬¢è¿å†æ¬¡å›æ¥ï¼Œ',
        },
    },
    covercolor: {
        enable: false
    },
    comment: false,
    lightbox: 'null',
    post_ai: false,
    right_menu: false,
    lure: false,
    expire: false,
};</script><!-- page-config head--><script id="config-diff">var PAGE_CONFIG = {
    is_post: true,
    is_page: false,
    is_home: false,
    page: '',
    toc: true,
    comment: false,
    ai_text: false
}</script><meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="æ˜Ÿä»”äººç”Ÿå½•" type="application/atom+xml">
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head><body id="body"><!-- universe--><canvas id="universe"></canvas><!-- background img--><!-- loading--><!-- console--><!-- sidebar--><div id="sidebar" style="zoom: 1;"><div id="menu-mask" style="display: none;"></div><div id="sidebar-menus"><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">72</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">4</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">14</div></a></div></div></div><span class="sidebar-menu-item-title">åŠŸèƒ½</span><div class="sidebar-menu-item"><span class="darkmode_switchbutton menu-child" onclick="sco.switchDarkMode()"><i class="solitude fa-solid fa-circle-half-stroke"></i><span>æ˜¾ç¤ºæ¨¡å¼</span></span></div><span class="sidebar-menu-item-title">æ ‡ç­¾</span><div class="card-widget card-tags card-archives card-webinfo card-allinfo"><div class="card-tag-cloud"><a href="/tags/51%E5%8D%95%E7%89%87%E6%9C%BA/">51å•ç‰‡æœº<sup>9</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/">Cè¯­è¨€<sup>13</sup></a><a href="/tags/Java/">Java<sup>26</sup></a><a href="/tags/GitHub%E5%90%8C%E6%AD%A5gitee%E5%B9%B6%E9%83%A8%E7%BD%B2/">GitHubåŒæ­¥giteeå¹¶éƒ¨ç½²<sup>1</sup></a><a href="/tags/GitHub-Picgo%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0/">GitHub+Picgoå›¾ç‰‡ä¸Šä¼ <sup>1</sup></a><a href="/tags/%E4%BA%91%E5%9B%BE%E5%BA%8A/">äº‘å›¾åºŠ<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/">åšå®¢ä½¿ç”¨æ‰‹å†Œ<sup>1</sup></a><a href="/tags/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E5%9C%A8%E7%BA%BF%E5%B7%A5%E5%85%B7/">å›¾ç‰‡å‹ç¼©åœ¨çº¿å·¥å…·<sup>1</sup></a><a href="/tags/%E5%B0%8F%E7%8B%BC%E6%AF%AB%E8%BE%93%E5%85%A5%E6%B3%95/">å°ç‹¼æ¯«è¾“å…¥æ³•<sup>1</sup></a><a href="/tags/%E6%8F%92%E4%BB%B6/">æ’ä»¶<sup>1</sup></a><a href="/tags/%E9%AD%94%E6%B3%95/">é­”æ³•<sup>1</sup></a><a href="/tags/%E8%B5%84%E6%BA%90%E6%90%9C%E7%B4%A2/">èµ„æºæœç´¢<sup>1</sup></a><a href="/tags/%E6%94%BF%E6%B2%BB/">æ”¿æ²»<sup>14</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E4%B8%8E%E5%9F%BA%E7%A1%80/">è®¡ç®—æœºç¨‹åºä¸åŸºç¡€<sup>1</sup></a></div></div></div></div><!-- keyboard--><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav class="show" id="nav"><div id="nav-group"><div id="blog_name"><a id="site-name" href="/" title="è¿”å›åšå®¢ä¸»é¡µ"><span class="title">Solitude</span><i class="solitude fa-solid fa-home"></i></a></div><div id="page-name-mask"><div id="page-name"><a id="page-name-text" onclick="sco.toTop()">24.å¤šçº¿ç¨‹</a></div></div><div id="menus"></div><div id="nav-left"></div><div id="nav-right"><div class="nav-button" id="nav-totop" onclick="sco.toTop()"><a class="totopbtn"><i class="solitude fa-solid fa-arrow-up"></i><span id="percent">0</span></a></div><div id="toggle-menu"><a class="site-page"><i class="solitude fa-solid fa-bars"></i></a></div></div></div></nav><div class="coverdiv" id="coverdiv"><img class="nolazyload" id="post-cover" src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202402292029940.png" alt="24.å¤šçº¿ç¨‹"></div><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®">åŸåˆ›</a><span class="post-meta-categories"><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">ç¼–ç¨‹è¯­è¨€</a></span><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/"><span class="tags-name tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>Java</span></a></div></div></div></div><h1 class="post-title">24.å¤šçº¿ç¨‹</h1><div id="post-meta"><div class="meta-secondline"></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="çŸ¥è¯†ç‚¹ä¸€ï¼šThreadçº¿ç¨‹åŸºç¡€"><a href="#çŸ¥è¯†ç‚¹ä¸€ï¼šThreadçº¿ç¨‹åŸºç¡€" class="headerlink" title="çŸ¥è¯†ç‚¹ä¸€ï¼šThreadçº¿ç¨‹åŸºç¡€"></a><center>çŸ¥è¯†ç‚¹ä¸€ï¼šThreadçº¿ç¨‹åŸºç¡€</center></h1><p>æœ‰ä¸€ä¸ªåœºæ™¯ï¼šåœ¨ä¸€ä¸ªç¨‹åºä¸­å³å¯ä»¥ç©æ¸¸æˆåˆå¯ä»¥æ’­æ”¾éŸ³ä¹ï¼Ÿ</p>
<p>ä»¥ç°åœ¨ç¼–ç¨‹æ‰‹æ®µè€Œè¨€ â€”ã€‹ æä¾›ç¼–ç¨‹ç»“æ„ã€é¡ºåºã€åˆ†æ”¯ã€å¾ªç¯ã€‘</p>
<p>ä»£ç æ˜¯è¦éµå®ˆé¡ºåºæ‰§è¡Œï¼Œä»£ç éœ€è¦éµå®ˆä»ä¸Šè‡³ä¸‹é€è¡Œæ‰§è¡Œï¼Œåˆ©ç”¨åˆ†æ”¯å’Œå¾ªç¯ä¿®æ”¹å¾ªç¯æ‰§è¡Œä¸€äº›æ“ä½œï¼Œé€‰æ‹©æ€§æ‰§è¡ŒæŸä»£ç æˆ–è€…æ˜¯è®©æŸäº›ä»£ç é‡å¤æ‰§è¡Œï¼Œæ— è®ºå¦‚ä½•æ“ä½œä»£ç ä¾æ—§è¦é¡ºåºæ‰§è¡Œï¼Œæ²¡æœ‰åŠæ³•è®©ä¸¤æ®µä»£äº¤æ›¿æ‰§è¡Œ</p>
<img src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202403012202919.png" alt="çº¿ç¨‹æµç¨‹" style="zoom: 50%;">

<p>æ­¤æ—¶Javaä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œæä¾›ä¸€ä¸ªæ“ä½œï¼Œè¿™ä¸ªæ“ä½œå°±å«åš<strong>çº¿ç¨‹</strong>ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨å¤šçº¿ç¨‹å½¢å¼æ¥å®Œæˆè¿™ä¸ªæ“ä½œ</p>
<p>PS:ç°åœ¨ç”µè„‘åŸºæœ¬ä¸Šéƒ½æ˜¯å¤šæ ¸CPUï¼Œæ‰€ä»¥æ¯ä¸ªäººç”µè„‘ä¸Šè¿è¡Œçº¿ç¨‹ç¨‹åºç»“æœå¯èƒ½éƒ½ä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ­£å¸¸ç°è±¡ï¼Œå¤šçº¿ç¨‹è¿è¡Œæ—¶æ˜¯ä¸€ä¸ªä¸å¯é¢„çŸ¥çŠ¶æ€ï¼Œç¨‹åºçŒ¿å¯ä»¥é€šè¿‡ä»£ç å¹²é¢„çº¿ç¨‹è¿è¡Œï¼Œä»¥è¾¾åˆ°æˆ‘ä»¬è¿è¡Œæ•ˆæœ</p>
<h1 id="çŸ¥è¯†ç‚¹äºŒï¼šå¹¶è¡Œå’Œå¹¶å‘"><a href="#çŸ¥è¯†ç‚¹äºŒï¼šå¹¶è¡Œå’Œå¹¶å‘" class="headerlink" title="çŸ¥è¯†ç‚¹äºŒï¼šå¹¶è¡Œå’Œå¹¶å‘"></a><center>çŸ¥è¯†ç‚¹äºŒï¼šå¹¶è¡Œå’Œå¹¶å‘</center></h1><p>è¿™ä¸¤ä¸ªæ¦‚å¿µåœ¨å®è§‚çš„è§’åº¦è€Œè¨€ä»–ä»¬æ˜¯ä¸€æ ·(ç›¸ä¼¼)çš„ï¼Œä½†æ˜¯åœ¨å¾®è§‚çš„è§’åº¦è€Œè¨€ä»–ä»¬æ˜¯æœ‰åŒºåˆ«</p>
<img src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202403012203194.png" alt="å¹¶è¡Œå’Œå¹¶å‘" style="zoom:50%;">

<p><strong>å¹¶è¡Œå°±æ˜¯åŒæ—¶æ‰§è¡Œï¼Œå¹¶å‘å°±æ˜¯åœ¨äº¤æ›¿æ‰§è¡Œ</strong></p>
<p>&ensp;&ensp;&ensp;&ensp;åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå®‰è£…äº†å¾ˆå¤šç¨‹åºï¼Œå¹¶å‘æŒ‡çš„æ˜¯åœ¨ä¸€æ®µæ—¶é—´å†…å®è§‚ä¸Šå¤šä¸ªç¨‹åºåŒæ—¶æ‰§è¡Œï¼Œè¿™ä¸ªåœ¨å•ä¸ªCPUç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªç¨‹åºæ‰§è¡Œï¼Œå³å¾®è§‚ä¸Šè¿™äº›ç¨‹åºæ˜¯åˆ†æ—¶äº¤æ›¿çš„æ‰§è¡Œï¼Œåªä¸è¿‡ç»™äººæ„Ÿè§‰æ˜¯åœ¨åŒæ—¶è¿è¡Œï¼Œå› ä¸ºåˆ†æ—¶äº¤æ›¿è¿è¡Œæ—¶é—´éå¸¸çŸ­æš‚</p>
<p>&ensp;&ensp;&ensp;&ensp;ç°åœ¨è€Œè¨€éƒ½æ˜¯å¤šæ ¸CPUï¼Œåˆ™è¿™äº›å¹¶å‘æ‰§è¡Œç¨‹åºå¯ä»¥åˆ†é…åˆ°ä¸åŒçš„å¤„ç†å™¨ä¸Šï¼ˆCPUï¼‰ï¼Œå®ç°å¤šä¸ªä»»åŠ¡å¹¶è¡Œæ‰§è¡Œï¼Œå³åˆ©ç”¨æ¯ä¸ªå¤„ç†å™¨æ¥å¤„ç†ä¸€ä¸ªå¯ä»¥å¹¶å‘æ‰§è¡Œçš„ç¨‹åºï¼Œè¿™æ ·å¤šä¸ªç¨‹åºå°±å¯ä»¥åŒæ—¶æ‰§è¡Œäº†ï¼Œä½ çš„ç”µè„‘CPUæ ¸å¿ƒè¶Šå¤šä½ ç”µè„‘çš„æ€§èƒ½å°±ç›¸å¯¹æ›´åŠ å¼ºæ‚</p>
<p>PS:å•æ ¸å¤„ç†çš„è®¡ç®—æœºè‚¯å®šæ˜¯ä¸èƒ½å¹¶è¡Œå¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œåªèƒ½æ˜¯å¤šä¸ªä»»åŠ¡åœ¨å•ä¸ªCPUä¸Šå¹¶å‘éœ€è¦è¿è¡Œï¼ŒåŒç†çº¿ç¨‹ä¹Ÿæ˜¯ä¸€æ ·çš„ä»å®è§‚çš„è§’åº¦è€Œè¨€çº¿ç¨‹å¹¶è¡Œè¿è¡Œä»å¾®è§‚è§’åº¦çœ‹å°±æ˜¯ä¸²è¡Œè¿è¡Œï¼Œå³çº¿ç¨‹æ˜¯ä¸€ä¸ªä¸€ä¸ªå»æ‰§è¡Œçš„ï¼Œå½“ç³»ç»Ÿåªæœ‰ä¸€ä¸ªCPUæ˜¯ï¼Œçº¿ç¨‹ä¼šä»¥æŸç§é¡ºåºæ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªæƒ…å†µç§°ä¹‹çº¿ç¨‹è°ƒåº¦ã€çº¿ç¨‹æä¾›CPUæ—¶é—´äº‰æŠ¢ã€‘</p>
<h1 id="çŸ¥è¯†ç‚¹ä¸‰ï¼šçº¿ç¨‹å’Œè¿›ç¨‹"><a href="#çŸ¥è¯†ç‚¹ä¸‰ï¼šçº¿ç¨‹å’Œè¿›ç¨‹" class="headerlink" title="çŸ¥è¯†ç‚¹ä¸‰ï¼šçº¿ç¨‹å’Œè¿›ç¨‹"></a><center>çŸ¥è¯†ç‚¹ä¸‰ï¼šçº¿ç¨‹å’Œè¿›ç¨‹</center></h1><p><strong>è¿›ç¨‹</strong></p>
<p>&ensp;&ensp;&ensp;&ensp;è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿è¡Œç¨‹åºçš„åŸºæœ¬å•å…ƒï¼Œç³»ç»Ÿè¿è¡Œä¸€ä¸ªç¨‹åºå³åœ¨è¿è¡Œä¸€ä¸ªè¿›ç¨‹ã€ä»åˆ›å»ºã€è¿è¡Œã€æ¶ˆäº¡çš„ä¸€ä¸ªè¿‡ç¨‹ã€‘ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ä¸€ä¸ªç‹¬ç«‹çš„ç©ºé—´ã€å†…å­˜ç©ºé—´ã€‘ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åº(è¿›ç¨‹)å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹</p>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>è¿›ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹ç¨‹åºå•å…ƒå¹¶ä¸”æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹ç©ºé—´</li>
<li>ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹</li>
</ol>
<img src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202403012204035.png" alt="è¿›ç¨‹" style="zoom:50%;">

<p>è¿›ç¨‹æ˜¯å¯ä»¥å®Œæˆå¤šä¸ªä»»åŠ¡äº¤æ›¿æ‰§è¡Œçš„ï¼Œå¯ä»¥å¼€å‘ä¸€ä¸ªéŸ³ä¹è½¯ä»¶ï¼ˆQQéŸ³ä¹ã€ç½‘æ˜“äº‘éŸ³ä¹ã€é…·ç‹—éŸ³ä¹ï¼‰ï¼Œä¹Ÿå¯ä»¥å¼€å‘ä¸€ä¸ªæ‰“æ¸¸æˆè½¯ä»¶ï¼ˆL0Lã€åƒé¸¡æˆ˜åœºã€Dota2ï¼‰ï¼Œåªè¦è¿è¡Œè¿™ä¸¤ä¸ªè¿›ç¨‹ç¨‹åºå°±å¯ä»¥å®Œæˆä¸€è¾¹å¬éŸ³ä¹ï¼Œä¸€è¾¹æ‰“æ¸¸æˆï¼Œè¿™æ ·åšå¼€å‘æˆæœ¬é«˜ï¼Œè¿›è¡Œæ˜¯ç‹¬ç«‹çš„è¿›ç¨‹ä¸è¿›ç¨‹ä¹‹é—´æ˜¯æ— æ³•è¿›è¡Œâ€œ<strong>é€šä¿¡</strong>â€çš„</p>
<p><strong>çº¿ç¨‹</strong></p>
<p>&ensp;&ensp;&ensp;&ensp;çº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå†…éƒ¨æ‰§è¡Œå•å…ƒï¼Œè´Ÿè´£å½“å‰è¿›ç¨‹ä¸­çš„ç¨‹åºæ‰§è¡Œï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹åœ¨è¿›ç¨‹ä¸­è¢«ç§°ä¹‹ä¸ºâ€œå¤šçº¿ç¨‹â€ï¼Œè¿›ç¨‹å°±å¯ä»¥åˆ©ç”¨è¿™äº›å¤šçº¿ç¨‹ï¼Œå»å®Œæˆä¸åŒæ“ä½œ</p>
<p>ç‰¹ç‚¹:</p>
<ol>
<li>çº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹çš„å†…éƒ¨æ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥å­˜åœ¨å¤šä¸ªï¼Œå½¼æ­¤ä¹‹é—´å…±äº«è¿›ç¨‹çš„å†…å­˜åŒºåŸŸ</li>
<li>çº¿ç¨‹ä¸çº¿ç¨‹ä¹‹é—´å½¼æ­¤ç‹¬ç«‹ï¼Œä½†æ˜¯å¯ä»¥è¿›è¡Œâ€œé€šä¿¡â€</li>
</ol>
<p>å¯ä»¥åˆ©ç”¨è¿™ä¸ªè½»é‡çº§çš„å¼€å‘å®Œæˆä¸€ä¸ªè¿›ç¨‹å†…éƒ¨ç¨‹åºäº¤æ›¿æ‰§è¡Œæ•ˆæœï¼ˆçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼‰</p>
<img src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202403012205517.png" alt="çº¿ç¨‹" style="zoom:50%;">

<p>æ€»ç»“è¿›ç¨‹ä¸çº¿ç¨‹çš„åŒºåˆ«ï¼š</p>
<p>&ensp;&ensp;&ensp;&ensp;è¿›ç¨‹ï¼š æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œè¿›ç¨‹ä¸­æ•°æ®å­˜æ”¾çš„ç©ºé—´æ˜¯ç‹¬ç«‹çš„å¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹</p>
<p>&ensp;&ensp;&ensp;&ensp;çº¿ç¨‹ï¼šå †ç©ºé—´æ˜¯å…±äº«çš„ï¼Œæ ˆç©ºé—´æ˜¯ç‹¬ç«‹çš„ï¼Œçº¿ç¨‹æ¶ˆè€—çš„èµ„æºè¦æ¯”è¿›ç¨‹å°ï¼Œå¹¶ä¸”å¯ä»¥å¤šä¸ªçº¿ç¨‹å­˜åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­</p>
<p>PS:éœ€è¦çŸ¥é“äº†è§£çš„çŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li>å› ä¸ºä¸€ä¸ªç¨‹åºä¸­æœ‰å¤šä¸ªçº¿ç¨‹å¹¶å‘è¿è¡Œï¼Œé‚£ä¹ˆä»å¾®è§‚çš„è§’åº¦è€Œè¨€æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œé‚£ä¹ˆçº¿ç¨‹æ‰§è¡Œçš„é¡ºåºæ˜¯å–å†³äºCPUçš„è°ƒåº¦ã€çº¿ç¨‹äº‰æŠ¢CPUæ—¶é—´ç‰‡ã€‘ï¼Œç¨‹åºçŒ¿åªèƒ½è¿›è¡Œå¹²æ¶‰ï¼Œåœ¨ä¸åŠ å¹²æ¶‰å‰æä¸‹çº¿ç¨‹æ‰§è¡Œå°±ä¼šå‡ºç°å¾ˆå¤šéšæœºæ€§</li>
<li>Javaç¨‹åºè¿›ç¨‹ä¸­æœ€å°‘åŒ…å«ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯ä¸»çº¿ç¨‹å°±æ˜¯main()æ–¹æ³•ã€å®ƒåœ¨æ‰§è¡Œæ–¹æ³•æ˜¯æˆ–è€…æ‰§è¡Œç¨‹åºæ—¶å®ƒçš„ä¼˜å…ˆçº§æ°¸è¿œæœ€é«˜ã€‘ï¼Œå¦å¤–ä¸€ä¸ªåƒåœ¾å›æ”¶æœºåˆ¶çº¿ç¨‹(GC)ã€å®ˆæŠ¤çº¿ç¨‹ã€‘ï¼Œæ¯å½“Javaæ‰§è¡Œä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®é™…ä¸Šéƒ½ä¼šå¯åŠ¨ä¸€ä¸ªJVMï¼Œæ¯ä¸€ä¸ªJVMå®é™…ä¸Šå°±æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸­å¯åŠ¨äº†ä¸€ä¸ªçº¿ç¨‹ï¼ŒJavaæœ¬èº«å°±è¢«åƒåœ¾å›æ”¶æœºåˆ¶æ‰€å®ˆæŠ¤ï¼Œæ‰€Javaè¿è¡Œæ—¶è‡³å°‘å¯åŠ¨äº†ä¸¤ä¸ªçº¿ç¨‹</li>
<li>ç”±äºåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¼€é”€è¿œæ¯”åˆ›å»ºä¸€ä¸ªè¿›ç¨‹å¼€é”€è¦å°å¾ˆå¤šï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å¼€å‘å¤šä»»åŠ¡è¿è¡Œæ—¶ï¼Œé€šå¸¸ä¼šä¼˜å…ˆè€ƒè™‘åˆ›å»ºå¤šçº¿ç¨‹ï¼Œè€Œä¸æ˜¯å¤šè¿›ç¨‹</li>
<li>æ‰€æœ‰çš„çº¿ç¨‹è½®æµä½¿ç”¨CPUï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½ä¼šå¾—åˆ°CPUåˆ†é…çš„æ—¶é—´ç‰‡ï¼Œè¿™ä¸ªåˆ†é…â€œå°½é‡â€å¹³å‡åˆ†é…CPUèµ„æºï¼Œä½†æ˜¯è¿™ä¸ªæ•ˆæœä¸ä¸€å®šèƒ½è¾¾åˆ°ï¼Œæ‰€ä»¥åŒä¼˜å…ˆçº§çš„çº¿ç¨‹å¯¹CPUæ—¶é—´çš„äº‰æŠ¢æ˜¯å­˜åœ¨éšæœºæ€§çš„ï¼Œå¯ä»¥å¯¹çº¿ç¨‹è¿›è¡Œä¼˜å…ˆçº§è®¾ç½®æ¥æ¦‚å¿µè·å–CPUæ—¶é—´ç‰‡çš„å‡ ç‡ï¼Œä¼˜å…ˆçº§è¶Šé«˜å‡ ç‡è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šä½å‡ ç‡è¶Šå°</li>
</ol>
<h1 id="çŸ¥è¯†ç‚¹å››ï¼šJavaç¨‹åºä¸­å®ç°çº¿ç¨‹çš„æ–¹å¼"><a href="#çŸ¥è¯†ç‚¹å››ï¼šJavaç¨‹åºä¸­å®ç°çº¿ç¨‹çš„æ–¹å¼" class="headerlink" title="çŸ¥è¯†ç‚¹å››ï¼šJavaç¨‹åºä¸­å®ç°çº¿ç¨‹çš„æ–¹å¼"></a><center>çŸ¥è¯†ç‚¹å››ï¼šJavaç¨‹åºä¸­å®ç°çº¿ç¨‹çš„æ–¹å¼</center></h1><p>åœ¨Javaä¸­ä¸»è¦åˆ›å»ºçº¿ç¨‹æ–¹å¼æœ‰å››ç§ï¼š</p>
<ol>
<li>ç»§æ‰¿Threadç±»ï¼Œæ­¤æ—¶å­ç±»å°±æ˜¯çº¿ç¨‹ç±»</li>
<li>å®ç°Runnableæ¥å£ï¼Œæ­¤æ—¶å®ç°ç±»ä¸æ˜¯çº¿ç¨‹ç±»ï¼Œä½¿ç”¨Threadç±»æ‰å¯æˆä¸ºçº¿ç¨‹</li>
</ol>
<p><strong>æ— è®ºæ˜¯ä¸Šè¿°ä¸¤ç§æ–¹å¼ä¸­é‚£ç§æ–¹å¼éƒ½éœ€å¿…é¡»é‡å†™runæ–¹æ³•å®ç°çº¿ç¨‹é€»è¾‘</strong></p>
<ol start="3">
<li>å®ç°Callableæ¥å£ï¼Œ æ­¤å®ç°æ–¹æ–¹å¼å¹¶ä¸æ˜¯çº¿ç¨‹ç±»ï¼Œä¸»è¦é’ˆå¯¹çš„æ˜¯çº¿ç¨‹æ± æä¾›</li>
<li>çº¿ç¨‹æ± å¯ä»¥å¸®ç»„æˆ‘ä»¬åˆ›å»ºçº¿ç¨‹å¹¶è¿›è¡Œç®¡ç†æ“ä½œ</li>
</ol>
<p>å¦‚æœå®ç°çº¿ç¨‹éœ€è¦ç»§æ‰¿Threadæˆ–å®ç°Runnableæ¥å£ï¼Œä½†æ˜¯æ— è®ºæ˜¯é‚£ç§éƒ½éœ€è¦å®ç°ä¸€ä¸ªå¿…è¦æ ¸å¿ƒæ–¹æ³•</p>
<p><strong>è¿™ä¸ªrunæ–¹æ³•æ˜¯æä¾›çº¿ç¨‹å®ç°çš„æ ¸å¿ƒé€»è¾‘ï¼Œéœ€è¦çº¿ç¨‹ä»€ä¹ˆæ ·éœ€æ±‚ä»£ç ï¼Œå°±å°†å°†ä»£ç å†™å…¥åˆ°è¿™ä¸ªçº¿ç¨‹ä¸­</strong></p>
<table>
<thead>
<tr>
<th align="center">void</th>
<th align="center">run() ä½¿ç”¨å®ç°æ¥å£ Runnable çš„å¯¹è±¡åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¯åŠ¨è¯¥çº¿ç¨‹å°†å¯¼è‡´åœ¨ç‹¬ç«‹æ‰§è¡Œçš„çº¿ç¨‹ä¸­è°ƒç”¨å¯¹è±¡çš„ runæ–¹æ³•</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center"><strong>PSï¼šé€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°è¿™ä¸ªrunæ–¹æ³•æ˜¯æ²¡æœ‰å‚æ•°å’Œè¿”å›å€¼ç±»å‹ï¼Œæ‰€ä»¥è¿™ä¸ªrunä¸èƒ½é€šè¿‡æ–¹æ³•æ¥æ”¶å‚æ•°å’Œè¿”å›æ•°æ®å€¼</strong></td>
</tr>
</tbody></table>
<h2 id="1ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹ç»§æ‰¿Threadç±»"><a href="#1ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹ç»§æ‰¿Threadç±»" class="headerlink" title="1ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹ç»§æ‰¿Threadç±»"></a><center>1ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹ç»§æ‰¿Threadç±»</center></h2><p>æ­¥éª¤ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> å®šä¹‰ä¸€ä¸ªæ™®é€šç±»ç»§æ‰¿ä¸`java.lang.Thread`ç±»</span><br><span class="line"><span class="number">2.</span> åœ¨å­ç±»ä¸­é‡æ–°ç»™çˆ¶ç±»Threadä¸­runæ–¹æ³•å¹¶æä¾›çº¿ç¨‹å®ç°é€»è¾‘</span><br><span class="line"><span class="number">3.</span> åœ¨æµ‹è¯•ç±»ä¸­mainæ–¹æ³•ä¸­ï¼Œé€šè¿‡çº¿ç¨‹å­ç±»æˆ–Threadè¿™ä¸ªçˆ¶ç±»åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶æ‰§è¡Œçº¿ç¨‹å¯åŠ¨å®Œæˆè°ƒç”¨runæ–¹æ³•ä¸­é€»è¾‘æ‰§è¡Œ</span><br></pre></td></tr></table></figure>

<p>PSï¼šå› ä¸ºThreadæœ¬èº«å°±æ˜¯çº¿ç¨‹ç±»ï¼Œæ‰€ä»¥ç»§æ‰¿Threadç±»å­ç±»ä¹Ÿæ˜¯çº¿ç¨‹ç±»ï¼Œå…·å¤‡çˆ¶ç±»ä¸­Threadæ‰€æä¾›çš„æ‰€æœ‰æ“ä½œè€…çº¿ç¨‹æ–¹æ³•</p>
<p>éœ€æ±‚ï¼šä½¿ç”¨ç»§æ‰¿Threadç±»æ–¹æ³•æ˜¯å®Œæˆè¾¹æ‰“æ¸¸æˆå’Œè¾¹å¬éŸ³ä¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸ºäº†æ¼”ç¤ºæ•ˆæœæ–¹ä¾¿è§‚å¯Ÿå†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶GameThreadç»§æ‰¿ä¸Threadç±»æ‰€ä»¥GameThreadå°±æ˜¯çº¿ç¨‹ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GameThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å¿…é¡»é‡å†™Threadçˆ¶ç±»ä¸­çš„runæ–¹æ³•ï¼Œæä¾›è¿™ä¸ªçº¿ç¨‹éœ€è¦çš„æ‰§è¡Œé€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">1</span> ; i&lt;=<span class="number">50</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ‰“æ¸¸æˆï¼š&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//æ­¤æ—¶MusicThreadç»§æ‰¿ä¸Threadç±»æ‰€ä»¥GameThreadå°±æ˜¯çº¿ç¨‹ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MusicThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å¿…é¡»é‡å†™Threadçˆ¶ç±»ä¸­çš„runæ–¹æ³•ï¼Œæä¾›è¿™ä¸ªçº¿ç¨‹éœ€è¦çš„æ‰§è¡Œé€»è¾‘</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">1</span> ; i&lt;=<span class="number">50</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¬éŸ³ä¹ï¼š&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//æä¾›ä¸€ä¸ªæµ‹è¯•ç±»å®Œæˆçº¿ç¨‹åˆ›å»ºä¸è°ƒç”¨</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//mainæ–¹æ³•æœ¬èº«ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸»çº¿çº¿ç¨‹ä¼˜å…ˆçº§æœ€é«˜</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¦‚ä½•åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ä¸‹é¢ä¸¤ç§åˆ›å»ºçº¿ç¨‹æ–¹å¼å¹¶æ²¡æœ‰æŒ‡å®šçº¿ç¨‹ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥éƒ½æ˜¯é»˜è®¤ä¼˜å…ˆçº§athreadå’Œbthreadçš„ä¼˜å…ˆçº§ç›¸åŒ</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            1. ä½¿ç”¨å¤šæ€çš„æ•ˆæœã€Threadæ˜¯å­çº¿ç¨‹ç±»çˆ¶ç±»ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨Threadæ–¹å¼åˆ›å»ºã€‘</span></span><br><span class="line"><span class="comment">                Thread çº¿ç¨‹å¯¹è±¡çš„åå­— = new å­çº¿ç¨‹ç±»();</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">athread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GameThread</span>();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            2. ç›´æ¥ä½¿ç”¨ç»§æ‰¿çº¿ç¨‹å­ç±»åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">                å­çº¿ç¨‹ç±» çº¿ç¨‹å¯¹è±¡çš„åå­— = new å­çº¿ç¨‹ç±»();</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">MusicThread</span> <span class="variable">bthread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MusicThread</span>();</span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹æ‰§è¡Œ ---ã€‹è°ƒç”¨ Threadç±»ä¸­æä¾› startæ–¹æ³• ï¼Œè€Œä¸æ˜¯è°ƒç”¨runæ–¹æ³•</span></span><br><span class="line">        athread.start();</span><br><span class="line">        bthread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹å®ç°Runnableæ¥å£"><a href="#2ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹å®ç°Runnableæ¥å£" class="headerlink" title="2ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹å®ç°Runnableæ¥å£"></a><center>2ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹å®ç°Runnableæ¥å£</center></h2><p>PSï¼š<strong>å®ç°Runnableæ¥å£çš„ç±»å¹¶ä¸æ˜¯çº¿ç¨‹ç±»ï¼Œåªæ˜¯å®ç°Runnableæ¥å£å¹¶æä¾›runæ–¹æ³•çš„é‡å†™ï¼Œéœ€è¦é…åˆä½¿ç”¨Threadç±»åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œæ­¤æ—¶çº¿ç¨‹æ‰å¯ä»¥æ“ä½œ</strong>ã€‚å› ä¸ºRunnableæ¥å£ä¸­æä¾›runæ–¹æ³•çš„å®ç°ã€å®ç°Runnableæ¥å£çš„ç±»ã€‘ï¼Œä¼ å…¥åˆ°Threadç±»ä¸­æ—¶ï¼Œå°±ä¼šè¦†ç›–Threadç±»ä¸­runæ–¹æ³•ï¼Œæ‰€ä»¥Threadæä¾›åˆ›å»ºçº¿ç¨‹å¯¹è±¡å°±ä¼šæ‰§è¡Œé‡å†™Runnableæ¥å£ä¸­runæ–¹æ³•ï¼Œå°±ä¼šå¾—åˆ°çº¿ç¨‹çš„æ•ˆæœ</p>
<p>æ­¥éª¤:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> å®šä¹‰ä¸€ä¸ªæ™®é€šç±»å®ç°Runnableæ¥å£</span><br><span class="line"><span class="number">2.</span> å®ç°Runnableæ¥å£çš„ç±»å¿…é¡»é‡å†™runæ–¹æ³•æä¾›çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„é€»è¾‘</span><br><span class="line"><span class="number">3.</span> åœ¨æµ‹è¯•ç±»ä¸­mainæ–¹æ³•ä¸­ï¼Œä½¿ç”¨Threadåˆ›å»ºçº¿ç¨‹å¯¹è±¡å®Œæˆçº¿ç¨‹æ“ä½œ</span><br></pre></td></tr></table></figure>

<p>éœ€æ±‚ï¼šä½¿ç”¨ç»§æ‰¿Threadç±»æ–¹æ³•æ˜¯å®Œæˆè¾¹æ‰“æ¸¸æˆå’Œè¾¹å¬éŸ³ä¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.Runnable;</span><br><span class="line"><span class="comment">//ä¸ºäº†æ¼”ç¤ºæ•ˆæœæ–¹ä¾¿è§‚å¯Ÿå†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment">//æ­¤ç±»å°±æ˜¯å®ç°Runnableæ¥å£å¹¶æä¾›runæ–¹æ³•å®ç°ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GameRunnableImpl</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i= <span class="number">1</span>; i&lt;=<span class="number">50</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ‰“æ¸¸æˆï¼š&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MusicRunnableImpl</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i= <span class="number">1</span>; i&lt;=<span class="number">50</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¬éŸ³ä¹ï¼š&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºRunnableæ¥å£å®ç°ç±»ä½œä¸ºThreadçº¿ç¨‹å¯¹è±¡æ“ä½œ</span></span><br><span class="line">        <span class="comment">//éœ€è¦å°†Runnableæ¥å£çš„å¯¹è±¡ä¼ é€’åˆ°Threadè¿™ä¸ªç±»ä¸­</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            1. å…ˆåˆ›å»ºRunnableæ¥å£å®ç°ç±»çš„å¯¹è±¡ï¼Œç„¶åå†ä¼ é€’åˆ°Threadç±»ä¸­è¿›è¡Œçº¿ç¨‹å¯¹è±¡åˆ›å»º</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">GameRunnableImpl</span> <span class="variable">gri</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GameRunnableImpl</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(gri);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            2.ä½¿ç”¨åŒ¿åå¯¹è±¡çš„æ–¹å¼è¿›è¡ŒThreadæ„é€ æ–¹æ³•Runnableå‚æ•°ä¼ é€’</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MusicRunnableImpl</span>());</span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3ã€Threadç±»åˆ›å»ºçº¿ç¨‹å’ŒRunnableæ¥å£åˆ›å»ºçº¿ç¨‹"><a href="#3ã€Threadç±»åˆ›å»ºçº¿ç¨‹å’ŒRunnableæ¥å£åˆ›å»ºçº¿ç¨‹" class="headerlink" title="3ã€Threadç±»åˆ›å»ºçº¿ç¨‹å’ŒRunnableæ¥å£åˆ›å»ºçº¿ç¨‹"></a><center>3ã€Threadç±»åˆ›å»ºçº¿ç¨‹å’ŒRunnableæ¥å£åˆ›å»ºçº¿ç¨‹</center></h2><p>&ensp;&ensp;&ensp;&ensp;ä¸¤ç§æ–¹å¼çš†å¯ï¼Œå› ä¸ºéƒ½è¦å®ç°runæ–¹æ³•ï¼Œä½†æ˜¯ä»ç±»çš„æ‰©å±•è§’åº¦è€Œè¨€ï¼Œå»ºè®®ä½¿ç”¨å®ç°Runnableæ¥å£æ–¹å¼æ¥å®Œæˆä½œï¼Œå› ä¸ºJavaä¸­ç±»æ˜¯å•ä¸€ç»§æ‰¿ï¼Œæ‰€ä»¥å¦‚æœç»§æ‰¿Threadç±»å°±æ— æ³•åœ¨ç»§æ‰¿å…¶ä»–ç±»ï¼Œæ‰€ä»¥å°±ä¼šå½±å“ç±»çš„æ‰©å±•ï¼Œä½†æ˜¯å¦‚æœå®ç°æ¥å£æ–¹å¼å®Œæˆï¼Œä¸ä»…å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»è¿˜å¯ä»¥å®ç°å¤šä¸ªæ¥å£æ‰€ä»¥å°±æ¯”è¾ƒæ¨èå®ç°Runnableæ¥å£</p>
<p>ç»§æ‰¿æ•ˆæœï¼š</p>
<p>&ensp;&ensp;&ensp;&ensp;class A extends Thread{} &#x2F;&#x2F;æ²¡æœ‰åŠæ³•è®©Aåœ¨ç»§æ‰¿</p>
<p>&ensp;&ensp;&ensp;&ensp;class B extends XXXX implements Runnable{} &#x2F;&#x2F; ä¸ä»…å¯ä»¥ä½œä¸ºçº¿ç¨‹ç±»æ“ä½œè€Œä¸”è¿˜å¯ä»¥è¿›è¡Œç»§æ‰¿å…¶ä»–ç±»</p>
<h2 id="4ã€startæ–¹æ³•å’Œrunæ–¹æ³•"><a href="#4ã€startæ–¹æ³•å’Œrunæ–¹æ³•" class="headerlink" title="4ã€startæ–¹æ³•å’Œrunæ–¹æ³•"></a><center>4ã€startæ–¹æ³•å’Œrunæ–¹æ³•</center></h2><p>PSï¼š<strong>åˆ›å»ºå®Œæ¯•çº¿ç¨‹å¯¹è±¡ä¹‹åï¼Œçº¿ç¨‹æ‰§è¡Œéœ€è¦è°ƒç”¨çš„æ˜¯startæ–¹æ³•è€Œä¸æ˜¯runæ–¹æ³•</strong></p>
<p>startæ–¹æ³•ï¼š ç”¨startæ–¹æ³•æ¥å¯åŠ¨çº¿ç¨‹ï¼ŒçœŸæ­£çš„å®ç°äº†çº¿ç¨‹è¿è¡Œï¼Œé€šè¿‡Threadç±»ä¸­ç»™æä¾›startæ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œæ­¤æ—¶çº¿ç¨‹ä¼šè¿›å…¥åˆ°â€œ<strong>å‡†å¤‡å°±ç»ª</strong>â€çŠ¶æ€ï¼Œä½†æ˜¯çœŸæ­£è¿è¡Œï¼Œä¸€æ—¦çº¿ç¨‹è·å–åˆ°CPUæ—¶é—´ç‰‡ï¼Œæ­¤æ—¶çº¿ç¨‹æ‰ä¼šçœŸæ­£çš„æ‰§è¡Œï¼Œæ‰§è¡Œè°ƒç”¨æä¾›runæ–¹æ³•å®Œæˆçº¿ç¨‹é€»è¾‘</p>
<p>runæ–¹æ³•ï¼šrunæ–¹æ³•åªæ˜¯ä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œåªæ˜¯åœ¨runæ–¹æ³•ä¸­å®ç°çº¿ç¨‹æ‰§è¡Œé€»è¾‘ï¼Œå¦‚æœå¤–ç•Œç›´æ¥è°ƒç”¨runæ–¹æ³•ï¼Œçº¿ç¨‹æ˜¯æ²¡æœ‰å¯åŠ¨ï¼Œåªä¸è¿‡æ˜¯åœ¨mainæ–¹æ³•è°ƒç”¨äº†runæ–¹æ³•æ‰§è¡Œï¼Œæ‰§è¡Œå‡ºrunæ–¹æ³•æä¾›æ“ä½œï¼Œå’Œçº¿ç¨‹ä¸€ç‚¹å…³ç³»éƒ½æ²¡æœ‰</p>
<h2 id="5ã€ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æˆ–Lambdaè¡¨è¾¾å¼ä¾¿æ·çš„åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶æ‰§è¡Œï¼ˆäº†è§£ï¼‰"><a href="#5ã€ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æˆ–Lambdaè¡¨è¾¾å¼ä¾¿æ·çš„åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶æ‰§è¡Œï¼ˆäº†è§£ï¼‰" class="headerlink" title="5ã€ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æˆ–Lambdaè¡¨è¾¾å¼ä¾¿æ·çš„åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶æ‰§è¡Œï¼ˆäº†è§£ï¼‰"></a><center>5ã€ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æˆ–Lambdaè¡¨è¾¾å¼ä¾¿æ·çš„åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶æ‰§è¡Œï¼ˆäº†è§£ï¼‰</center></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnonymousAndLambdaThread</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//è¿™ç§æ–¹å¼ï¼Œçº¿ç¨‹æ˜¯ç°åˆ›å»ºç°ä½¿ç”¨ï¼Œåªä¼šä½¿ç”¨ä¸€æ¬¡å³å¯</span></span><br><span class="line">        <span class="comment">//1.é’ˆå¯¹Threadç±»æä¾›åŒ¿åå†…éƒ¨ç±»åˆ›å»ºã€åªæ”¯æŒåŒ¿åå†…éƒ¨ç±»ã€‘</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ;i&lt;<span class="number">50</span>;i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;å¬éŸ³ä¹ï¼š&quot;</span>+i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();     <span class="comment">// åœ¨æœ€å¤–ä¾§çš„å¤§æ‹¬å·ä¸­è°ƒç”¨startæ–¹æ³•</span></span><br><span class="line">        <span class="comment">//2.é’ˆå¯¹Runnableæ¥å£æä¾›åŒ¿åå†…éƒ¨ç±»å’ŒLambdaè¡¨è¾¾å¼å®ç°</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ;i&lt;<span class="number">50</span>;i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;æ‰“æ¸¸æˆï¼š&quot;</span>+i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start(); <span class="comment">// åœ¨æœ€å¤–ä¾§çš„å¤§æ‹¬å·ä¸­è°ƒç”¨startæ–¹æ³•</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ;i&lt;<span class="number">50</span>;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;åƒé¥­ï¼š&quot;</span>+i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start(); <span class="comment">// åœ¨æœ€å¤–ä¾§çš„å¤§æ‹¬å·ä¸­è°ƒç”¨startæ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="çŸ¥è¯†ç‚¹äº”ï¼šçº¿ç¨‹å¸¸ç”¨æ–¹æ³•"><a href="#çŸ¥è¯†ç‚¹äº”ï¼šçº¿ç¨‹å¸¸ç”¨æ–¹æ³•" class="headerlink" title="çŸ¥è¯†ç‚¹äº”ï¼šçº¿ç¨‹å¸¸ç”¨æ–¹æ³•"></a><center>çŸ¥è¯†ç‚¹äº”ï¼šçº¿ç¨‹å¸¸ç”¨æ–¹æ³•</center></h1><h2 id="1ã€çº¿ç¨‹çŠ¶æ€getState"><a href="#1ã€çº¿ç¨‹çŠ¶æ€getState" class="headerlink" title="1ã€çº¿ç¨‹çŠ¶æ€getState"></a><center>1ã€çº¿ç¨‹çŠ¶æ€getState</center></h2><p>è¿™ä¸ªæ–¹æ³•å¯ä»¥è¿”å›çº¿ç¨‹è¿è¡ŒçŠ¶æ€</p>
<p>PSï¼šAPIæœ‰ä¸€ä¸ªé™æ€å±æ€§ Stateã€APIä¸­ç»™è¿”å›ç±»å‹æ—¶é”™è¯¯çš„ï¼Œå®ƒä¸æ˜¯é™æ€ç±»ï¼Œä»–æ˜¯ä¸€ä¸ªæšä¸¾ã€‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetStateDemo</span> <span class="keyword">extends</span> <span class="title class_">Thread</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨runæ–¹æ³•è¿›è¡Œæ±‚å’Œæ“ä½œã€GetStateDemo æ˜¯ Threadå­ç±»</span></span><br><span class="line">        æ‰€ä»¥ä¼šå¾—åˆ°æ‰€æœ‰æ–¹æ³•ã€‘</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿›å…¥runæ–¹æ³•æ˜¯å½“å‰çº¿ç¨‹çŠ¶æ€ï¼š&quot;</span> + <span class="built_in">this</span>.getState());</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i&lt;=<span class="number">100</span> ; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            sum += i;</span><br><span class="line">        &#125; </span><br><span class="line">        System.out.println(<span class="string">&quot;sum = &quot;</span>+sum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GetStateDemo</span>();</span><br><span class="line">        <span class="comment">//åœ¨å¯åŠ¨çº¿ç¨‹ä¹‹å‰</span></span><br><span class="line">        System.out.println(<span class="string">&quot;startæ–¹æ³•ä¹‹å‰çº¿ç¨‹çŠ¶æ€ï¼š&quot;</span>+thread.getState());</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;startæ–¹æ³•ä¹‹åçº¿ç¨‹çŠ¶æ€ï¼š&quot;</span>+thread.getState());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥è¡¨ç¤ºçº¿ç¨‹çŠ¶æ€è¯´æ˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å‡ºç”Ÿã€æ–°ç”Ÿ</span></span><br><span class="line"><span class="comment">* è‡³ä»Šå°šæœªå¯åŠ¨çš„çº¿ç¨‹å°±æ˜¯è¿™ç§çŠ¶æ€</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">NEW,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* å‡†å¤‡å°±ç»ªå’Œæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">*PSï¼šJavaä¸­æä¾›Threadç±»å¹¶æ²¡æœ‰æä¾›å‡†å¤‡å°±ç»ªçš„çŠ¶æ€æè¿°ï¼Œæ‰€ä»¥RUNNABLEå°±æœ‰ä¸¤ä¸ªæ¦‚å¿µ</span></span><br><span class="line"><span class="comment">* è°ƒç”¨startæ–¹æ³•æ—¶æ˜¯ ---&gt; å‡†å¤‡å°±ç»ª</span></span><br><span class="line"><span class="comment">* æ‰§è¡Œrunæ–¹æ³•æ—¶æ˜¯ ---&gt; æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">RUNNABLE,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* é˜»å¡æˆ–ç¡çœ  ---ã€‹ sleepæ–¹æ³•</span></span><br><span class="line"><span class="comment">* å½“çº¿ç¨‹å‡ºç°ã€é˜»å¡çŠ¶æ€ã€‘ï¼Œå½“å‰çº¿ç¨‹å°±ä¼šå‡ºç°è®©å‡ºCPUæ—¶é—´ç‰‡çš„æ“ä½œç­‰å¾…åç»­æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">BLOCKED,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ç­‰å¾… ---ã€‹ wait</span></span><br><span class="line"><span class="comment">* ç­‰å¾…æ˜¯æ— é™æœŸç­‰å¾…åªæœ‰è¿›è¡Œå”¤é†’ä¹‹åç­‰å¾…æ•ˆæœæ‰ä¼šæ¶ˆå¤±ã€ç­‰å¾…ä¸æ˜¯é˜»å¡çŠ¶æ€ã€‘</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">WAITING,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ—¶é—´ç­‰å¾…</span></span><br><span class="line"><span class="comment">* åœ¨è®¾ç½®ç­‰å¾…çŠ¶æ€æ—¶è®¾ç½®ä¸€ä¸ªæ—¶é—´ï¼Œåªè¦åœ¨æ—¶é—´èŒƒå›´å†…éƒ½æ˜¯ç­‰å¾…çŠ¶</span></span><br><span class="line"><span class="comment">æ€ï¼Œå¦‚æœåˆ°äº†å¹¶ä¸”åœ¨ç­‰å¾…æ—¶æœŸå¹¶æ²¡æœ‰è¿›è¡Œå”¤ </span></span><br><span class="line"><span class="comment">* é†’ä»æ“ä½œï¼Œç­‰å¾…çº¿ç¨‹ä¼šè‡ªåŠ¨å”¤é†’</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">TIMED_WAITING,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ¶ˆäº¡ï¼Œæ­»äº¡</span></span><br><span class="line"><span class="comment">* çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•ä¸ä¼šåœ¨æ‰§è¡Œå°±å‡ºç°è¿™ä¸ªçŠ¶æ€ã€çº¿ç¨‹ç»“æŸã€‘</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">TERMINATED;</span><br></pre></td></tr></table></figure>

<h2 id="2ã€çº¿ç¨‹ä¼˜å…ˆçº§setPriority"><a href="#2ã€çº¿ç¨‹ä¼˜å…ˆçº§setPriority" class="headerlink" title="2ã€çº¿ç¨‹ä¼˜å…ˆçº§setPriority"></a><center>2ã€çº¿ç¨‹ä¼˜å…ˆçº§setPriority</center></h2><p>ç†è®ºä¸Šçº¿ç¨‹ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè·å–CPUæ—¶é—´ç‰‡çš„å‡ ç‡è¶Šå¤§ï¼Œåä¹‹è·å–å‡ ç‡è¶Šå°</p>
<p>PSï¼šä½†æ˜¯ä¼˜å…ˆçº§åªæ˜¯ç›¸å½“äºç»™CPUä¸€ä¸ªæš—ç¤ºã€å…ˆç”±æˆ‘å¼€å§‹ã€‘ï¼Œä½†æ˜¯CPUæ˜¯å¦ä¼šå†³å®šå°†æ—¶é—´ç‰‡ç»™å½“å‰çº¿ç¨‹ï¼Œæ˜¯CPUå†³å®š</p>
<p>æ‰€æœ‰åœ¨æ²¡æœ‰ä¿®æ”¹ä¼˜å…ˆçº§ä¹‹å‰çš„çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§éƒ½æ˜¯ç›¸åŒï¼Œåœ¨Javaä¸­ä½¿ç”¨1~10ä¹‹é—´æ•°å­—è¡¨ç¤ºçº¿ç¨‹ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰€æœ‰åœ¨æ²¡æœ‰</p>
<p>ä¿®æ”¹ä¼˜å…ˆçº§ä¹‹å‰é»˜è®¤ä¼˜å…ˆçº§æ˜¯ã€5ã€‘APIä¸­æä¾›ä¸‰ä¸ªé™æ€å¸¸é‡æ–¹ä¾¿å¯¹ä¼˜å…ˆçº§çš„å®šä¹‰</p>
<table>
<thead>
<tr>
<th align="center">static int</th>
<th align="center">MAX_PRIORITY çº¿ç¨‹å¯ä»¥å…·æœ‰çš„æœ€é«˜ä¼˜å…ˆçº§ã€ç­‰çº§10ã€‘</th>
</tr>
</thead>
<tbody><tr>
<td align="center">static int</td>
<td align="center">MIN_PRIORITY çº¿ç¨‹å¯ä»¥å…·æœ‰çš„æœ€ä½ä¼˜å…ˆçº§ã€ç­‰çº§1ã€‘</td>
</tr>
<tr>
<td align="center">static int</td>
<td align="center">NORM_PRIORITY åˆ†é…ç»™çº¿ç¨‹çš„é»˜è®¤ä¼˜å…ˆçº§ã€ç­‰çº§5ã€‘</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetPriorityDemo</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span> ;i&lt;<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//getName()è·å–çº¿ç¨‹åå­—</span></span><br><span class="line">            System.out.println(getName()+<span class="string">&quot;ï¼šiçš„æ•°å€¼ï¼š&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//åˆ©ç”¨çº¿ç¨‹åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹å¯¹è±¡ä½¿ç”¨é»˜è®¤ä¼˜å…ˆçº§</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">athread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SetPriorityDemo</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">bthread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SetPriorityDemo</span>();</span><br><span class="line">        <span class="comment">//å¯èƒ½ä¼šå‡ºç°Thread-0å…ˆæ‰§è¡Œ æˆ– Thread-1å…ˆæ‰§è¡Œ</span></span><br><span class="line">        <span class="comment">// athread.start(); // Thread-0</span></span><br><span class="line">        <span class="comment">// bthread.start(); // Thread-1</span></span><br><span class="line">        <span class="comment">//ä¿®æ”¹ä¼˜å…ˆçº§</span></span><br><span class="line">        <span class="comment">// ã€åªè¦ä¼˜å…ˆçº§çš„å·®åˆ«è¾ƒå¤§å°±å¯ä»¥çš„å¾—åˆ°å…ˆæ‰§è¡Œå’Œåæ‰§è¡Œæ•ˆæœã€‘</span></span><br><span class="line">        <span class="comment">// ã€åªè¦ä¼˜å…ˆçº§ç­‰çº§å·®åˆ«ä¸æ˜¯å¾ˆå¤§(æ¯”è¾ƒæ¥è¿‘)ï¼Œæ‰§è¡Œæ•ˆæœå°±ä¸æ˜¯å¾ˆæ˜æ˜¾äº†ã€‘</span></span><br><span class="line">        athread.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">        bthread.setPriority(<span class="number">6</span>);</span><br><span class="line">        athread.start();     <span class="comment">// Thread-0</span></span><br><span class="line">        bthread.start();     <span class="comment">// Thread-1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3ã€æ›´æ”¹å’Œè·å–çº¿ç¨‹çš„åå­—"><a href="#3ã€æ›´æ”¹å’Œè·å–çº¿ç¨‹çš„åå­—" class="headerlink" title="3ã€æ›´æ”¹å’Œè·å–çº¿ç¨‹çš„åå­—"></a><center>3ã€æ›´æ”¹å’Œè·å–çº¿ç¨‹çš„åå­—</center></h2><p>çº¿ç¨‹æ˜¯æœ‰é»˜è®¤åå­—ç»„æˆæ–¹å¼ â€”ã€‹ ä½¿ç”¨åˆ°ä¸€ä¸ªå…³é”®å­—â€œThreadâ€ + â€œ-â€ +â€œæ•°å­—â€ï¼Œæ•°å­—çš„ä»0å¼€å§‹ï¼Œéšç€çº¿ç¨‹åˆ›å»ºè€Œé€æ¸å¢å¤šï¼Œéšç€çº¿ç¨‹çš„å‡å°‘è€Œé€æ¸å‡å°‘ â€”ã€‹ é»˜è®¤åå­— ã€Thread-æ•°å­—ã€‘</p>
<p>åœ¨ç¼–å†™çº¿ç¨‹ç¨‹åºæ—¶å¯ä»¥é€šè¿‡<strong>getNameæ–¹æ³•è·å–çº¿ç¨‹åå­—</strong>ï¼Œä½†æ˜¯å¦‚æœåˆ›å»ºçº¿ç¨‹è¿‡å¤šä½¿ç”¨é»˜è®¤åå­—çœ‹åˆ°æ•ˆæœå°±ä¸æ˜¯å¾ˆæ˜æ˜¾</p>
<p>Javaä¸­æä¾›çº¿ç¨‹åå­—ä¿®æ”¹æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<ol>
<li>åœ¨åˆ›å»ºå‡ºçº¿ç¨‹å¯¹è±¡ä¹‹åè°ƒç”¨setName(â€œçº¿ç¨‹æ–°çš„åå­—â€)</li>
<li>ä½¿ç”¨ç±»å®ç°Runnableæ¥å£å¹¶ä½¿ç”¨Threadç±»åˆ›å»ºçº¿ç¨‹å¯¹è±¡ï¼Œè°ƒç”¨ä¸¤ä¸ªå‚æ•°ç‰ˆæœ¬æ„é€ æ–¹æ³•è¿›è¡Œåå­—è®¾ç½®</li>
</ol>
<p>&ensp;&ensp;&ensp;&ensp;Thread(Runnableæ¥å£å®ç°ç±»çš„å¯¹è±¡ï¼Œâ€çº¿ç¨‹åå­—â€);</p>
<ol start="3">
<li>ä½¿ç”¨ç±»ç»§æ‰¿ä¸Threadç±»ï¼Œå­ç±»ä¸­æä¾›ä¸€ä¸ªä»¿ç…§çˆ¶ç±»ç”Ÿæˆæ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å‚æ•°æ˜¯String nameï¼Œå­ç±»åª	éœ€è¦å®ç°è¿™ä¸ªæ„é€ æ–¹æ³•å³å¯ï¼Œåœ¨åˆ›å»ºçº¿ç¨‹å¯¹è±¡æ—¶åªéœ€è¦è°ƒç”¨æœ‰å‚æ„é€ æ–¹æ³•å°±å¯ä»¥æŒ‡å®šçº¿ç¨‹åå­—</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetNameDemo</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ–¹å¼ä¸€</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">athread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AThread</span>();</span><br><span class="line">        athread.setName(<span class="string">&quot;çº¿ç¨‹1&quot;</span>);</span><br><span class="line">        System.out.println(athread.getName());</span><br><span class="line">        <span class="comment">//æ–¹å¼äºŒ</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">bthread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">BThread</span>(),<span class="string">&quot;çº¿ç¨‹B&quot;</span>);</span><br><span class="line">        System.out.println(bthread.getName());</span><br><span class="line">        <span class="comment">//æ–¹å¼ä¸‰</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">cthread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CThread</span>(<span class="string">&quot;çº¿ç¨‹C&quot;</span>);    <span class="comment">//å¤šæ€</span></span><br><span class="line">        System.out.println(cthread.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å¥½&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å®ç°Runnableæ¥å£ä¸æ˜¯çº¿ç¨‹ç±»ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨å®ç°Runnableæ¥å£ç±»ä¸­è°ƒç”¨Threadç±»ä¸­æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// System.out.println(&quot;çº¿ç¨‹çš„åå­—ï¼š&quot;+getName());</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * å¦‚ä½•åœ¨å®ç°Runnableæ¥å£çš„ç±»ä¸­è·å–å½“å‰çº¿ç¨‹</span></span><br><span class="line"><span class="comment">        * Threadç±»ä¸­æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•currentThread() å¯ä»¥è·å–å½“å‰çº¿ç¨‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        System.out.println(<span class="string">&quot;é€šè¿‡é™æ€è®¿è·å–åˆ°çº¿ç¨‹å¯¹è±¡ï¼š&quot;</span>+Thread.currentThread().getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å¥½&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å­ç±»åªè¦ä»¿ç…§ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰Stringç±»å‹å‚æ•°æ–¹æ³•å³å¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CThread</span><span class="params">(String name)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4ã€çº¿ç¨‹ä¼‘çœ sleepã€ä½¿ç”¨å‡ ç‡æé«˜ã€‘"><a href="#4ã€çº¿ç¨‹ä¼‘çœ sleepã€ä½¿ç”¨å‡ ç‡æé«˜ã€‘" class="headerlink" title="4ã€çº¿ç¨‹ä¼‘çœ sleepã€ä½¿ç”¨å‡ ç‡æé«˜ã€‘"></a><center>4ã€çº¿ç¨‹ä¼‘çœ sleepã€ä½¿ç”¨å‡ ç‡æé«˜ã€‘</center></h2><p>sleepè¿™ä¸ªæ–¹æ³•æ˜¯é™æ€æ–¹æ³•ï¼Œå®ƒå¯ä»¥è®©çº¿ç¨‹è¿›å…¥åˆ°ã€é˜»å¡çŠ¶æ€ã€‘å³è®©çº¿ç¨‹è¿›è¡Œåˆ°ä¼‘çœ æ—¶é—´ï¼Œ<strong>è¿›å…¥ä¼‘çœ ä¹‹åçº¿ç¨‹ä¼šè®©å‡ºCPUæ—¶é—´ç‰‡ï¼Œç»™å…¶ä»–çš„çº¿ç¨‹è¿›è¡Œäº‰æŠ¢ï¼Œå½“ä¼‘çœ æ—¶é—´åˆ°äº†ä¹‹åæ¢å¤ä¹‹åçº¿ç¨‹ä¼šç»§ç»­å’Œå…¶çº¿ç¨‹è¿›è¡ŒCPUæ—¶é—´ç‰‡çš„äº‰æŠ¢</strong></p>
<p>sleepæ–¹æ³•çš„å‚æ•°æ˜¯æ¯«ç§’å€¼ â€”ã€‹ 1000æ¯«ç§’ ç­‰äº 1ç§’</p>
<p>çº¿ç¨‹å¦‚æœè§¦å‘sleepæ–¹æ³•ä¼šæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥é†’æ¥ï¼š</p>
<ol>
<li>è‡ªç„¶é†’æ¥ã€ç¡çœ æ—¶é—´åˆ°äº†ï¼Œè‡ªåŠ¨é†’æ¥ã€‘</li>
<li>ä¸­æ–­é†’æ¥ã€ä¼šé€šè¿‡Threadç±»ä¸­æ·»åŠ ä¸­æ–­æ ‡è®°ï¼Œå¼ºè¡Œè®©sleepé†’æ¥ã€‘</li>
</ol>
<p>æ‰€ä»¥sleepæ–¹æ³•åœ¨è°ƒç”¨æ—¶å€™ä¼šæœ‰ä¸€ä¸ªç¼–è¯‘æ—¶å¼‚å¸¸ã€InterruptedException(ä¸­æ–­å¼‚å¸¸)ã€‘</p>
<p><strong>ç‰¹åˆ«æ³¨æ„ï¼šå¦‚æœsleepæ–¹æ³•è¢«è°ƒç”¨åœ¨ã€åŒæ­¥é”ã€å¯¹è±¡é”ã€åŒæ­¥ç›‘å¬å™¨ã€åŒæ­¥ä»£ç å—ã€‘ä¸­ï¼Œsleepæ–¹æ³•ä¼‘çœ ä¹‹åæ˜¯ä¸ä¼šè®©å‡ºå½“å‰ç³»ç»Ÿæ—¶é—´ç‰‡ã€è™½ç„¶ä¼šç¡çœ æ—¶é—´ç‰‡ä¹Ÿä¼šé‡Šæ”¾ï¼Œä½†æ˜¯å¤–ç•Œçº¿ç¨‹æ˜¯æ— æ³•è·å–ã€‘</strong></p>
<p>éœ€æ±‚ï¼šé€šè¿‡sleepæ–¹æ³•æ¥å®ç°ä»¥ä¸‹äº¤æ›¿æ‰§è¡Œæ•ˆæœ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SleepDemo</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i&lt;=<span class="number">100</span> ; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">5</span> == <span class="number">0</span>)    <span class="comment">//åªè¦iå€¼å¯ä»¥å¯¹5æ•´é™¤</span></span><br><span class="line">            &#123; </span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰çº¿ç¨‹:&quot;</span>+getName()+<span class="string">&quot;~~~~~~~~~&quot;</span>+i);</span><br><span class="line">                <span class="comment">//åœ¨runæ–¹æ³•ä¸­è°ƒç”¨sleepæ–¹æ³•æ˜¯ä¸å¯ä»¥throwså¼‚å¸¸ï¼Œåªèƒ½try-catchæŠ“å–</span></span><br><span class="line">                <span class="keyword">try</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">                &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">athread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SleepDemo</span>();</span><br><span class="line">        athread.setName(<span class="string">&quot;å­çº¿ç¨‹&quot;</span>);</span><br><span class="line">        athread.start();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            Javaç¨‹åºä¼šé»˜è®¤æä¾›ä¸¤ä¸ªçº¿ç¨‹ä¸€ä¸ªæ˜¯GC å’Œ ä¸€ä¸ªæ˜¯mainæ–¹æ³•ã€ä¸»çº¿ç¨‹ä½œä¸ºçº¿ç¨‹æ“ä½œã€‘</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">//åœ¨ä¸»çº¿ç¨‹ä¸­æä¾›å’ŒSleepDemoç±»ä¸­ä¸€æ ·çš„æ“ä½œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> ; i&lt;=<span class="number">100</span> ;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i%<span class="number">5</span> ==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰çº¿ç¨‹ï¼š&quot;</span>+Thread.currentThread().getName()+<span class="string">&quot;~~~~~~~~~&quot;</span>+i);</span><br><span class="line">                <span class="keyword">try</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">                &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>sleepæ–¹æ³•ç¡®å®å¯ä»¥è®©çº¿ç¨‹è¿›å…¥åˆ°ä¼‘çœ çŠ¶æ€ï¼Œå¹¶ä¸”é‡Šæ”¾å‡ºCPUæ—¶é—´ç‰‡ï¼Œä½†æ˜¯æ—¶é—´æ— æ³•æ­£ç¡®æŠŠæ§å°±ä¼šé€ æˆæ— æ³•ä½¿ç”¨sleepæ–¹æ³•è¿›è¡Œä»£ç çš„äº¤æ›¿æ‰§è¡Œ</p>
<h2 id="5ã€çº¿ç¨‹ç¤¼è®©yieldï¼ˆäº†è§£ï¼‰"><a href="#5ã€çº¿ç¨‹ç¤¼è®©yieldï¼ˆäº†è§£ï¼‰" class="headerlink" title="5ã€çº¿ç¨‹ç¤¼è®©yieldï¼ˆäº†è§£ï¼‰"></a><center>5ã€çº¿ç¨‹ç¤¼è®©yieldï¼ˆäº†è§£ï¼‰</center></h2><p>ç¤¼è®©çº¿ç¨‹çš„ä½œç”¨å°±æ˜¯åœ¨è°ƒç”¨yieldæ–¹æ³•çš„çº¿ç¨‹ä¸­ï¼Œè®©å‡ºCPUæ—¶é—´ç‰‡ã€ç›¸å½“äºé€šçŸ¥CPUä¸æ€¥ç€æ‰§è¡Œã€‘ï¼Œè®©å‡ºä¹‹åCPUä¼šä¸ä¼šå›æ”¶CPUæ—¶é—´ç‰‡å–å†³äºCPUï¼Œç¤¼è®©åŸåˆ™æ˜¯ï¼šçº¿ç¨‹ä¼˜å…ˆçº§è¶Šé«˜ç¤¼è®©æ•ˆæœå°±æ˜¯ä¼šæ˜æ˜¾ä¸€äº›</p>
<p>yieldå’Œsleepæ–¹æ³•æ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„ï¼Œsleepæ˜¯ç«‹å³è®©å‡ºCPUæ—¶é—´ç‰‡ï¼Œåœ¨ç¡çœ æ—¶é—´å†…æ˜¯ä¸ä¼šäº‰æŠ¢CPUæ—¶é—´ç‰‡ï¼Œyieldæ–¹æ³•æ‰§è¡Œä¹‹åï¼Œç¤¼è®©çº¿ç¨‹ä¼šè¿›å…¥â€œå‡†å¤‡å°±ç»ªâ€ï¼Œç¤¼è®©çº¿ç¨‹å¯èƒ½ä¼šå†æ¬¡æŒæœ‰CPUæ—¶é—´ç‰‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">YieldDemo</span> <span class="keyword">extends</span> <span class="title class_">Thread</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span> ; i&lt;=<span class="number">50</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹çš„åå­—ï¼š&quot;</span>+getName()+<span class="string">&quot;~~~~~~~~&quot;</span>+i);</span><br><span class="line">            <span class="keyword">if</span>(i%<span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Thread.<span class="keyword">yield</span>(); <span class="comment">//è®©çº¿ç¨‹ç¤¼è®©</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">athread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">YieldDemo</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">bthread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">YieldDemo</span>();</span><br><span class="line">        athread.setName(<span class="string">&quot;açº¿ç¨‹&quot;</span>);</span><br><span class="line">        bthread.setName(<span class="string">&quot;bçº¿ç¨‹&quot;</span>);</span><br><span class="line">        athread.start();</span><br><span class="line">        bthread.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">        bthread.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6ã€çº¿ç¨‹åˆå¹¶join"><a href="#6ã€çº¿ç¨‹åˆå¹¶join" class="headerlink" title="6ã€çº¿ç¨‹åˆå¹¶join"></a><center>6ã€çº¿ç¨‹åˆå¹¶join</center></h2><p>åˆå¹¶çº¿ç¨‹æ˜¯ä¸€ä¸ªæ•ˆæœéå¸¸æ˜æ˜¾æ“ä½œï¼Œåˆå¹¶çº¿ç¨‹æ˜¯ä¸€ä¸ªçº¿ç¨‹æ­£å¤„äºè¿è¡Œé˜¶æ®µï¼Œæ­¤æ—¶è¿™ä¸ªçº¿ç¨‹è¾¾åˆ°æŸä¸ªæ¡ä»¶æ—¶ï¼Œå¯ä»¥è®©å…¶ä»–çº¿ç¨‹åˆå¹¶åˆ°è¿™ä¸ªæ‰§è¡Œçº¿ç¨‹ä¸­ï¼Œåªè¦ä½¿ç”¨joinåˆå¹¶ï¼Œåˆå¹¶çº¿ç¨‹<strong>å¿…ç„¶</strong>ä¼šå¾—åˆ°CPUæ—¶é—´ç‰‡ï¼Œè¢«åˆå¹¶çš„çº¿ç¨‹éœ€è¦ç­‰å¾…åˆå¹¶çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰ä¼šç»§ç»­è¿è¡Œ</p>
<p>éœ€æ±‚ï¼šå¦¹å­åœ¨çœ‹è‘«èŠ¦å¨ƒã€50çº§ã€‘ï¼Œå½“çœ‹åˆ°ã€10çº§ã€‘æ±‰å­è¦çœ‹å–œæ´‹æ´‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JoinDemo</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Meizi</span>().start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meizi</span> <span class="keyword">extends</span> <span class="title class_">Thread</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i&lt;=<span class="number">50</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;å¦¹å­æ­£åœ¨çœ‹ç²¾é’¢è‘«èŠ¦å¨ƒå¤§æˆ˜è›‡ç²¾ï¼š&quot;</span>+i);</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">10</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//å¯åŠ¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œåˆå¹¶æ“ä½œ</span></span><br><span class="line">                <span class="type">Hanzi</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Hanzi</span>();</span><br><span class="line">                <span class="comment">//åˆå¹¶ä¹‹å‰å¿…è¦å‰æï¼šè¦åˆå¹¶çº¿ç¨‹å¿…é¡»è¿›å…¥å‡†å¤‡å°±ç»ªçŠ¶æ€ï¼Œå³è°ƒç”¨startæ–¹æ³•</span></span><br><span class="line">                thread.start();</span><br><span class="line">                <span class="keyword">try</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    thread.join();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">                &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hanzi</span> <span class="keyword">extends</span> <span class="title class_">Thread</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i&lt;=<span class="number">10</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ±‰å­æ­£åœ¨çœ‹å–œç¾Šç¾Šä¸ç°å¤ªç‹¼ï¼š&quot;</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çº¿ç¨‹åˆå¹¶å¿…ç„¶æ˜¯è®©å‡ºCPUæ—¶é—´ç‰‡ï¼ŒCPUæ—¶é—´ç‰‡ä¼šjoinçš„çº¿ç¨‹ï¼Œçº¿ç¨‹å¿…é¡»æ˜¯å¯åŠ¨çŠ¶æ€ã€è°ƒç”¨startã€‘</p>
<h2 id="7ã€çº¿ç¨‹ä¸­æ–­-æ ‡è®°"><a href="#7ã€çº¿ç¨‹ä¸­æ–­-æ ‡è®°" class="headerlink" title="7ã€çº¿ç¨‹ä¸­æ–­(æ ‡è®°)"></a><center>7ã€çº¿ç¨‹ä¸­æ–­(æ ‡è®°)</center></h2><p>åœ¨Threadè¿™ä¸ªç±»ä¸­æä¾›è®©çº¿ç¨‹åœæ­¢æ–¹æ³• stopæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•è¢«Javaè¿›è¡Œè¿‡æ—¶å¤„ç†ï¼Œæ‰€ä»¥å°±ä¸å»ºè®®åœ¨çº¿ç¨‹ä¸­è¿›è¡Œä½¿ç”¨äº†ï¼Œæ‰€ä»¥Javaå°±æä¾›ä¸€ä¸ªæ›¿ä»£ stopæ–¹æ³•çš„æ–¹æ³• â€”ã€‹interruptæ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterruptThreadDemo</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i&lt;=<span class="number">20</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(getName()+<span class="string">&quot;çº¿ç¨‹ä¸­æ‰§è¡Œiå€¼æ˜¯:&quot;</span>+i);</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">10</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//åœæ­¢çº¿ç¨‹ --&gt;è¿‡æ—¶çš„stopæ–¹æ³•</span></span><br><span class="line">                <span class="comment">// stop();</span></span><br><span class="line">                <span class="comment">//ä¸­æ–­çº¿ç¨‹</span></span><br><span class="line">                interrupt();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">InterruptThreadDemo</span>().start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è¿™ä¸ªçº¿ç¨‹ä¸­æ–­æ ‡è®°æ–¹æ³•å‘çº¿ç¨‹ä¸­æ·»åŠ ã€ä¸­æ–­æ ‡è®°ã€‘ï¼Œåªæœ‰è¢«å«æœ‰ä¸­æ–­å¼‚å¸¸æ–¹æ³•æ£€æµ‹åˆ°è¿™ä¸ªæ ‡è®°å°±ä¼šç»ˆæ­¢æ–¹æ³•çš„æ‰§è¡Œæ•ˆæœã€sleepæ˜æ˜¾ å’Œjoinä¸æ˜æ˜¾ã€‘ï¼Œ<strong>ç›´æ¥åœ¨çº¿ç¨‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ˜¯æ— ç”¨çš„</strong>ï¼Œåªæ˜¯æ·»åŠ æ ‡è®°ä¸ä¼šåœæ­¢çº¿ç¨‹ï¼Œé…åˆAPIä¸­æ‰€æä¾›çš„ä¸€ä¸ªæ–¹æ³•æ¥ä½¿ç”¨ã€<strong>interrupted</strong>ã€‘ï¼Œä½œç”¨æ£€æŸ¥çº¿ç¨‹ä¸­æ˜¯å¦å­˜åœ¨ä¸­æ–­æ ‡è®°ï¼Œå¦‚æœå­˜åœ¨ç€è¿”å›trueï¼Œä¸å­˜åœ¨åˆ™è¿”å›false</p>
<p><strong>æ­£ç¡®ä½¿ç”¨æ–¹å¼</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterruptThreadDemo</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i&lt;=<span class="number">20</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(getName()+<span class="string">&quot;çº¿ç¨‹ä¸­æ‰§è¡Œiå€¼æ˜¯:&quot;</span>+i);</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">10</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//ä½¿ç”¨æ›¿ä»£stopæ–¹æ³•ä¸­æ–­çº¿ç¨‹æ—¶ï¼Œå½“é‡åˆ°æŸä¸ªæ¡ä»¶è¦ç»ˆæ­¢çº¿ç¨‹æ—¶ï¼Œæ£€æŸ¥ä¸­æ–­æ ‡è®°</span></span><br><span class="line">                <span class="keyword">if</span>(Thread.interrupted())</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//åœæ­¢çº¿ç¨‹</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">InterruptThreadDemo</span> <span class="variable">interruptThreadDemo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InterruptThreadDemo</span>();</span><br><span class="line">        interruptThreadDemo.start();</span><br><span class="line">        <span class="comment">//å‘çº¿ç¨‹ä¸­æ·»åŠ ä¸­æ–­æ ‡è®°</span></span><br><span class="line">        interruptThreadDemo.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼ºè¡Œç»ˆæ­¢ç¡çœ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.ThreadMethod;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterruptThreadDemo2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿›å…¥çº¿ç¨‹&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> </span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æ²¡æœ‰è¢«ä¸­æ–­æ­£å¸¸ç¡çœ è‹é†’&quot;</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸­æ–­ç¡çœ è‹é†’&quot;</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        System.out.println(<span class="string">&quot;çº¿ç¨‹ç»“æŸ&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">InterruptThreadDemo2</span> <span class="variable">interruptThreadDemo2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InterruptThreadDemo2</span>();</span><br><span class="line">        interruptThreadDemo2.start();</span><br><span class="line">        <span class="comment">//ä¸ºäº†æ•ˆæœè®©ä¸»çº¿ç¨‹ä¼‘çœ 2ç§’ä¹‹ååœ¨è§¦å‘ä¸­æ–­æ ‡è®°</span></span><br><span class="line">        <span class="keyword">try</span> </span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; </span><br><span class="line">        interruptThreadDemo2.interrupt();  <span class="comment">//å¦‚æœæ£€æŸ¥åˆ°ä¸­æ–­æ ‡è®°å°±ä¼šå¼ºè¡Œç»ˆæ­¢ç¡çœ </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="çŸ¥è¯†ç‚¹å…­ï¼šç«è½¦å”®ç¥¨é—®é¢˜"><a href="#çŸ¥è¯†ç‚¹å…­ï¼šç«è½¦å”®ç¥¨é—®é¢˜" class="headerlink" title="çŸ¥è¯†ç‚¹å…­ï¼šç«è½¦å”®ç¥¨é—®é¢˜"></a><center>çŸ¥è¯†ç‚¹å…­ï¼šç«è½¦å”®ç¥¨é—®é¢˜</center></h1><p>éœ€æ±‚ï¼šç«è½¦ç«™ä¹°ç¥¨ï¼Œä¸€å…±æœ‰ä¸”ä»…æœ‰ã€100ã€‘å¼ ç¥¨ï¼Œ4ä¸ªçª—å£åŒæ—¶è´©å–ä¸´ç•Œèµ„æºå°±æ˜¯è¿™ä¸ªç¥¨ï¼Œå¤šä¸ªçº¿ç¨‹è®¿é—®ä¿è¯ç¥¨æœ‰ä¸”ä»…æœ‰100å¼ ï¼Œå¼€4ä¸ªçº¿ç¨‹åŒæ—¶ä¹°100å¼ ç¥¨</p>
<p>&ensp;&ensp;&ensp;&ensp;å…¶å®è¿™ä¸ªå–ç¥¨æ¡ˆä¾‹å°±æ˜¯å¤šçº¿ç¨‹ä¸‹åŒæ—¶æ“ä½œä¸€ä¸ªèµ„æº(ä¸´ç•Œèµ„æº),å¦‚ä½•ä¿è¯çº¿ç¨‹æ“ä½œèµ„æºå®‰å…¨ä¸å‡ºç°ä»¥ä¸‹æƒ…å†µ</p>
<p>&ensp;&ensp;&ensp;&ensp;ä¹°ç¥¨ä¸ä¼šå‡ºç°é‡ç¥¨ â€“&gt; çº¿ç¨‹1 å–å‡ºç¬¬99å¼ ç¥¨ çº¿ç¨‹2 å–å‡º99å¼ ç¥¨</p>
<p>&ensp;&ensp;&ensp;&ensp;é”™è¯¯ç¥¨ â€”&gt; çº¿ç¨‹1 å–å‡ºç¬¬75å¼ ç¥¨. çº¿ç¨‹2 å–å‡º76å¼ ç¥¨ â€”&gt; è¿™ä¸ªæ˜¯å¯¹</p>
<p>&ensp;&ensp;&ensp;&ensp;ä½†æ˜¯ çº¿ç¨‹2 å–å‡º49å¼ ç¥¨</p>
<p>&ensp;&ensp;&ensp;&ensp;è´Ÿæ•°ç¥¨ â€”&gt; æŸä¸ªçº¿ç¨‹ä¹°å®Œæœ€åä¸€å¼ ç¥¨çš„æ—¶å€™ å‰©ä½™çº¿ç¨‹å°±ä¸èƒ½åœ¨å–ç¥¨0 -1 -2â€¦ç¥¨</p>
<p>&ensp;&ensp;&ensp;&ensp;1ç§’å–ä¸€å¼  â€”&gt; æœ‰ä¸”ä»…æœ‰100å¼  â€”&gt;ä¸è¦å–å‡º400å¼ ç¥¨æ•°</p>
<p><strong>é—®é¢˜1ï¼šå¦‚ä½•å°†ç¥¨å›ºå®šåœ¨100å¼ ï¼Œè€Œä¸æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½å–å‡º100å¼ ç¥¨</strong></p>
<p>&ensp;&ensp;&ensp;&ensp;å¦‚ä½•åšåˆ°æ‰€æœ‰çš„çº¿ç¨‹éƒ½å…±äº«è¿™ä¸€ä¸ªèµ„æºï¼Ÿ</p>
<ol>
<li>å°†ç¥¨ä½œä¸ºæˆå‘˜å˜é‡ï¼Œä½œä¸ºæˆå‘˜å˜é‡ä¹‹åï¼Œéœ€è¦ä¿è¯è¿™ä¸ªæä¾›ç¥¨çš„ç±»åœ¨å¤–ç•Œåˆ›å»ºå¯¹è±¡å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœä¸å”¯ä¸€çš„ï¼Œå°±ä¼šå‡ºç°ä½ åˆ›å»ºç¥¨çš„å¯¹è±¡æ¯ä¸ªå¯¹è±¡éƒ½ä¼šå”¯ä¸€ï¼Œä¸€ä¸ªæˆå‘˜å˜é‡ï¼Œ4ä¸ªå¯¹è±¡å°±æ˜¯4ä¸ªæˆå‘˜å˜é‡ï¼Œæ­¤æ—¶ç›¸å½“äº400å¼ ç¥¨ã€å•ä¾‹è®¾è®¡æ¨¡å¼ã€‘</li>
</ol>
<p>PSï¼šå•ä¾‹è®¾è®¡æ¨¡å¼çš„åŸåˆ™ï¼šä¿è¯å¤–ç•Œæ— è®ºå¦‚ä½•è·å–å¯¹è±¡éƒ½æ˜¯å”¯ä¸€çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//v1åŸºç¡€ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">package</span> com.qfedu.Thread.SellTicket1;</span><br><span class="line"><span class="comment">//v1ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¸è¦è®©ç±»ç»§æ‰¿ä¸Threadï¼Œç»§æ‰¿Threadå¿…ç„¶è¦æä¾›å››ä¸ªçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">    è¿™æ ·å°±ä¼šå‡ºç°æ— æ³•æ§åˆ¶ç¥¨100å¼ </span></span><br><span class="line"><span class="comment">    å»ºè®®å®ç°Runnableï¼Œä»¥Runnableå®ç°ç±»æ–¹å¼åˆ›å»ºçº¿ç¨‹å¤„ç†</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket1</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æä¾›æˆæˆå‘˜å˜é‡å­˜å‚¨ç¥¨çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œä¹°ç¥¨æ“ä½œ</span></span><br><span class="line">        <span class="comment">//æä¾›ä¸€ä¸ªforå¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯æ‰§è¡Œ100æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æä¾›ä¹°ç¥¨çš„é€»è¾‘</span></span><br><span class="line">            <span class="keyword">if</span>(tickets &gt; <span class="number">0</span>)    <span class="comment">//è¯æ˜è¿˜ç¥¨å¯ä»¥å‡ºå”®</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//ä¼‘çœ 1ç§’åœ¨ä¹°ç¥¨</span></span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">                &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="comment">//ä¹°ç¥¨</span></span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰å”®ç¥¨å‘˜[&quot;</span>+Thread.currentThread().getName()+<span class="string">&quot;]ç¬¬&quot;</span>+<span class="string">&quot;[&quot;</span>+(tickets--)+<span class="string">&quot;]ç¥¨&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœæä¾›çš„æ˜¯æˆå‘˜å˜é‡ã€ä¿è¯å­˜å‚¨æˆå‘˜å˜é‡çš„è¿™ä¸ªç±»æ‰€å¾—åˆ°å¯¹è±¡æ˜¯å¿…é¡»å”¯ä¸€ã€‘</span></span><br><span class="line">        <span class="comment">//å‡ºç°400å¼ ç¥¨é—®é¢˜[åœ¨æ„å»ºçº¿ç¨‹å¯¹è±¡æ—¶ï¼Œæä¾›å››ä¸ªRunnableæ¥å£å®ç°ç±»å¯¹è±¡åˆ›å»º]</span></span><br><span class="line">        <span class="comment">/* </span></span><br><span class="line"><span class="comment">            Thread thread1 = new Thread(new SellTicket1(),&quot;åˆ˜å¾·å&quot;);</span></span><br><span class="line"><span class="comment">            Thread thread2 = new Thread(new SellTicket1(),&quot;å¼ å­¦å‹&quot;);</span></span><br><span class="line"><span class="comment">            Thread thread3 = new Thread(new SellTicket1(),&quot;éƒ­å¯ŒåŸ&quot;);</span></span><br><span class="line"><span class="comment">            Thread thread4 = new Thread(new SellTicket1(),&quot;å´å¥‡éš†&quot;);</span></span><br><span class="line"><span class="comment">            thread1.start();</span></span><br><span class="line"><span class="comment">            thread2.start();</span></span><br><span class="line"><span class="comment">            thread3.start();</span></span><br><span class="line"><span class="comment">            thread4.start();</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">//åœ¨å¤–ç•Œåªåˆ›å»ºä¸€ä¸ªRunnableæ¥å£å®ç°ç±»å¯¹è±¡ï¼Œä¿è¯å¯¹è±¡æ˜¯å”¯ä¸€çš„</span></span><br><span class="line">        <span class="type">SellTicket1</span> <span class="variable">sellTicket1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket1</span>(); <span class="comment">//åªä¼šç»´æŠ¤ä¸€ä»½çš„ç¥¨å¯¹è±¡ã€100ã€‘å¼ </span></span><br><span class="line">        <span class="comment">//åˆ©ç”¨è¿™ä¸ªå¯¹è±¡åˆå§‹åŒ–åˆ›å»º4ä¸ªçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket1,<span class="string">&quot;åˆ˜å¾·å&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket1,<span class="string">&quot;å¼ å­¦å‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket1,<span class="string">&quot;éƒ­å¯ŒåŸ&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket1,<span class="string">&quot;å´å¥‡éš†&quot;</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">        thread4.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="GetInstance"><a href="#GetInstance" class="headerlink" title="GetInstance"></a><center>GetInstance</center></h2><p>åœ¨ä¸»å‡½æ•°å¼€å§‹æ—¶è°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ï¼Œæ­¤å¯¹è±¡æ˜¯staticçš„ï¼Œåœ¨å†…å­˜ä¸­ä¿ç•™ç€å®ƒçš„å¼•ç”¨ï¼Œå³å†…å­˜ä¸­æœ‰ä¸€å—åŒºåŸŸä¸“é—¨ç”¨æ¥å­˜æ”¾é™æ€æ–¹æ³•å’Œå˜é‡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè°ƒç”¨å¤šæ¬¡è¿”å›åŒä¸€ä¸ªå¯¹è±¡</p>
<p>GetInstanceä¸newåŒºåˆ«</p>
<p>&ensp;&ensp;&ensp;&ensp;å¦‚Object object &#x3D; new Object()ï¼Œè¿™æ—¶å€™ï¼Œå°±å¿…é¡»è¦çŸ¥é“æœ‰ç¬¬äºŒä¸ªObjectçš„å­˜åœ¨ï¼Œè€Œç¬¬äºŒä¸ªObjectä¹Ÿå¸¸å¸¸æ˜¯åœ¨å½“å‰çš„åº”ç”¨ç¨‹åºåŸŸä¸­çš„ï¼Œå¯ä»¥è¢«ç›´æ¥è°ƒç”¨çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.Demo03.test;</span><br><span class="line"><span class="comment">//æä¾›äº†æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SellTicket2</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æä¾›æˆå‘˜å˜é‡ï¼Œå˜é‡æ˜¯å­˜å‚¨ç¥¨ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    å•è®¾è®¡æ¨¡å¼çš„åŸåˆ™--ã€‹ä¿è¯åœ¨å¤–ç•Œè·å–å¯¹è±¡æ—¶éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€åœ°å€ä¹Ÿæ˜¯ç›¸åŒçš„ã€‘</span></span><br><span class="line"><span class="comment">    1.ç§æœ‰åŒ–æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="comment">    2.æä¾›ä¸€ä¸ªç§æœ‰åŒ–é™æ€å˜é‡å¹¶å¯¹é™æ€å˜é‡è¿›è¡Œèµ‹å€¼ã€ç±»å‹æ˜¯æœ¬ç±»ç±»å‹æä¾›å¯¹è±¡åˆ›å»ºã€‘</span></span><br><span class="line"><span class="comment">    3.æä¾›ä¸€ä¸ªé™æ€å…±æœ‰æ–¹æ³•å¯ä»¥è·å–æœ¬ç±»å¯¹è±¡çš„å”¯ä¸€é€”å¾„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SellTicket2</span><span class="params">()</span></span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨æœ¬ç±»ç±»å‹åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SellTicket2</span> <span class="variable">sellTicket2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket2</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SellTicket2 <span class="title function_">getInstance</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> sellTicket2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œä¹°ç¥¨æ“ä½œ</span></span><br><span class="line">        <span class="comment">//æä¾›ä¸€ä¸ªforå¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯æ‰§è¡Œ100æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æä¾›ä¹°ç¥¨çš„é€»è¾‘</span></span><br><span class="line">            <span class="keyword">if</span>(tickets &gt; <span class="number">0</span>)    <span class="comment">//è¯æ˜è¿˜ç¥¨å¯ä»¥å‡ºå”®</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//ä¼‘çœ 1ç§’åœ¨ä¹°ç¥¨</span></span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">                &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ä¹°ç¥¨</span></span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰å”®ç¥¨å‘˜[&quot;</span>+Thread.currentThread().getName()+<span class="string">&quot;]ç¬¬&quot;</span>+<span class="string">&quot;[&quot;</span>+(tickets--)+<span class="string">&quot;]ç¥¨&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æä¾›äº†é™æ€å˜é‡ï¼Œè¿™ä¸ªç±»çš„åˆ›å»ºå¯¹è±¡æ–¹å¼å°±æ— æ‰€è°“</span></span><br><span class="line">        <span class="type">SellTicket2</span> <span class="variable">sellTicket2</span> <span class="operator">=</span> SellTicket2.getInstance();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;åˆ˜å¾·å&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;å¼ å­¦å‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;éƒ­å¯ŒåŸ&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;å´å¥‡éš†&quot;</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">        thread4.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å®šä¹‰ä¸€ä¸ªå˜é‡ä¿è¯æ‰€æœ‰å¯¹è±¡å…±äº«ï¼Œæ— è®ºå¤–ç•Œå¦‚ä½•åˆ›å»ºçº¿ç¨‹å¯¹è±¡ã€å®ç°Runnableè¿˜æ˜¯ç»§æ‰¿Threadç±»ã€‘ï¼Œè¿™é‡Œéƒ½å¯ä»¥ä¿è¯æ‰€æœ‰å…‘ç°å…±äº«è¿™ä¸ªå˜é‡ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªstaticä¿®é¥°å˜é‡å³é™æ€å˜é‡</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.Thread.SellTicket1;</span><br><span class="line"><span class="comment">//v1.1ç‰ˆæœ¬ ---&gt; æä¾›äº†é™æ€å˜é‡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket2</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æä¾›é™æ€æˆå‘˜å˜é‡å­˜å‚¨ç¥¨çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œä¹°ç¥¨æ“ä½œ</span></span><br><span class="line">        <span class="comment">//æä¾›ä¸€ä¸ªforå¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯æ‰§è¡Œ100æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æä¾›ä¹°ç¥¨çš„é€»è¾‘</span></span><br><span class="line">            <span class="keyword">if</span>(tickets &gt; <span class="number">0</span>)    <span class="comment">//è¯æ˜è¿˜ç¥¨å¯ä»¥å‡ºå”®</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//ä¼‘çœ 1ç§’åœ¨ä¹°ç¥¨</span></span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">                &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="comment">//ä¹°ç¥¨</span></span><br><span class="line">                System.out.println(<span class="string">&quot;å½“å‰å”®ç¥¨å‘˜[&quot;</span>+Thread.currentThread().getName()+<span class="string">&quot;]ç¬¬&quot;</span>+<span class="string">&quot;[&quot;</span>+(tickets--)+<span class="string">&quot;]ç¥¨&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æä¾›äº†é™æ€å˜é‡ï¼Œè¿™ä¸ªç±»çš„åˆ›å»ºå¯¹è±¡æ–¹å¼å°±æ— æ‰€è°“</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">SellTicket2</span>(),<span class="string">&quot;åˆ˜å¾·å&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">SellTicket2</span>(),<span class="string">&quot;å¼ å­¦å‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">SellTicket2</span>(),<span class="string">&quot;éƒ­å¯ŒåŸ&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">SellTicket2</span>(),<span class="string">&quot;å´å¥‡éš†&quot;</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">        thread4.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜2ï¼šåœ¨ä¹°ç¥¨çš„æ—¶å€™ä¼šå‡ºç°ã€é‡ç¥¨ã€é”™ç¥¨ã€æ’åºé¡ºåºçš„æ··ä¹±çš„é—®é¢˜</p>
<p>&ensp;&ensp;&ensp;&ensp;è¿™ä¸ªé—®é¢˜äº§ç”Ÿå°±æ˜¯å¤šçº¿ç¨‹å¹¶å‘äº‰æŠ¢â€ä¸´ç•Œèµ„æºâ€å‡ºç°é‡Œä¸´ç•Œèµ„æºä¸å®‰å…¨é—®é¢˜</p>
<h2 id="1ã€å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¸´ç•Œèµ„æºï¼Œä¿è¯èµ„æºå®‰å…¨é—®é¢˜"><a href="#1ã€å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¸´ç•Œèµ„æºï¼Œä¿è¯èµ„æºå®‰å…¨é—®é¢˜" class="headerlink" title="1ã€å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¸´ç•Œèµ„æºï¼Œä¿è¯èµ„æºå®‰å…¨é—®é¢˜"></a><center>1ã€å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¸´ç•Œèµ„æºï¼Œä¿è¯èµ„æºå®‰å…¨é—®é¢˜</center></h2><p>æ­¤æ—¶Javaä¸ºäº†ä¿è¯å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¸´ç•Œèµ„æºçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæä¾›äº†ä¸€ä¸ªå¤„ç†æœºåˆ¶ï¼Œå¯ä»¥åœ¨å¤„ç†ä¸´ç•Œèµ„æºä»£ç ä¸­æ·»åŠ ï¼ˆåŒæ­¥é”&#x2F;å¯¹è±¡é”&#x2F;åŒæ­¥ä»£ç å—&#x2F;åŒæ­¥ç›‘å¬å™¨ï¼‰ï¼Œè¿™é‡Œå››ä¸ªåç§°éƒ½æ˜¯æŒ‡çš„æ˜¯åŒä¸€ä¸ªæ“ä½œï¼Œå¯ä»¥æ·»åŠ â€œé”æœºåˆ¶â€ï¼Œä¿è¯åœ¨åŒä¸€ä¸ªæ—¶åˆ»çš„åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ“ä½œä¸´ç•Œèµ„æºï¼Œä¿è¯ä¸´ç•Œèµ„æºå®‰å…¨</p>
<h2 id="2ã€synchronizedå…³é”®å­—"><a href="#2ã€synchronizedå…³é”®å­—" class="headerlink" title="2ã€synchronizedå…³é”®å­—"></a><center>2ã€synchronizedå…³é”®å­—</center></h2><p>synchronizedç¿»è¯‘æ„æ€ï¼šåŒæ­¥</p>
<p>ä½¿ç”¨synchronizedå…³é”®å­—è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä½¿ç”¨synchronizedç»„æˆåŒæ­¥æ“ä½œå«åšã€åŒæ­¥é”&#x2F;å¯¹è±¡é”&#x2F;åŒæ­¥ä»£ç å—ã€‘</p>
<p>è¯­æ³• ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(èµ„æºé”å¯¹è±¡)</span><br><span class="line">&#123;</span><br><span class="line">    æä¾›æ“ä½œä¸´ç•Œèµ„æºçš„ä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡ŒåŸç†ï¼š åˆ©ç”¨äº†åŒä¸€æ—¶é—´å†…ã€åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡æŒæœ‰å½“å‰èµ„æºé”å¯¹è±¡ã€‘ï¼Œåªè¦çº¿ç¨‹ä¸é‡Šæ”¾è¿™ä¸ªæ‰€èµ„æºå¯¹è±¡ï¼Œå¤–ç•Œçº¿ç¨‹æ˜¯æ— æ³•æ‰§è¡Œçº¿ç¨‹é€»è¾‘èµ„æºä»£ç ï¼Œåœ¨åŒæ­¥ä»£ç å—ä¸­æ‰§è¡Œçº¿ç¨‹è¿›è¡Œä¼‘çœ æ˜¯ä¸ä¼šé‡Šæ”¾CPUæ—¶é—´ç‰‡åˆ°å¤–ç•Œç»™å…¶ä»–çº¿ç¨‹ï¼Œå› ä¸ºsleepæ–¹æ³•æ˜¯ä¸ä¼šé‡Šæ”¾é”èµ„æº</p>
<p>éœ€è¦æ³¨æ„è¿˜éœ€è¦ä¿è¯ã€<strong>èµ„æºé”å¯¹è±¡å¿…é¡»æ˜¯å”¯ä¸€çš„</strong>ã€‘ï¼Œä¸å”¯ä¸€é”å¯¹è±¡æ•°æ— æ³•è¿›è¡ŒåŒæ­¥æ“ä½œ</p>
<p>å¦‚æœä¿è¯èµ„æºé”å¯¹è±¡æ˜¯å”¯ä¸€çš„ï¼Ÿ</p>
<p>ä¸ªäººå»ºè®®ï¼šååˆ†ä¸æ¨èä½¿ç”¨ this ä½œä¸ºé”èµ„æºå¯¹è±¡ï¼Œthiså¯èƒ½é”ä¸äº†ï¼Œthisä»£è¡¨çš„æ˜¯å½“å‰å¯¹è±¡ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€è¿™ä¸ªæä¾›ä¸´ç•Œæ”¯æ´ç±»å¿…é¡»æ˜¯åˆ›å»ºå”¯ä¸€çš„å¯¹è±¡æ‰å¯ä»¥ï¼Œè¿™æ ·æ‰å¯ä»¥ä¿è¯thisæ˜¯å”¯ä¸€çš„</p>
<p>æ›¿ä»£æ–¹æ¡ˆä¸€ï¼š</p>
<p>&ensp;&ensp;&ensp;&ensp;åœ¨é™æ€èµ„æºå¤„ç†çº¿ç¨‹ç±»ä¸­æä¾›ä¸€ä¸ªå…¨å±€é™æ€å¸¸é‡â€œé”èµ„æºâ€</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"><span class="keyword">synchronized</span>(obj)</span><br><span class="line">&#123;</span><br><span class="line">    æä¾›æ“ä½œä¸´ç•Œèµ„æºçš„ä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ›¿ä»£æ–¹æ¡ˆäºŒã€æ¨èã€‘</p>
<p>&ensp;&ensp;&ensp;&ensp;å¤©ç”Ÿå¯¹è±¡å°±æ˜¯å”¯ä¸€çš„ï¼ŒJavaä¸­è¿™ä¸ªå¯¹è±¡æ— è®ºä½ å¦‚ä½•æ“ä½œï¼Œå°±å¯ä»¥ä¿è¯ä»–æ˜¯å”¯ä¸€çš„åœ°å€éƒ½æ˜¯åŒä¸€ä¸ªï¼ŒStringå­—ç¬¦ä¸²ç±»ï¼Œç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²å¯¹è±¡å³å¯â€”-&gt;ã€ä½¿ç”¨ â€œâ€ (åŒå¼•å·)åˆ›å»ºã€‘</p>
<p>æä¾›å­—ç¬¦ä¸²ç©ºä¸²å¤„ç† â€”&gt; å³ æä¾›å­—ç¬¦ä¸²ç©ºä¸²å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">    æä¾›æ“ä½œä¸´ç•Œèµ„æºçš„ä»£ç </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨åŒæ­¥ä»£ç å—ä¿®æ”¹ä¹°ç¥¨çš„æ¡ˆä¾‹çš„</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.Thread.SynchronizedSellTicket1;</span><br><span class="line"><span class="comment">//v2ç‰ˆæœ¬ ---&gt; æä¾›äº†é™æ€å˜é‡ å’Œ åŒæ­¥ä»£ç å—æ‰§è¡Œä¹°ç¥¨æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æä¾›é™æ€æˆå‘˜å˜é‡å­˜å‚¨ç¥¨çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œä¹°ç¥¨æ“ä½œ</span></span><br><span class="line">        <span class="comment">//æä¾›ä¸€ä¸ªforå¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯æ‰§è¡Œ100æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æä¾›ä¹°ç¥¨çš„é€»è¾‘</span></span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) <span class="comment">//åŒæ­¥ä»£ç å—</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) <span class="comment">//è¯æ˜è¿˜ç¥¨å¯ä»¥å‡ºå”®</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">try</span> </span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">//ä¼‘çœ 1ç§’åœ¨ä¹°ç¥¨</span></span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">                    &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="comment">//ä¹°ç¥¨</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;å½“å‰å”®ç¥¨å‘˜[&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;]ç¬¬&quot;</span></span><br><span class="line">                                                    + <span class="string">&quot;[&quot;</span> + (tickets--) + <span class="string">&quot;]ç¥¨&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æä¾›äº†é™æ€å˜é‡ï¼Œè¿™ä¸ªç±»çš„åˆ›å»ºå¯¹è±¡æ–¹å¼å°±æ— æ‰€è°“</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">SellTicket</span>(),<span class="string">&quot;åˆ˜å¾·å&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">SellTicket</span>(),<span class="string">&quot;å¼ å­¦å‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">SellTicket</span>(),<span class="string">&quot;éƒ­å¯ŒåŸ&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">SellTicket</span>(),<span class="string">&quot;å´å¥‡éš†&quot;</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">        thread4.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3ã€åŒæ­¥æ–¹æ³•-å¯¹è±¡åŒæ­¥æ–¹æ³•-æˆå‘˜åŒæ­¥æ–¹æ³•"><a href="#3ã€åŒæ­¥æ–¹æ³•-å¯¹è±¡åŒæ­¥æ–¹æ³•-æˆå‘˜åŒæ­¥æ–¹æ³•" class="headerlink" title="3ã€åŒæ­¥æ–¹æ³•&#x2F;å¯¹è±¡åŒæ­¥æ–¹æ³•&#x2F;æˆå‘˜åŒæ­¥æ–¹æ³•"></a><center>3ã€åŒæ­¥æ–¹æ³•&#x2F;å¯¹è±¡åŒæ­¥æ–¹æ³•&#x2F;æˆå‘˜åŒæ­¥æ–¹æ³•</center></h2><p>ä½¿ç”¨synchronizedå…³é”®å­—è¿›è¡Œæˆå‘˜æ–¹æ³•çš„ä¿®é¥°ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šæˆä¸º<strong>åŒæ­¥æ–¹æ³•</strong>å°†æ“ä½œèµ„æºä»£ç å†™å…¥åˆ°è¿™ä¸ªæ–¹æ³•ä¸­å°±å¯ä»¥è¿›è¡ŒåŒæ­¥æ“ä½œäº†</p>
<p>è¯­æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è®¿é—®æƒé™ä¿®é¥°ç¬¦ <span class="keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)</span><br><span class="line">&#123;</span><br><span class="line">    æ–¹æ³•ä½“ï¼›</span><br><span class="line">    <span class="keyword">return</span>ï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç‰¹åˆ«æ³¨æ„ï¼šä½¿ç”¨æ˜¯åŒæ­¥æ–¹æ³•ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä½¿ç”¨é”èµ„æºå¯¹è±¡æ˜¯ã€thisã€‘ï¼Œæä¾›åŒæ­¥æ–¹æ³•çš„è¿™ä¸ªç±»æ‰€åˆ›å»ºå¯¹è±¡å¿…é¡»æ˜¯å”¯ä¸€çš„æ‰å¯ä»¥é”ä½èµ„æº</strong></p>
<p>PSï¼šåˆ°ç›®å‰ä½ç½® æ–¹æ³•å®šä¹‰ä¸­å…¶ä»–ä¿®é¥°ç¬¦å°±å·²ç»å…¨éƒ¨ä»‹ç»å®Œæ¯•</p>
<p>&ensp;&ensp;&ensp;&ensp;ç±»ä¸­æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼šã€staticã€finalã€abstractã€synchronizedã€‘</p>
<p>&ensp;&ensp;&ensp;&ensp;æ¥å£ä¸­æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼šã€abstractã€staticã€defaultã€‘</p>
<p><strong>ä¿®é¥°åŒæ­¥æ–¹æ³•æ˜¯è¯¥ä¹°ç¥¨æ¡ˆä¾‹</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.Thread.SynchronizedSellTicket1;</span><br><span class="line"><span class="comment">//v2.1ç‰ˆæœ¬ ---&gt; æä¾›äº†é™æ€å˜é‡ å’Œ åŒæ­¥æ–¹æ³•è¿›è¡Œä¹°ç¥¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket2</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æä¾›é™æ€æˆå‘˜å˜é‡å­˜å‚¨ç¥¨çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œä¹°ç¥¨æ“ä½œ</span></span><br><span class="line">        <span class="comment">//æä¾›ä¸€ä¸ªforå¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯æ‰§è¡Œ100æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æä¾›ä¹°ç¥¨çš„é€»è¾‘ ---ã€‹è°ƒç”¨åŒæ­¥æ–¹æ³•å³å¯</span></span><br><span class="line">            seller();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åŒæ­¥æ–¹æ³• --&gt; è¿™ä¸ªé”èµ„æºå¯¹è±¡æ˜¯this</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">seller</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æä¾›å°±æ˜¯çº¿ç¨‹å¤„ç†ä¸´ç•Œèµ„æºæ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) <span class="comment">//è¯æ˜è¿˜ç¥¨å¯ä»¥å‡ºå”®</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//ä¼‘çœ 1ç§’åœ¨ä¹°ç¥¨</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="comment">//ä¹°ç¥¨</span></span><br><span class="line">            System.out.println(<span class="string">&quot;å½“å‰å”®ç¥¨å‘˜[&quot;</span> +</span><br><span class="line">            Thread.currentThread().getName() + <span class="string">&quot;]ç¬¬&quot;</span></span><br><span class="line">            + <span class="string">&quot;[&quot;</span> + (tickets--) + <span class="string">&quot;]ç¥¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æä¾›äº†é™æ€å˜é‡ï¼Œè¿™ä¸ªç±»çš„åˆ›å»ºå¯¹è±¡æ–¹å¼å°±æ— æ‰€è°“</span></span><br><span class="line">        <span class="comment">//åŒæ­¥æ–¹æ³•æä¾›ç±»å¦‚æœæ˜¯çº¿ç¨‹ç±»ï¼Œéœ€è¦ä¿è¯çº¿ç¨‹ç±»å¯¹è±¡æ˜¯å”¯ä¸€çš„</span></span><br><span class="line">        <span class="type">SellTicket2</span> <span class="variable">sellTicket2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket2</span>();   <span class="comment">//è¿™æ˜¯ä¿è¯çº¿ç¨‹ç±»å¯¹è±¡å”¯ä¸€</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;åˆ˜å¾·å&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;å¼ å­¦å‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;éƒ­å¯ŒåŸ&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;å´å¥‡éš†&quot;</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">        thread4.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4ã€ç±»é”-ç±»åŒæ­¥ä»£ç å—-ç±»åŒæ­¥æ–¹æ³•-é™æ€åŒæ­¥æ–¹æ³•"><a href="#4ã€ç±»é”-ç±»åŒæ­¥ä»£ç å—-ç±»åŒæ­¥æ–¹æ³•-é™æ€åŒæ­¥æ–¹æ³•" class="headerlink" title="4ã€ç±»é”&#x2F;ç±»åŒæ­¥ä»£ç å—&#x2F;ç±»åŒæ­¥æ–¹æ³•&#x2F;é™æ€åŒæ­¥æ–¹æ³•"></a><center>4ã€ç±»é”&#x2F;ç±»åŒæ­¥ä»£ç å—&#x2F;ç±»åŒæ­¥æ–¹æ³•&#x2F;é™æ€åŒæ­¥æ–¹æ³•</center></h2><p>å¦‚æœä½¿ç”¨æ˜¯åŒæ­¥ä»£ç å—çš„è¯­æ³•ï¼Œå°±æ˜¯å°†èµ„æºé”å¯¹è±¡ï¼Œä»å½“å‰å¯¹è±¡æ›¿æ¢æˆç±»å¯¹è±¡ï¼Œé€šè¿‡ç±»çš„æ–¹å¼è·å–å¯¹è±¡ã€é€šåå°„è·å–ã€‘ï¼Œé™æ€åŒæ­¥æ–¹æ³•å°±æ˜¯ä½¿ç”¨staticå’ŒsynchronizedåŒæ—¶ä¿®é¥°æ–¹æ³•</p>
<p><strong>ç±»é”&#x2F;ç±»åŒæ­¥ä»£ç å—</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(ç±»å.class)    <span class="comment">// ç±»é”å¯¹è±¡</span></span><br><span class="line">&#123;</span><br><span class="line">    æ“ä½œä¸´ç•Œèµ„æºä»£ç å³å¯</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç±»åŒæ­¥æ–¹æ³•&#x2F;é™æ€åŒæ­¥æ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è®¿é—®æƒé™ä¿®é¥°ç¬¦ <span class="keyword">static</span> <span class="keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)</span><br><span class="line">&#123;</span><br><span class="line">    æ–¹æ³•ä»£ç </span><br><span class="line">    <span class="keyword">return</span>ï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//v2.2ç‰ˆæœ¬ ---&gt; æä¾›äº†é™æ€å˜é‡ å’Œ é™æ€åŒæ­¥æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket3</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æä¾›é™æ€æˆå‘˜å˜é‡å­˜å‚¨ç¥¨çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œä¹°ç¥¨æ“ä½œ</span></span><br><span class="line">        <span class="comment">//æä¾›ä¸€ä¸ªforå¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯æ‰§è¡Œ100æ¬¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt;<span class="number">100</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æä¾›ä¹°ç¥¨çš„é€»è¾‘ ---ã€‹è°ƒç”¨åŒæ­¥æ–¹æ³•å³å¯</span></span><br><span class="line">            <span class="comment">//seller();</span></span><br><span class="line">            <span class="keyword">synchronized</span> (String.class)    <span class="comment">// ç±»é”</span></span><br><span class="line">            &#123; </span><br><span class="line">                <span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) <span class="comment">//è¯æ˜è¿˜ç¥¨å¯ä»¥å‡ºå”®</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">try</span> </span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">//ä¼‘çœ 1ç§’åœ¨ä¹°ç¥¨</span></span><br><span class="line">                        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">                    &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="comment">//ä¹°ç¥¨</span></span><br><span class="line">                    System.out.println(<span class="string">&quot;å½“å‰å”®ç¥¨å‘˜[&quot;</span> +</span><br><span class="line">                    Thread.currentThread().getName() + <span class="string">&quot;]ç¬¬&quot;</span></span><br><span class="line">                    + <span class="string">&quot;[&quot;</span> + (tickets--) + <span class="string">&quot;]ç¥¨&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é™æ€åŒæ­¥æ–¹æ³• --&gt; è¿™ä¸ªé”èµ„æºå°±æ˜¯å½“å‰ç±»çš„å¯¹è±¡ã€æ˜¯å”¯ä¸€çš„ã€‘ï¼Œé€šè¿‡ç±»è·å–å³ ç±».class</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">seller</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æä¾›å°±æ˜¯çº¿ç¨‹å¤„ç†ä¸´ç•Œèµ„æºæ“æ“ä½œ</span></span><br><span class="line">        <span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) <span class="comment">//è¯æ˜è¿˜ç¥¨å¯ä»¥å‡ºå”®</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//ä¼‘çœ 1ç§’å†ä¹°ç¥¨</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="comment">//å–ç¥¨</span></span><br><span class="line">            System.out.println(<span class="string">&quot;å½“å‰å”®ç¥¨å‘˜[&quot;</span> +Thread.currentThread().getName() + <span class="string">&quot;]ç¬¬&quot;</span> </span><br><span class="line">                                                        + <span class="string">&quot;[&quot;</span> + (tickets--) + <span class="string">&quot;]ç¥¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// æä¾›äº†é™æ€å˜é‡ï¼Œè¿™ä¸ªç±»çš„åˆ›å»ºå¯¹è±¡æ–¹å¼å°±æ— æ‰€è°“</span></span><br><span class="line">        <span class="comment">//åŒæ­¥æ–¹æ³•æä¾›ç±»å¦‚æœæ˜¯çº¿ç¨‹ç±»ï¼Œéœ€è¦ä¿è¯çº¿ç¨‹ç±»å¯¹è±¡æ˜¯å”¯ä¸€çš„</span></span><br><span class="line">        <span class="type">SellTicket3</span> <span class="variable">sellTicket2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket3</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;åˆ˜å¾·å&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;å¼ å­¦å‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;éƒ­å¯ŒåŸ&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(sellTicket2,<span class="string">&quot;å´å¥‡éš†&quot;</span>);</span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">        thread4.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>synchronizedæ€»ç»“ï¼š</p>
<ol>
<li>åœ¨å¼€å‘ä¸­å¸¸ç”¨è‚¯å®šæ˜¯å¯¹è±¡é”ã€åŒæ­¥ä»£ç å—ã€‘ä½†æ˜¯è¿™ä¸ªä»£ç å—çš„èŒƒå›´ä¸è¦å¤ªå¤§ï¼Œä¸ç„¶çš„è¯ä¼šå½±å“æ‰§è¡Œæ•ˆç‡</li>
</ol>
<p>&ensp;&ensp;&ensp;&ensp;PS: åœ¨ä»€ä¹ˆä½ç½®å¯¹èµ„æºæ“ä½œå°±åœ¨ä»€ä¹ˆä½ç½®æ·»åŠ  åŒæ­¥ä»£ç å—</p>
<ol start="2">
<li>ä½¿ç”¨synchronizedå…³é”®å­—ä¹‹åçº¿ç¨‹å°±ä¼šå˜æˆå®‰å…¨ï¼Œé—´æ¥å°±å°†å¹¶è¡Œçº¿ç¨‹ä¿®æ”¹ä¸ºä¸²è¡Œçº¿ç¨‹ï¼Œä½¿ç”¨é”æœºåˆ¶å°†çº¿ç¨‹å˜	æˆ ã€ä¸€ä¸ªä¸€ä¸ªç«™æ’æ‰§è¡Œæ•ˆæœã€‘</li>
</ol>
<h1 id="çŸ¥è¯†ç‚¹ä¸ƒï¼šçº¿ç¨‹é€šä¿¡"><a href="#çŸ¥è¯†ç‚¹ä¸ƒï¼šçº¿ç¨‹é€šä¿¡" class="headerlink" title="çŸ¥è¯†ç‚¹ä¸ƒï¼šçº¿ç¨‹é€šä¿¡"></a><center>çŸ¥è¯†ç‚¹ä¸ƒï¼šçº¿ç¨‹é€šä¿¡</center></h1><p>åˆ°ç°ç›®å‰ä½ç½®çº¿ç¨‹ä¸çº¿ç¨‹ä¹‹é—´ä¾æ—§æ˜¯å½¼æ­¤ç‹¬ç«‹ï¼Œå°±ç®—ä½¿ç”¨åŒæ­¥ä»£ç å—ï¼Œä¹Ÿæ˜¯è®©çº¿ç¨‹æ‰§è¡Œæœ‰ä¸€å®šé¡ºåºï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰è¿›è¡Œé€šä¿¡æ“ä½œï¼Œå¦‚æœéœ€è¦é‡åˆ°æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åéœ€è¦é€šçŸ¥å¦å¤–ä¸€ä¸ªçº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨åˆ°çº¿ç¨‹é€šä¿¡ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¼€å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥è¿›è¡Œé€šä¿¡æ“ä½œï¼Œä»è€Œåè°ƒæ€§çš„å®ŒæˆæŸä¸ªè¿›ç¨‹ä¸­éœ€è¦æ‰§è¡Œé€»è¾‘</p>
<p><strong>çº¿ç¨‹é€šä¿¡æœ‰ä¸€ä¸ªæ ‡å‡†çš„é€šä¿¡æ¨¡å‹ã€ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å¼ã€‘</strong></p>
<img src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202403012227153.png" alt="çº¿ç¨‹é€šä¿¡" style="zoom:50%;">

<h2 id="1ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v1ç‰ˆæœ¬"><a href="#1ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v1ç‰ˆæœ¬" class="headerlink" title="1ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v1ç‰ˆæœ¬"></a><center>1ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v1ç‰ˆæœ¬</center></h2><p>Bank(é“¶è¡Œç±») â€”ã€‹ æä¾›æ•°æ®ç»´æŠ¤ä¸ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŸºç¡€çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ ---ã€‹ æä¾›ä¸´ç•Œèµ„æºå¹¶æä¾›æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bank</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸´ç•Œèµ„æºä¸€å…±æœ‰ä¸¤ç§æä¾›æ–¹å¼ã€æä¾›æˆå‘˜å˜é‡å’Œæä¾›é™æ€å˜é‡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;    <span class="comment">//å­˜å‚¨å‰çš„ä¸´ç•Œå˜é‡</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤–ç•Œæ— è®ºå¦‚ä½•åˆ›å»ºBankç±»å¯¹è±¡ï¼Œéƒ½éœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œä¸ç„¶çš„è¯æˆå‘˜å˜é‡ä¼šè·Ÿç€å¯¹è±¡å¤šå°‘è€Œè¿›è¡Œåˆ›å»º</span></span><br><span class="line"><span class="comment">        æä¾›å¯¹è±¡å”¯ä¸€åˆ›å»ºæ–¹å¼ã€å•ä¾‹è®¾è®¡æ¨¡å¼ã€‘</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼å¯ä»¥ä¿è¯å¤–ç•Œæ— è®ºå¦‚ä½•æ“ä½œå¾—åˆ°å¯¹è±¡éƒ½æ˜¯å”¯ä¸€å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®ç°ï¼š</span></span><br><span class="line"><span class="comment">        1. ä¸€å®šè¦ç§æœ‰åŒ–æ„é€ æ–¹æ³• --&gt; é˜²æ­¢å¤–ç•Œè°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        2. æä¾›ä¸€ä¸ªç§æœ‰é™æ€å¸¸é‡å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å•ä¾‹ç±»å”¯ä¸€åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        3. æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè·å–è¿™ä¸ªåˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œå¾—åˆ°å®ä¾‹ã€å¤–ç•Œåªèƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–å¯¹è±¡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Bank</span><span class="params">()</span></span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Bank</span> <span class="variable">bank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bank</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title function_">getInstance</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> bank;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *ç”Ÿäº§è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€ç”Ÿäº§ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m å­˜å‚¨é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        money = m+money;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å­˜äº†&quot;</span>+m+<span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *æ¶ˆè´¹è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€æ¶ˆè´¹ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m æ¶ˆè´¹é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">popMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        money = money-m;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;å–äº†&quot;</span>+m+<span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span>+money);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”Ÿäº§è€…ã€æ˜¯ä¸€ä¸ªçº¿ç¨‹æä¾›æ•°æ®å­˜å‚¨æ“ä½œã€‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”Ÿäº§è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Producer</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æä¾›é“¶è¡Œå±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> Bank bank;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Producer</span><span class="params">(Bank bank)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.bank = bank;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æä¾›çº¿ç¨‹å­˜å‚¨é’±çš„æ“ä½œ å­˜å‚¨åæ¬¡ æ¯æ¬¡1000å…ƒ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            bank.pushMoney(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¶ˆè´¹è€…ã€æ˜¯ä¸€ä¸ªçº¿ç¨‹æä¾›æ•°æ®è·å–æ“ä½œã€‘</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//æä¾›é“¶è¡Œå±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> Bank bank;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Consumer</span><span class="params">(Bank bank)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.bank = bank;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æä¾›çº¿ç¨‹å­˜è·å–çš„æ“ä½œ è·å–åæ¬¡ æ¯æ¬¡1000å…ƒ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            bank.popMoney(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æä¾›ä¸€ä¸ªæµ‹è¯•ç±»Testè¿›è¡Œæµ‹è¯•æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.Thread.waitAndnotfiny;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡å•ä¾‹è·å–é“¶è¡Œå¯¹è±¡</span></span><br><span class="line">        <span class="type">Bank</span> <span class="variable">bank1</span> <span class="operator">=</span> Bank.getInstance();</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶å¯åŠ¨æ“ä½œ</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Producer</span>(bank1),<span class="string">&quot;èŠ±èŠ±&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Consumer</span>(bank1),<span class="string">&quot;è²è²&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜1ï¼šç°åœ¨æ‰§è¡Œé€Ÿåº¦å¤ªå¿«äº†ï¼Œçœ‹ä¸åˆ°äº¤æ›¿æ‰§è¡Œæ•ˆæœï¼Œè®©çº¿ç¨‹ä¼‘çœ 1ç§’æ“ä½œ</p>
<p>é—®é¢˜2ï¼šè™½ç„¶è®©çº¿ç¨‹ä¼‘çœ ä¹‹åï¼Œå‡ºç°äº†ä¸€ä¸ªæ‰§è¡Œé”™ä¹±çš„é—®é¢˜ï¼Œå› ä¸ºå¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¸´ç•Œèµ„æºmoneyï¼Œå‡ºç°çº¿ç¨‹æŒ£æŠ¢çš„é—®é¢˜ï¼Œæ‰€ä»¥å‡ºç°ä¸´ç•Œèµ„æºéƒ¨ä¸å®‰å…¨é—®é¢˜ï¼Œæ·»åŠ åŒæ­¥ä»£ç å—</p>
<p>Banké“¶è¡Œç±»éœ€è¦ä¿®æ”¹ä¸º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.Thread.waitAndnotfiny;</span><br><span class="line"><span class="comment">//åŸºç¡€çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ ---ã€‹ æä¾›ä¸´ç•Œèµ„æºå¹¶æä¾›æ“ä½œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bank</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸´ç•Œèµ„æºä¸€å…±æœ‰ä¸¤ç§æä¾›æ–¹å¼ã€æä¾›æˆå‘˜å˜é‡å’Œæä¾›é™æ€å˜é‡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;<span class="comment">//å­˜å‚¨å‰çš„ä¸´ç•Œå˜é‡</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤–ç•Œæ— è®ºå¦‚ä½•åˆ›å»ºBankç±»å¯¹è±¡ï¼Œéƒ½éœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œä¸ç„¶çš„è¯æˆå‘˜å˜é‡ä¼šè·Ÿç€å¯¹è±¡å¤šå°‘è€Œè¿›è¡Œåˆ›å»º</span></span><br><span class="line"><span class="comment">        æä¾›å¯¹è±¡å”¯ä¸€åˆ›å»ºæ–¹å¼ã€å•ä¾‹è®¾è®¡æ¨¡å¼ã€‘</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼å¯ä»¥ä¿è¯å¤–ç•Œæ— è®ºå¦‚ä½•æ“ä½œå¾—åˆ°å¯¹è±¡éƒ½æ˜¯å”¯ä¸€</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®ç°ï¼š</span></span><br><span class="line"><span class="comment">        1. ä¸€å®šè¦ç§æœ‰åŒ–æ„é€ æ–¹æ³• --&gt; é˜²æ­¢å¤–ç•Œè°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        2. æä¾›ä¸€ä¸ªç§æœ‰é™æ€å¸¸é‡å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å•ä¾‹ç±»å”¯ä¸€åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        3. æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè·å–è¿™ä¸ªåˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œå¾—åˆ°å®ä¾‹ã€å¤–ç•Œåªèƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–å¯¹è±¡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Bank</span><span class="params">()</span></span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Bank</span> <span class="variable">bank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bank</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title function_">getInstance</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> bank;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *ç”Ÿäº§è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€ç”Ÿäº§ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m å­˜å‚¨é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = m + money;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å­˜äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *æ¶ˆè´¹è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€æ¶ˆè´¹ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m æ¶ˆè´¹é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">popMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = money - m;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å–äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v2ç‰ˆæœ¬"><a href="#2ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v2ç‰ˆæœ¬" class="headerlink" title="2ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v2ç‰ˆæœ¬"></a><center>2ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v2ç‰ˆæœ¬</center></h2><p>ä½¿ç”¨äº†åŒæ­¥ä»£ç å—+sleepæ–¹æ³•ï¼Œè™½ç„¶è®©ç¨‹åºæ‰§è¡Œæœ‰åºäº†ä¹Ÿä¿è¯çº¿ç¨‹ä¸­æ“ä½œä¸´ç•Œèµ„æºè¿‡ç¨‹ä¹Ÿå®‰å…¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æ— æ³•ä¿è¯çº¿ç¨‹å¯ä»¥åšåˆ°äº¤æ›¿æ‰§è¡Œçš„æ•ˆæœã€<strong>å³ç”Ÿäº§è€…ç”Ÿäº§å®Œæ•°æ®ä¹‹åé€šçŸ¥æ¶ˆè´¹è€…å¯ä»¥è¿›è¡Œæ¶ˆè´¹ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹å®Œæ•°æ®ä¹‹åé€šçŸ¥ç”Ÿäº§è€…å¯ä»¥ç”Ÿäº§</strong>ã€‘ï¼Œæ‰€ä»¥å¦‚ä½•å®Œæˆè¿™ä¸ªé€šä¿¡æ“ä½œå‘¢ï¼Ÿ</p>
<p>æ­¤æ—¶å°±éœ€è¦ä½¿ç”¨Javaä¸­Objectç±»ä¸­æä¾›ä¸‰ä¸ªæ–¹æ³•äº†</p>
<table>
<thead>
<tr>
<th align="center">çº¿ç¨‹é€šä¿¡æ–¹æ³•</th>
<th align="center">æ–¹æ³•è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">wait()</td>
<td align="center">æ‰§è¡Œè¯¥æ–¹æ³•çš„çº¿ç¨‹å¯¹è±¡ä¼šé‡Šæ”¾ã€åŒæ­¥é”èµ„æºã€‘ï¼ŒJVMä¼šæŠŠå½“å‰çº¿ç¨‹æ”¾åˆ°ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å”¤é†’æ“ä½œ</td>
</tr>
<tr>
<td align="center">notify()</td>
<td align="center">æ‰§è¡Œè¯¥æ–¹æ³•çš„çº¿ç¨‹å¯¹è±¡ä¼šåœ¨ç­‰å¾…æ± ã€éšæœºå”¤é†’ã€‘ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼ŒæŠŠçº¿ç¨‹è½¬ç§»åˆ°é”æ± ä¸­ç­‰å¾…ï¼Œå†æ¬¡è·å–èµ„æº</td>
</tr>
<tr>
<td align="center">notifyAll()</td>
<td align="center">æ‰§è¡Œè¯¥æ–¹æ³•çš„çº¿ç¨‹å¯¹è±¡ä¼šåœ¨ç­‰åœ°æ± ä¸­ã€å”¤é†’æ‰€æœ‰çš„çº¿ç¨‹ã€‘ï¼ŒæŠŠçº¿ç¨‹è½¬ç§»åˆ°é”æ± ä¸­ç­‰å¾…ï¼Œå†æ¬¡è·å–èµ„æº</td>
</tr>
</tbody></table>
<p>&ensp;&ensp;&ensp;&ensp;å°±å¯ä»¥åˆ©ç”¨è¿™ä¸‰ä¸ªæ–¹æ³•è¿›è¡Œçº¿ç¨‹é€šä¿¡æ“ä½œäº†ï¼Œ<strong>ç‰¹åˆ«æ³¨æ„è°ƒç”¨é€šä¿¡æ–¹æ³•å¿…é¡»æ˜¯é”èµ„æºå¯¹è±¡ï¼Œå¦åˆ™ä¼šå‡ºç°å¼‚å¸¸æç¤ºä¿¡æ¯ã€åœ¨å“ªé‡Œè°ƒç”¨ç­‰å¾…æ–¹æ³•å°±åœ¨ä½ç½®è¢«å”¤é†’ã€‘</strong></p>
<p>çº¿ç¨‹é€šä¿¡æ‰§è¡Œæµç¨‹ï¼š</p>
<p>&ensp;&ensp;&ensp;&ensp;å‡è®¾<strong>Açº¿ç¨‹</strong>å’Œ<strong>Bçº¿ç¨‹</strong>å…±åŒæ“ä½œä¸€ä¸ª<strong>Xé”å¯¹è±¡</strong>ï¼ŒAã€Bçº¿ç¨‹å¯ä»¥é€šè¿‡Xé”å¯¹è±¡è°ƒç”¨waitå’Œnotifyæ–¹æ³•è¿›è¡Œå¦‚ä¸‹çº¿ç¨‹é€šä¿¡æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å½“Açº¿ç¨‹æ‰§è¡Œåˆ°Xé”å¯¹è±¡æ—¶ï¼ŒAçº¿ç¨‹æŒæœ‰Xé”å¯¹è±¡ï¼ŒBçº¿ç¨‹æ˜¯æ²¡æœ‰æ‰§è¡Œæœºä¼šçš„ï¼ŒBçº¿ç¨‹åœ¨Xå¯¹è±¡çš„ç­‰å¾…é”æ± ä¸­</span><br><span class="line">Açº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ç§æ‰§è¡Œåˆ°X.waitæ–¹æ³•æ—¶ï¼ŒAçº¿ç¨‹ä¼šé‡Šæ”¾Xå¯¹è±¡æ‰€èµ„æºï¼ŒAçº¿ç¨‹ä¼šè¿›å…¥åˆ°Xå¯¹è±¡çš„ç­‰å¾…é”æ± ä¸­</span><br><span class="line">Bçº¿ç¨‹å°±ä¼šåœ¨ç­‰å¾…é”æ± ä¸­å¾—åˆ°Açº¿ç¨‹é‡Šæ”¾çš„Xèµ„æºé”å¯¹è±¡ï¼ŒBçº¿ç¨‹å°±å¼€å§‹æ‰§è¡Œæ“ä½œ</span><br><span class="line">Bçº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ä¸­æ‰§è¡Œåˆ°X.notifyæ–¹æ³•æ—¶ï¼ŒJVMæŠŠAçº¿ç¨‹ä»Xå¯¹è±¡ç­‰å¾…æ± ä¸­ï¼Œç§»åŠ¨åˆ°ç­‰å¾…Xå¯¹è±¡é”èµ„æºä¸­å¾—åˆ°é”èµ„æº</span><br><span class="line">Bçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åé‡Šæ”¾é”èµ„æºï¼ŒAçº¿ç¨‹å°±æœ‰æœºä¼šè·å–åˆ°é”ï¼Œç»§ç»­æ‰§è¡ŒåŒæ­¥æ–¹æ³•</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹Bankç±»æä¾›çº¿ç¨‹é€šä¿¡æ“ä½œè€…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.Thread.waitAndnotfiny.V2;</span><br><span class="line"><span class="comment">//é€šä¿¡çš„ç‰ˆæœ¬ ---ã€‹ æä¾›ä¸´ç•Œèµ„æºå¹¶æä¾›æ“ä½œ[æ·»åŠ çº¿ç¨‹é€šä¿¡å’ŒåŒæ­¥ä»£ç å—+sleepæ–¹æ³•]</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bank</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸´ç•Œèµ„æºä¸€å…±æœ‰ä¸¤ç§æä¾›æ–¹å¼ã€æä¾›æˆå‘˜å˜é‡å’Œæä¾›é™æ€å˜é‡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;    <span class="comment">//å­˜å‚¨å‰çš„ä¸´ç•Œå˜é‡</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤–ç•Œæ— è®ºå¦‚ä½•åˆ›å»ºBankç±»å¯¹è±¡ï¼Œéƒ½éœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œä¸ç„¶çš„è¯æˆå‘˜å˜é‡ä¼šè·Ÿç€å¯¹è±¡å¤šå°‘è€Œè¿›è¡Œåˆ›å»º</span></span><br><span class="line"><span class="comment">        æä¾›å¯¹è±¡å”¯ä¸€åˆ›å»ºæ–¹å¼ã€å•ä¾‹è®¾è®¡æ¨¡å¼ã€‘</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼å¯ä»¥ä¿è¯å¤–ç•Œæ— è®ºå¦‚ä½•æ“ä½œå¾—åˆ°å¯¹è±¡éƒ½æ˜¯å”¯ä¸€</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®ç°ï¼š</span></span><br><span class="line"><span class="comment">            1. ä¸€å®šè¦ç§æœ‰åŒ–æ„é€ æ–¹æ³• --&gt; é˜²æ­¢å¤–ç•Œè°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">            2. æä¾›ä¸€ä¸ªç§æœ‰é™æ€å¸¸é‡å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å•ä¾‹ç±»å”¯ä¸€åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">            3. æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè·å–è¿™ä¸ªåˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œå¾—åˆ°å®ä¾‹ã€å¤–ç•Œåªèƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–å¯¹è±¡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Bank</span><span class="params">()</span></span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Bank</span> <span class="variable">bank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bank</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title function_">getInstance</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> bank;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åœ¨å¤–ç•Œåˆ›å»ºç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡ä¸­éƒ½æ˜¯å¯ä»¥è·å–åˆ°CPUèµ„æº</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯é—®é¢˜åœ¨äºï¼Œå¦‚æœæ¶ˆè´¹è€…å…ˆè·å–åˆ°èµ„æºï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ä¸èƒ½æ¶ˆè´¹</span></span><br><span class="line"><span class="comment">        æ‰€ä»¥å°±æä¾›ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨çŠ¶æ€çš„ï¼Œé€šè¿‡å¯¹è¿™ä¸ªçŠ¶æ€çš„åˆ¤æ–­å†³å®šæ‰§è¡Œå“ªä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">isEmpty</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *ç”Ÿäº§è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€ç”Ÿäº§ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m å­˜å‚¨é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//æ·»åŠ çº¿ç¨‹é€šä¿¡æ“ä½œ</span></span><br><span class="line">                <span class="keyword">if</span>(isEmpty)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//å¦‚æœæ¡ä»¶ä¸ºtrueå€¼ï¼Œå°±è¯æ˜ç°åœ¨æœ‰æ•°æ®ï¼Œæ— éœ€ç”Ÿäº§</span></span><br><span class="line">                    <span class="comment">//ç”Ÿäº§è¿™ä¸ªå°±è¿›å…¥åˆ°ç­‰å¾…çŠ¶æ€</span></span><br><span class="line">                    <span class="string">&quot;&quot;</span>.wait();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="comment">//å› ä¸ºifæ²¡æœ‰æ‰§è¡Œå°±è¯æ˜ï¼Œæ²¡æœ‰æ•°æ®å¯ä»¥ç”Ÿäº§</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = m + money;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å­˜äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">                <span class="comment">//ç”Ÿäº§æ•°æ®å®Œæ¯•ä¹‹åéœ€è¦ä¿®æ”¹çŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">                isEmpty = <span class="literal">true</span>;</span><br><span class="line">                <span class="comment">//æ‰§è¡Œå”¤é†’æ“ä½œ</span></span><br><span class="line">                <span class="string">&quot;&quot;</span>.notify();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *æ¶ˆè´¹è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€æ¶ˆè´¹ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m æ¶ˆè´¹é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">popMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å¢åŠ çº¿ç¨‹é€šä¿¡æ“ä½œ</span></span><br><span class="line">                <span class="comment">//isEmptyçŠ¶æ€å€¼ falseä»£è¡¨æ²¡æœ‰æ•°æ® trueä»£è¡¨æœ‰å±æ€§</span></span><br><span class="line">                <span class="keyword">if</span>(!isEmpty)    <span class="comment">//æ²¡æœ‰æ•°æ®çš„æ—¶å€™ä¸èƒ½æ‰§è¡Œæ¶ˆè´¹ï¼Œç­‰å¾…ç”Ÿäº§</span></span><br><span class="line">                &#123; </span><br><span class="line">                    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                        æ²¡æœ‰æ•°æ®isEmptyå€¼æ˜¯falseï¼Œå–éæ“ä½œ !false --ã€‹ true ifå°±æ‰§è¡Œç­‰å¾…</span></span><br><span class="line"><span class="comment">                        æœ‰æ•°æ®isEmptyå€¼æ˜¯true ï¼Œå–éæ“ä½œ !true --ã€‹false ifå°±ä¸æ‰§è¡Œç­‰å¾…ï¼Œè¿›è¡Œæ¶ˆè´¹</span></span><br><span class="line"><span class="comment">                    */</span></span><br><span class="line">                    <span class="string">&quot;&quot;</span>.wait();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="comment">//ifåˆ†æ”¯è¯­å¥ä¸æ‰§è¡Œå°±è¯æ˜æœ‰æ•°æ®ï¼Œè¿›è¡Œæ¶ˆè´¹æ“ä½œ</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = money - m;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å–äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">                <span class="comment">//ä¿®æ”¹çŠ¶æ€æ•°æ®</span></span><br><span class="line">                isEmpty = <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">//è¿›è¡Œå”¤é†’æ“ä½œ</span></span><br><span class="line">                <span class="string">&quot;&quot;</span>.notify();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3ã€åˆ†ææ‰§è¡Œæµç¨‹"><a href="#3ã€åˆ†ææ‰§è¡Œæµç¨‹" class="headerlink" title="3ã€åˆ†ææ‰§è¡Œæµç¨‹"></a><center>3ã€åˆ†ææ‰§è¡Œæµç¨‹</center></h2><ol>
<li>ç°æœ‰çš„ä¸¤ä¸ªçº¿ç¨‹ç”Ÿäº§è€…ã€èŠ±èŠ±ã€‘å’Œæ¶ˆè´¹è€…ã€è²è²ã€‘é»˜è®¤åˆå§‹isEmptyçŠ¶æ€éƒ½æ˜¯false</li>
<li>æ¶ˆè´¹è€…ã€è²è²ã€‘å…ˆè·å–åˆ°CPUæ—¶é—´ç‰‡ï¼ŒæŒæœ‰æ‰€èµ„æºï¼Œåˆ¤æ–­ifåˆ†æ”¯æ¡ä»¶ä¸º!false,æ¶ˆè´¹è€…ã€è²è²ã€‘å°±ä¼šé‡Šæ”¾é”èµ„æºå¹¶ä¸”è¿›å…¥åˆ°ç­‰å¾…æ± ä¸­</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…æ± </span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    ç”Ÿäº§è€…ã€èŠ±èŠ±ã€‘</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç­‰å¾…æ± ä¸­ç”Ÿäº§è€…ã€èŠ±èŠ±ã€‘å°±ä¼šæˆ–å¾—åˆ°æ‰§è¡ŒCPUæ—¶é—´ç‰‡ï¼Œå¹¶ä¸”è·å–åˆ°é”èµ„æºï¼Œåˆ¤æ–­ifåˆ†æ”¯æ¡ä»¶falseï¼Œè¯æ˜æ²¡æœ‰æ•°æ®ï¼Œç”Ÿäº§æ•°æ®å¹¶ä¸”å”¤é†’ç­‰å¾…æ± ä¸­ã€è²è²ã€‘ä¿®æ”¹isEmptyå€¼trueï¼Œç”Ÿäº§è€…çº¿ç¨‹å°±æ‰§è¡Œå®Œæ¯•äº†</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…æ± </span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ¶ˆè´¹è€…ã€è²è²ã€‘</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>æ­¤æ—¶ç”Ÿäº§è€…ã€èŠ±èŠ±ã€‘å’Œæ¶ˆè´¹è€…ã€è²è²ã€‘å°±ä¼šå†æ¬¡åŒæ—¶äº‰æŠ¢CPUæ—¶é—´ç‰‡å’Œé”èµ„æºå¯¹è±¡ï¼Œå‡å¦‚ç”Ÿäº§è€…ã€èŠ±èŠ±ã€‘å†æ¬¡è·å–å“¦åˆ°CPUæ—¶é—´ç‰‡å’Œé”èµ„æºå¯¹è±¡ï¼Œæ‰§è¡Œçº¿ç¨‹é€»è¾‘ï¼Œåˆ¤æ–­ifåˆ†æ”¯æ¡ä»¶ä¸ºtrueï¼Œæ­¤æ—¶èŠ±èŠ±å°±ä¼šé‡Šæ”¾èµ„æºè¿›å…¥åˆ°ç­‰å¾…æ± ä¸­</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…æ± </span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    ç”Ÿäº§è€…ã€èŠ±èŠ±ã€‘</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>æ¶ˆè´¹è€…ã€è²è²ã€‘å¿…ç„¶è·å–åˆ°CPUæ—¶é—´ç‰‡ï¼Œæ‰§è¡Œæ“ä½œé€»è¾‘åˆ¤æ–­æ¡ä»¶!true å¾—åˆ°æ˜¯falseï¼Œå°±æ‰§è¡Œæ¶ˆè´¹ï¼Œå¹¶ä¸”ä¿®æ”¹çŠ¶æ€ä¸ºfalseï¼Œå”¤é†’ç­‰å¾…æ± ä¸­ç”Ÿäº§è€…ï¼Œè¿™æ ·å°±å®Œæˆäº¤æ›¿æ‰§è¡Œæ•ˆæœ</li>
</ol>
<p><strong>PSï¼šä»¥ä¸Šè¿™äº›æ“ä½œå°±æ˜¯å…¸å‹çš„ä¸€å¯¹ä¸€ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å‹</strong></p>
<h1 id="çŸ¥è¯†ç‚¹å…«ï¼šå¤šå¯¹å¤šé€šä¿¡æ¨¡å‹"><a href="#çŸ¥è¯†ç‚¹å…«ï¼šå¤šå¯¹å¤šé€šä¿¡æ¨¡å‹" class="headerlink" title="çŸ¥è¯†ç‚¹å…«ï¼šå¤šå¯¹å¤šé€šä¿¡æ¨¡å‹"></a><center>çŸ¥è¯†ç‚¹å…«ï¼šå¤šå¯¹å¤šé€šä¿¡æ¨¡å‹</center></h1><p>æä¾›çº¿ç¨‹å¯¹è±¡åˆ›å»ºæ“ä½œï¼Œ è¿™é‡Œä»åŸæœ‰ä¸€å¯¹ä¸€çš„æ¨¡å¼ï¼Œå˜æˆå¤šå¯¹å¤šçš„æ¨¡å¼ï¼ŒåŸæ¥çš„ä¸€ä¸ªç”Ÿäº§è€…å¯¹åº”ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä¿®æ”¹ä¸ºäº†å¤šä¸ªç”Ÿäº§è€…å¯¹åº”å¤šä¸ªæ¶ˆè´¹è€…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡å•ä¾‹è·å–é“¶è¡Œå¯¹è±¡</span></span><br><span class="line">        <span class="type">Bank</span> <span class="variable">bank1</span> <span class="operator">=</span> Bank.getInstance();</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶å¯åŠ¨æ“ä½œ</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Producer</span>(bank1),<span class="string">&quot;èŠ±èŠ±1&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Consumer</span>(bank1),<span class="string">&quot;è²è²2&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Producer</span>(bank1),<span class="string">&quot;èŠ±èŠ±3&quot;</span>).start();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Consumer</span>(bank1),<span class="string">&quot;è²è²4&quot;</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“å°†çº¿ç¨‹å¯¹è±¡å¢å¤šä¹‹åï¼Œæ‰§è¡Œå¤šçº¿ç¨‹åŒæ—¶æ“ä½œå°±å‡ºç°ä¸¤ä¸ªé—®é¢˜â€œ<strong>è´Ÿæ•°é—®é¢˜å’Œæ­»ç­‰å¾…é—®é¢˜</strong>â€</p>
<h2 id="1ã€è´Ÿæ•°é—®é¢˜"><a href="#1ã€è´Ÿæ•°é—®é¢˜" class="headerlink" title="1ã€è´Ÿæ•°é—®é¢˜"></a><center>1ã€è´Ÿæ•°é—®é¢˜</center></h2><p>ç°æœ‰çº¿ç¨‹ã€èŠ±èŠ±1ï¼ˆå­˜)ã€è²è²2ï¼ˆå–ï¼‰ã€èŠ±èŠ±3ï¼ˆå­˜ï¼‰ã€è²è²4ï¼ˆå–ï¼‰ã€‘ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªæ‰§è¡Œæµç¨‹</p>
<ol>
<li>è²è²2å…ˆæŠ¢åˆ°çº¿ç¨‹ï¼Œä¸èƒ½å–ï¼Œæ‰€ä»¥è¿›å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œé‡Šæ”¾CPUæ—¶é—´ç‰‡å’Œé‡Šæ”¾é”èµ„æº</li>
<li>è²è²4æŠ¢åˆ°çº¿ç¨‹èµ„æºï¼Œä¸èƒ½å–ï¼Œæ‰€ä»¥è¿›å…¥åˆ°ç­‰å¾…åˆ—ä¸­ï¼Œé‡Šæ”¾CPUæ—¶é—´ç‰‡å’Œé‡Šæ”¾é”èµ„æº</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ— è²è²2ã€è²è²4</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>èŠ±èŠ±1æŠ¢åˆ°çº¿ç¨‹ï¼Œå­˜å‚¨äº†æ•°æ®ï¼Œä¿®æ”¹æ ‡è®°ä¸ºtrueå€¼ï¼Œå¹¶å”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹çš„çº¿ç¨‹å¯¹è±¡ï¼Œç°åœ¨ä½¿ç”¨å”¤é†’æœºåˆ¶notifyæ–¹æ³•ã€éšæœºå”¤é†’ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—æ±‡æ€»çº¿ç¨‹å¯¹è±¡ã€‘ï¼Œå‡è®¾å”¤é†’äº†è²è²4</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ—ä¸­ è²è²2</span></span><br><span class="line"><span class="comment">//å¤–éƒ¨äº‰æŠ¢CPUæ“ä½œçš„æ—¶é—´ç‰‡ èŠ±èŠ±1ã€èŠ±èŠ±3ã€è²è²4</span></span><br><span class="line"><span class="comment">//ä¸´ç•Œèµ„æºä¸­å­˜å‚¨æ•°æ®æ˜¯ ---ã€‹ 1000</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>è²è²4æŠ¢åˆ°äº†çº¿ç¨‹ï¼Œåœ¨å“ªé‡Œç­‰å¾…å°±åœ¨å“ªé‡Œè¢«å”¤é†’ï¼Œè€Œä¸”ifåˆ†æ”¯è¯­å¥ç‰¹ç‚¹ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡åˆ¤æ–­å³ifåˆ†æ”¯æ¡ä»¶åˆ¤æ–­å®Œæˆä¹‹åã€ä¸æ·»åŠ å¾ªç¯å‰æã€‘ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡åˆ¤æ–­ï¼Œè²è²4æ­£å¥½æ˜¯åœ¨ifåˆ†æ”¯è¯­å¥ä¸­è¿›è¡Œç­‰å¾…æ“ä½œï¼Œé†’æ¥ä¹‹åæœºä¼šç»§ç»­å‘åæ‰§è¡Œã€å®ƒæ˜¯ä¸ä¼šåœ¨åˆ¤æ–­ifåˆ†æ”¯è¯­å¥ã€‘ï¼Œè²è²4è¿›è¡Œæ­£å¸¸æ¶ˆè´¹ï¼Œä¿®æ”¹æ ‡è®°ä¸ºfalseï¼Œéœ€è¦æ‰§è¡Œnotifyï¼Œå”¤é†’ç­‰å¾…é˜Ÿåˆ—è²è²2ã€è²è²2è¿™ä¸ªçº¿ç¨‹æ˜¯é€šè¿‡waitè¿›å…¥åˆ°ç­‰å¾…çŠ¶æ€ï¼Œå®ƒå·²ç»æ‰§è¡Œäº†ifåˆ¤æ–­ã€‘</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ—ä¸­ ç©º</span></span><br><span class="line"><span class="comment">// å¤–éƒ¨å¢å¼ºCPUæ“ä½œè€…æ—¶é—´ç‰‡ èŠ±èŠ±1ã€è²è²2ã€ä»ç­‰å¾…çŠ¶æ€æ¢å¤è€Œæ¥ã€‘ã€èŠ±èŠ±3ã€è²è²4</span></span><br><span class="line"><span class="comment">// ä¸´ç•Œèµ„æºä¸­å­˜å‚¨çš„æ•°æ®æ˜¯ ----ã€‹ 0 ã€å› ä¸ºè²è²4æ¶ˆè´¹äº†ã€‘</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>è²è²2æŠ¢åˆ°äº†æ‰§è¡Œæƒï¼Œä¼šåœ¨ifåˆ†æ”¯è¯­å¥ç»§ç»­æ‰§è¡Œæ“ä½œï¼Œæ­¤æ—¶è™½ç„¶æ ‡è®°å·²ç»ä¿®æ”¹ä¸ºfalseï¼Œæ­£å¸¸è€Œè¨€ä¸åº”è¯¥æ¶ˆè´¹çš„ï¼Œä½†æ˜¯ifåˆ†æ”¯è¯­å¥å·²ç»è¢«æ‰§è¡Œè¿‡ï¼Œæ‰€ä»¥ä¸ä¼šè¿›è¡Œåˆ¤æ–­ç»§ç»­æ‰§è¡Œï¼Œè¿›è¡Œæ¶ˆè´¹ï¼Œä¿®æ”¹æ ‡è®°ï¼Œæ‰§è¡Œå”¤é†’</li>
</ol>
<p>ä½†æ˜¯ç°åœ¨çš„æ•°æ®æ˜¯ 0 åœ¨æ‰§è¡Œæ¶ˆè´¹å‡ºç°æ•°æ®å°±æ˜¯ -1000</p>
<p><strong>ä¸ºäº†ä¿è¯çº¿ç¨‹é€šä¿¡å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œå»ºè®®åœ¨å¼€å‘çš„æ—¶å€™ï¼Œä¸è¦ä¹¦å†™ifä½œä¸ºçŠ¶æ€åˆ¤æ–­æ“ä½œï¼Œå»ºè®®ä½¿ç”¨whileå¾ªç¯è¯­å¥æ›¿ä»£ifåˆ†æ”¯ï¼Œwhileå¾ªç¯è¯­å¥åªæœ‰æ¡ä»¶ä¸ºfalseï¼Œæ‰ä¸æ‰§è¡Œï¼Œå¦è€…å°±ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥è®©ç­‰å¾…ä½ç½®çº¿ç¨‹åœ¨æ¬¡è¢«å”¤é†’ä¹‹åå¯ä»¥å†æ¬¡åˆ¤æ–­çŠ¶æ€æ“ä½œï¼Œä»¥é˜²å‡ºç°é”™è¯¯æ•°æ®</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qfedu.Thread.waitAndnotfiny.V3;</span><br><span class="line"><span class="comment">//é€šä¿¡çš„ç‰ˆæœ¬ã€å¤šå¯¹å¤šã€‘ ---ã€‹ æä¾›ä¸´ç•Œèµ„æºå¹¶æä¾›æ“ä½œ[æ·»åŠ çº¿ç¨‹é€šä¿¡å’ŒåŒæ­¥ä»£ç å—+sleepæ–¹æ³•]</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bank</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    ä¸´ç•Œèµ„æºä¸€å…±æœ‰ä¸¤ç§æä¾›æ–¹å¼ã€æä¾›æˆå‘˜å˜é‡å’Œæä¾›é™æ€å˜é‡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;<span class="comment">//å­˜å‚¨å‰çš„ä¸´ç•Œå˜é‡</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤–ç•Œæ— è®ºå¦‚ä½•åˆ›å»ºBankç±»å¯¹è±¡ï¼Œéƒ½éœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œä¸ç„¶çš„è¯æˆå‘˜å˜é‡ä¼šè·Ÿç€å¯¹è±¡å¤šå°‘è€Œè¿›è¡Œåˆ›å»º</span></span><br><span class="line"><span class="comment">        æä¾›å¯¹è±¡å”¯ä¸€åˆ›å»ºæ–¹å¼ã€å•ä¾‹è®¾è®¡æ¨¡å¼ã€‘</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼å¯ä»¥ä¿è¯å¤–ç•Œæ— è®ºå¦‚ä½•æ“ä½œå¾—åˆ°å¯¹è±¡éƒ½æ˜¯å”¯ä¸€</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®ç°ï¼š</span></span><br><span class="line"><span class="comment">        1. ä¸€å®šè¦ç§æœ‰åŒ–æ„é€ æ–¹æ³• --&gt; é˜²æ­¢å¤–ç•Œè°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        2. æä¾›ä¸€ä¸ªç§æœ‰é™æ€å¸¸é‡å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å•ä¾‹ç±»å”¯ä¸€åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        3. æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè·å–è¿™ä¸ªåˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œå¾—åˆ°å®ä¾‹ã€å¤–ç•Œåªèƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–å¯¹è±¡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Bank</span><span class="params">()</span></span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Bank</span> <span class="variable">bank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bank</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title function_">getInstance</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> bank;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åœ¨å¤–ç•Œåˆ›å»ºç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡ä¸­éƒ½æ˜¯å¯ä»¥è·å–åˆ°CPUèµ„æº</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯é—®é¢˜åœ¨äºï¼Œå¦‚æœæ¶ˆè´¹è€…å…ˆè·å–åˆ°èµ„æºï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ä¸èƒ½æ¶ˆè´¹</span></span><br><span class="line"><span class="comment">        æ‰€ä»¥å°±æä¾›ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨çŠ¶æ€çš„ï¼Œé€šè¿‡å¯¹è¿™ä¸ªçŠ¶æ€çš„åˆ¤æ–­å†³å®šæ‰§è¡Œå“ªä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">isEmpty</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *ç”Ÿäº§è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€ç”Ÿäº§ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m å­˜å‚¨é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//æ·»åŠ çº¿ç¨‹é€šä¿¡æ“ä½œ</span></span><br><span class="line">                <span class="comment">//åªéœ€è¦å°†ifä¿®æ”¹ä¸ºwhileå³å¯</span></span><br><span class="line">                <span class="keyword">while</span>(isEmpty)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//å¦‚æœæ¡ä»¶ä¸ºtrueå€¼ï¼Œå°±è¯æ˜ç°åœ¨æœ‰æ•°æ®ï¼Œæ— éœ€ç”Ÿäº§</span></span><br><span class="line">                    <span class="comment">//ç”Ÿäº§è¿™ä¸ªå°±è¿›å…¥åˆ°ç­‰å¾…çŠ¶æ€</span></span><br><span class="line">                    <span class="string">&quot;&quot;</span>.wait();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="comment">//å› ä¸ºifæ²¡æœ‰æ‰§è¡Œå°±è¯æ˜ï¼Œæ²¡æœ‰æ•°æ®å¯ä»¥ç”Ÿäº§</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = m + money;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å­˜äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">                <span class="comment">//ç”Ÿäº§æ•°æ®å®Œæ¯•ä¹‹åéœ€è¦ä¿®æ”¹çŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">                isEmpty = <span class="literal">true</span>;</span><br><span class="line">                <span class="comment">//æ‰§è¡Œå”¤é†’æ“ä½œ</span></span><br><span class="line">                <span class="string">&quot;&quot;</span>.notify();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *æ¶ˆè´¹è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€æ¶ˆè´¹ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m æ¶ˆè´¹é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">popMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å¢åŠ çº¿ç¨‹é€šä¿¡æ“ä½œ</span></span><br><span class="line">                <span class="comment">//isEmptyçŠ¶æ€å€¼ falseä»£è¡¨æ²¡æœ‰æ•°æ® trueä»£è¡¨æœ‰å±æ€§</span></span><br><span class="line">                <span class="comment">//åªéœ€è¦å°†ifä¿®æ”¹ä¸ºwhileå³å¯</span></span><br><span class="line">                <span class="keyword">while</span>(!isEmpty)    <span class="comment">//æ²¡æœ‰æ•°æ®çš„æ—¶å€™ä¸èƒ½æ‰§è¡Œæ¶ˆè´¹ï¼Œç­‰å¾…ç”Ÿäº§</span></span><br><span class="line">                &#123; </span><br><span class="line"></span><br><span class="line">                    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                        æ²¡æœ‰æ•°æ®isEmptyå€¼æ˜¯falseï¼Œå–éæ“ä½œ !false --ã€‹ true ifå°±æ‰§è¡Œç­‰å¾…</span></span><br><span class="line"><span class="comment">                        æœ‰æ•°æ®isEmptyå€¼æ˜¯true ï¼Œå–éæ“ä½œ !true --ã€‹false ifå°±ä¸æ‰§è¡Œç­‰å¾…ï¼Œè¿›è¡Œæ¶ˆè´¹</span></span><br><span class="line"><span class="comment">                    */</span></span><br><span class="line">                    <span class="string">&quot;&quot;</span>.wait();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//ifåˆ†æ”¯è¯­å¥ä¸æ‰§è¡Œå°±è¯æ˜æœ‰æ•°æ®ï¼Œè¿›è¡Œæ¶ˆè´¹æ“ä½œ</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = money - m;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å–äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">                <span class="comment">//ä¿®æ”¹çŠ¶æ€æ•°æ®</span></span><br><span class="line">                isEmpty = <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">//è¿›è¡Œå”¤é†’æ“ä½œ</span></span><br><span class="line">                <span class="string">&quot;&quot;</span>.notify();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2ã€æ­»ç­‰å¾…é—®é¢˜"><a href="#2ã€æ­»ç­‰å¾…é—®é¢˜" class="headerlink" title="2ã€æ­»ç­‰å¾…é—®é¢˜"></a><center>2ã€æ­»ç­‰å¾…é—®é¢˜</center></h2><p>æ‰€æœ‰çº¿ç¨‹éƒ½è¿›å…¥åˆ°ç­‰å¾…æ± ä¸­æ— äººå”¤é†’</p>
<p><strong>PSï¼šè¿™ä¸ªæ•ˆæœæ˜¯éœ€è¦ç‰¹æ®Šæƒ…å†µä¸‹æ‰ä¼šå‡ºç°ã€å®ƒå±äºä¸€ä¸ªæç«¯æƒ…å†µã€‘</strong></p>
<p><strong>è¿™ä¸ªåŸå› çš„äº§ç”Ÿå°±æ˜¯ä½¿ç”¨notfiyéšæœºå”¤é†’æœºåˆ¶</strong></p>
<p>ç°æœ‰çº¿ç¨‹ã€èŠ±èŠ±1ï¼ˆå­˜)ã€è²è²2ï¼ˆå–ï¼‰ã€èŠ±èŠ±3ï¼ˆå­˜ï¼‰ã€è²è²4ï¼ˆå–ï¼‰ã€‘æ¨¡æ‹Ÿä¸€ä¸ªæ‰§è¡Œæµç¨‹</p>
<ol>
<li>è²è²2å…ˆæŠ¢åˆ°çº¿ç¨‹ï¼Œä¸èƒ½å–ï¼Œæ‰€ä»¥è¿›å…¥åˆ°ç­‰å¾…æ± ä¸­ï¼Œé‡Šæ”¾é”å’ŒCPUæ—¶é—´ç‰‡</li>
<li>è²è²4æŠ¢åˆ°çº¿ç¨‹ï¼Œä¸èƒ½å–ï¼Œæ‰€ä»¥è¿›å…¥åˆ°ç­‰å¾…æ± ä¸­ï¼Œé‡Šæ”¾é”å’ŒCPUæ—¶é—´ç‰‡</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ—ä¸­ è²è²2ã€è²è²4</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>èŠ±èŠ±1æŠ¢åˆ°çº¿ç¨‹ï¼Œå­˜å‚¨æ•°æ®ï¼Œä¿®æ”¹æ ‡è®°ä¸ºtrueå¹¶è¿›è¡Œå”¤é†’æ“ä½œã€éšæœºå”¤é†’ã€‘</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ—ä¸­ è²è²2</span></span><br><span class="line"><span class="comment">//äº‰æŠ¢CPUèµ„æº èŠ±èŠ±1ã€èŠ±èŠ±3ã€è²è²4</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>èŠ±èŠ±1åœ¨æ¬¡è·å–çº¿ç¨‹ï¼Œä¸èƒ½å­˜å‚¨ï¼Œæ‰€ä»¥è¦è¿›å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œé‡Šæ”¾é”å’ŒCPUæ—¶é—´ç‰‡</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ—ä¸­ è²è²2ã€èŠ±èŠ±1 //äº‰æŠ¢CPUèµ„æº èŠ±èŠ±3ã€è²è²4</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>èŠ±èŠ±3æŠ¢åˆ°çº¿ç¨‹ï¼Œä¸èƒ½å­˜å‚¨ï¼Œæ‰€ä»¥è¦è¿›å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œé‡Šæ”¾é”å’ŒCPUæ—¶é—´ç‰‡</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ—ä¸­ è²è²2ã€èŠ±èŠ±1ã€èŠ±èŠ±3 //äº‰æŠ¢CPUèµ„æº è²è²4</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>è²è²4æŠ¢åˆ°çº¿ç¨‹ï¼Œå–é’±æ¶ˆè´¹ï¼Œä¿®æ”¹æ ‡è®°ä¸ºfalseï¼Œå¹¶è¿›å…¥å”¤é†’æ“ä½œã€éšæœºå”¤é†’ã€‘ â€“ã€‹ è²è²2å”¤é†’</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ—æ±‡æ€» èŠ±èŠ±1ã€èŠ±èŠ±3 //äº‰æŠ¢CPUèµ„æº è²è²4ã€è²è²2 ï¼Œç°åœ¨çŠ¶æ€æ—¶false</span></span><br></pre></td></tr></table></figure>

<ol start="7">
<li>ç”Ÿäº§è€…éƒ½åœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¤–éƒ¨éƒ½æ˜¯æ¶ˆè´¹è¿™ä¸ªï¼Œç°åœ¨çŠ¶æ€æ—¶false</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç­‰å¾…é˜Ÿåˆ—ä¸­ èŠ±èŠ±1ã€èŠ±èŠ±3ã€è²è²4ã€è²è²2</span></span><br></pre></td></tr></table></figure>

<p>æ‰€æœ‰çº¿ç¨‹éƒ½è¿›å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œæ— äººå”¤é†’å°±å‡ºç°æ­»çš„ç­‰å¾…é—®é¢˜</p>
<p>&ensp;&ensp;&ensp;&ensp;ä¹‹æ‰€ä»¥ä¼šå‡ºç°æ­»ç­‰å¾…åŸå› å°±å› ä¸ºä½¿ç”¨äº†notifyçš„æ“ä½œï¼Œå®ƒæ˜¯éšæœºå”¤é†’ï¼Œç­‰å¾…æ± ä¸­ä¸¤ä¸ªæ¶ˆè´¹ï¼Œå¤–ç•Œä¸¤ä¸ªç”Ÿäº§ã€ç”Ÿäº§å®Œæ¯•ï¼ŒçŠ¶æ€ä¿®æ”¹ï¼Œæ— æ³•å”¤é†’ã€‘ï¼Œæˆ–ç­‰å¾…æ± ä¸­ä¸¤ä¸ªç”Ÿäº§ï¼Œå¤–ç•Œä¸¤ä¸ªæ¶ˆè´¹ã€æ¶ˆè´¹å®Œæ¯•ï¼ŒçŠ¶æ€ä¿®æ”¹ï¼Œæ— æ³•å”¤é†’ã€‘ï¼Œ<strong>å»ºè®®ä½¿ç”¨notifyAll æ›¿æ¢ notfiy</strong>ï¼Œè¿›è¡Œå…¨éƒ¨å”¤é†’ï¼Œç„¶åå†è¿›è¡Œæ¡ä»¶åˆ¤æ–­æ‰§è¡Œæ“ä½œï¼Œå†³å®šå¥½æ˜¯å¦å­˜å‚¨ä¸æ¶ˆè´¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šä¿¡çš„ç‰ˆæœ¬ ---ã€‹ æä¾›ä¸´ç•Œèµ„æºå¹¶æä¾›æ“ä½œ[æ·»åŠ çº¿ç¨‹é€šä¿¡å’ŒåŒæ­¥ä»£ç å—+sleepæ–¹æ³•]</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bank</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸´ç•Œèµ„æºä¸€å…±æœ‰ä¸¤ç§æä¾›æ–¹å¼ã€æä¾›æˆå‘˜å˜é‡å’Œæä¾›é™æ€å˜é‡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;<span class="comment">//å­˜å‚¨å‰çš„ä¸´ç•Œå˜é‡</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤–ç•Œæ— è®ºå¦‚ä½•åˆ›å»ºBankç±»å¯¹è±¡ï¼Œéƒ½éœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œä¸ç„¶çš„è¯æˆå‘˜å˜é‡ä¼šè·Ÿç€å¯¹è±¡å¤šå°‘è€Œè¿›è¡Œåˆ›å»º</span></span><br><span class="line"><span class="comment">        æä¾›å¯¹è±¡å”¯ä¸€åˆ›å»ºæ–¹å¼ã€å•ä¾‹è®¾è®¡æ¨¡å¼ã€‘</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼å¯ä»¥ä¿è¯å¤–ç•Œæ— è®ºå¦‚ä½•æ“ä½œå¾—åˆ°å¯¹è±¡éƒ½æ˜¯å”¯ä¸€</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®ç°ï¼š</span></span><br><span class="line"><span class="comment">        1. ä¸€å®šè¦ç§æœ‰åŒ–æ„é€ æ–¹æ³• --&gt; é˜²æ­¢å¤–ç•Œè°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        2. æä¾›ä¸€ä¸ªç§æœ‰é™æ€å¸¸é‡å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å•ä¾‹ç±»å”¯ä¸€åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        3. æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè·å–è¿™ä¸ªåˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œå¾—åˆ°å®ä¾‹ã€å¤–ç•Œåªèƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–å¯¹è±¡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Bank</span><span class="params">()</span></span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Bank</span> <span class="variable">bank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bank</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Bank <span class="title function_">getInstance</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> bank;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åœ¨å¤–ç•Œåˆ›å»ºç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡ä¸­éƒ½æ˜¯å¯ä»¥è·å–åˆ°CPUèµ„æº</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯é—®é¢˜åœ¨äºï¼Œå¦‚æœæ¶ˆè´¹è€…å…ˆè·å–åˆ°èµ„æºï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ä¸èƒ½æ¶ˆè´¹</span></span><br><span class="line"><span class="comment">        æ‰€ä»¥å°±æä¾›ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨çŠ¶æ€çš„ï¼Œé€šè¿‡å¯¹è¿™ä¸ªçŠ¶æ€çš„åˆ¤æ–­å†³å®šæ‰§è¡Œå“ªä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">isEmpty</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *ç”Ÿäº§è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€ç”Ÿäº§ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m å­˜å‚¨é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//æ·»åŠ çº¿ç¨‹é€šä¿¡æ“ä½œ</span></span><br><span class="line">                <span class="keyword">while</span>(isEmpty)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//å¦‚æœæ¡ä»¶ä¸ºtrueå€¼ï¼Œå°±è¯æ˜ç°åœ¨æœ‰æ•°æ®ï¼Œæ— éœ€ç”Ÿäº§</span></span><br><span class="line">                    <span class="comment">//ç”Ÿäº§è¿™ä¸ªå°±è¿›å…¥åˆ°ç­‰å¾…çŠ¶æ€</span></span><br><span class="line">                    <span class="string">&quot;&quot;</span>.wait();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="comment">//å› ä¸ºifæ²¡æœ‰æ‰§è¡Œå°±è¯æ˜ï¼Œæ²¡æœ‰æ•°æ®å¯ä»¥ç”Ÿäº§</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = m + money;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å­˜äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">                <span class="comment">//ç”Ÿäº§æ•°æ®å®Œæ¯•ä¹‹åéœ€è¦ä¿®æ”¹çŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">                isEmpty = <span class="literal">true</span>;</span><br><span class="line">                <span class="comment">//æ‰§è¡Œå”¤é†’æ“ä½œè¿›è¡Œå…¨éƒ¨å”¤é†’æ“ä½œ</span></span><br><span class="line">                <span class="string">&quot;&quot;</span>.notifyAll();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *æ¶ˆè´¹è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€æ¶ˆè´¹ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m æ¶ˆè´¹é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">popMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="string">&quot;&quot;</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å¢åŠ çº¿ç¨‹é€šä¿¡æ“ä½œ</span></span><br><span class="line">                <span class="comment">//isEmptyçŠ¶æ€å€¼ falseä»£è¡¨æ²¡æœ‰æ•°æ® trueä»£è¡¨æœ‰å±æ€§</span></span><br><span class="line">                <span class="keyword">while</span>(!isEmpty)    <span class="comment">//æ²¡æœ‰æ•°æ®çš„æ—¶å€™ä¸èƒ½æ‰§è¡Œæ¶ˆè´¹ï¼Œç­‰å¾…ç”Ÿäº§</span></span><br><span class="line">                &#123; </span><br><span class="line">                    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                    æ²¡æœ‰æ•°æ®isEmptyå€¼æ˜¯falseï¼Œå–éæ“ä½œ !false --ã€‹ true ifå°±æ‰§è¡Œç­‰å¾…</span></span><br><span class="line"><span class="comment">                    æœ‰æ•°æ®isEmptyå€¼æ˜¯true ï¼Œå–éæ“ä½œ !true --ã€‹false ifå°±ä¸æ‰§è¡Œç­‰å¾…ï¼Œè¿›è¡Œæ¶ˆè´¹</span></span><br><span class="line"><span class="comment">                    */</span></span><br><span class="line">                    <span class="string">&quot;&quot;</span>.wait();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="comment">//ifåˆ†æ”¯è¯­å¥ä¸æ‰§è¡Œå°±è¯æ˜æœ‰æ•°æ®ï¼Œè¿›è¡Œæ¶ˆè´¹æ“ä½œ</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = money - m;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å–äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">                <span class="comment">//ä¿®æ”¹çŠ¶æ€æ•°æ®</span></span><br><span class="line">                isEmpty = <span class="literal">false</span>;</span><br><span class="line">                <span class="comment">//è¿›è¡Œå”¤é†’æ“ä½œä¿®æ”¹ä¸ºå…¨éƒ¨å”¤é†’</span></span><br><span class="line">                <span class="string">&quot;&quot;</span>.notifyAll();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ€»ç»“ï¼šå¦‚æœåœ¨æ—¥åçš„å¼€å‘ä¸­å‡ºç°çº¿ç¨‹é€šä¿¡æ“ä½œï¼Œå»ºè®®åˆ¤æ–­çŠ¶æ€æ ‡ç­¾çš„ä½ç½®ä½¿ç”¨whileå…³é”®å­—è€Œä¸æ˜¯ifï¼Œè¿›è¡Œå”¤é†’æ“ä½œå»ºè®®ä½¿ç”¨notfiyAllè€Œä¸æ˜¯notify</strong></p>
<h2 id="3ã€æ‰©å±•ï¼šLockæ¥å£ã€æ˜¾ç¤ºé”ã€‘"><a href="#3ã€æ‰©å±•ï¼šLockæ¥å£ã€æ˜¾ç¤ºé”ã€‘" class="headerlink" title="3ã€æ‰©å±•ï¼šLockæ¥å£ã€æ˜¾ç¤ºé”ã€‘"></a><center>3ã€æ‰©å±•ï¼šLockæ¥å£ã€æ˜¾ç¤ºé”ã€‘</center></h2><p>Lockæ¥å£æ˜¯Java5ä¸­æ–°åŠ å…¥ä¸Synchronizedæ¯”è¾ƒæ“ä½œï¼Œå®ƒå±äºæ˜¾ç¤ºå®šä¹‰ï¼Œç»“æ„æ›´åŠ çµæ´»ï¼Œæä¾›äº†ä¸€ä¸ªæ›´åŠ ä¾¿æ·çš„æ“ä½œï¼Œç›¸å¯¹æ¯”synchronizedæ›´åŠ ç®€æ´æ˜“ç”¨</p>
<p>PSï¼šè¿™ä¸ªé”èµ„æºLockè™½ç„¶è¯­æ³•æ›´åŠ ç®€æ´æ˜“ç”¨ï¼Œä½†æ˜¯å®ƒä¸èƒ½å®šä¹‰é”å¯¹è±¡ï¼ŒLockä½¿ç”¨é”å¯¹è±¡æ˜¯ã€thisã€‘ï¼Œ<strong>ä½¿ç”¨Lockæ—¶å°±éœ€è¦ä¿è¯thisçš„å”¯ä¸€æ€§äº†</strong></p>
<p><strong>Locké”å¦‚ä½•æ“ä½œï¼Ÿ</strong></p>
<p>&ensp;&ensp;&ensp;&ensp;Lockæ˜¯ä¸€ä¸ªæ¥å£æ‰€ä»¥éœ€è¦ä½¿ç”¨åˆ°ä»–å®ç°ç±»è¿›è¡Œé”çš„æ“ä½œ</p>
<p><strong>ReentrantLock</strong>æä¾›ä¸¤å¸¸ç”¨æ“ä½œ</p>
<table>
<thead>
<tr>
<th align="center">Locké”æ–¹æ³•</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">lock()</td>
<td align="center">æ·»åŠ é”(å¯¹è±¡ä¸Šé”)</td>
</tr>
<tr>
<td align="center">unlock()</td>
<td align="center">é‡Šæ”¾é”(å¯¹è±¡æ‰€é‡Šæ”¾)</td>
</tr>
</tbody></table>
<p>&ensp;&ensp;&ensp;&ensp;ä»¥ä¸ºLockæ˜¯ä¸€ä¸ªæ˜¾ç¤ºé”å¯¹è±¡ï¼Œæ‰€æœ‰ä¸èƒ½è°ƒç”¨Objectç±»ä¸­æä¾›waitã€notifyã€notifyAllæ–¹æ³•è¿›è¡Œçº¿ç¨‹é€šä¿¡ï¼Œæ‰€ä»¥ç³»ç»Ÿå°±æä¾›äº†<strong>ä¸€ä¸ªå’ŒLocké”ä¸€èµ·ä½¿ç”¨çº¿ç¨‹é€šä¿¡æ¥å£Condititon</strong></p>
<table>
<thead>
<tr>
<th align="center">é€šä¿¡æ–¹æ³•</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">await()</td>
<td align="center">çº¿ç¨‹ç­‰å¾…é‡Šæ”¾é”èµ„æºå’ŒCPUæ—¶é—´ç‰‡</td>
</tr>
<tr>
<td align="center">signal()</td>
<td align="center">å”¤é†’ç­‰å¾…æ± ä¸­æŸä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ã€éšæœºå”¤é†’ã€‘</td>
</tr>
<tr>
<td align="center">signalAll()</td>
<td align="center">å”¤é†’ç­‰å¾…æ± ä¸­æ‰€æœ‰çº¿ç¨‹å¯¹è±¡</td>
</tr>
</tbody></table>
<p>ä½¿ç”¨Locké”æ›¿ä»£SynchronizedåŒæ­¥ä»£ç å—è¿›è¡Œæ•°æ®æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Condition;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"><span class="comment">//é€šä¿¡çš„ç‰ˆæœ¬ã€å¤šå¯¹å¤šã€‘ ---ã€‹ æä¾›ä¸´ç•Œèµ„æºå¹¶æä¾›æ“ä½œ[æ·»åŠ çº¿ç¨‹Locké”+sleepæ–¹æ³•+çº¿ç¨‹é€šä¿¡]</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BankLock</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸´ç•Œèµ„æºä¸€å…±æœ‰ä¸¤ç§æä¾›æ–¹å¼ã€æä¾›æˆå‘˜å˜é‡å’Œæä¾›é™æ€å˜é‡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> money;<span class="comment">//å­˜å‚¨å‰çš„ä¸´ç•Œå˜é‡</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤–ç•Œæ— è®ºå¦‚ä½•åˆ›å»ºBankç±»å¯¹è±¡ï¼Œéƒ½éœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œä¸ç„¶çš„è¯æˆå‘˜å˜é‡ä¼šè·Ÿç€å¯¹è±¡å¤šå°‘è€Œè¿›è¡Œåˆ›å»º</span></span><br><span class="line"><span class="comment">        æä¾›å¯¹è±¡å”¯ä¸€åˆ›å»ºæ–¹å¼ã€å•ä¾‹è®¾è®¡æ¨¡å¼ã€‘</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼å¯ä»¥ä¿è¯å¤–ç•Œæ— è®ºå¦‚ä½•æ“ä½œå¾—åˆ°å¯¹è±¡éƒ½æ˜¯å”¯ä¸€</span></span><br><span class="line"><span class="comment">        å•ä¾‹è®¾è®¡æ¨¡å¼çš„å®ç°ï¼š</span></span><br><span class="line"><span class="comment">        1. ä¸€å®šè¦ç§æœ‰åŒ–æ„é€ æ–¹æ³• --&gt; é˜²æ­¢å¤–ç•Œè°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        2. æä¾›ä¸€ä¸ªç§æœ‰é™æ€å¸¸é‡å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å•ä¾‹ç±»å”¯ä¸€åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="comment">        3. æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè·å–è¿™ä¸ªåˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œå¾—åˆ°å®ä¾‹ã€å¤–ç•Œåªèƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–å¯¹è±¡ã€‘</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">BankLock</span><span class="params">()</span></span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">BankLock</span> <span class="variable">bank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BankLock</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> BankLock <span class="title function_">getInstance</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> bank;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">//æä¾›é”èµ„æºå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line">    <span class="comment">//æä¾›çº¿ç¨‹é€šä¿¡èµ„æºå¯¹è±¡ã€å®ƒæ˜¯æ¥å£ä¸èƒ½newï¼Œä½¿ç”¨lockå¯¹è±¡è°ƒç”¨newConditionåˆ›å»ºã€‘</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Condition</span> <span class="variable">condition</span> <span class="operator">=</span> lock.newCondition();</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        åœ¨å¤–ç•Œåˆ›å»ºç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡ä¸­éƒ½æ˜¯å¯ä»¥è·å–åˆ°CPUèµ„æº</span></span><br><span class="line"><span class="comment">        ä½†æ˜¯é—®é¢˜åœ¨äºï¼Œå¦‚æœæ¶ˆè´¹è€…å…ˆè·å–åˆ°èµ„æºï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ä¸èƒ½æ¶ˆè´¹</span></span><br><span class="line"><span class="comment">        æ‰€ä»¥å°±æä¾›ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨çŠ¶æ€çš„ï¼Œé€šè¿‡å¯¹è¿™ä¸ªçŠ¶æ€çš„åˆ¤æ–­å†³å®šæ‰§è¡Œå“ªä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">isEmpty</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *ç”Ÿäº§è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€ç”Ÿäº§ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m å­˜å‚¨é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pushMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//synchronized (&quot;&quot;) //æ›¿æ¢æˆlocké”èµ„æºå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//æ·»åŠ çº¿ç¨‹é€šä¿¡æ“ä½œ</span></span><br><span class="line">                <span class="comment">//åªéœ€è¦å°†ifä¿®æ”¹ä¸ºwhileå³å¯</span></span><br><span class="line">                <span class="keyword">while</span>(isEmpty)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//å¦‚æœæ¡ä»¶ä¸ºtrueå€¼ï¼Œå°±è¯æ˜ç°åœ¨æœ‰æ•°æ®ï¼Œæ— éœ€ç”Ÿäº§</span></span><br><span class="line">                    <span class="comment">//ç”Ÿäº§è¿™ä¸ªå°±è¿›å…¥åˆ°ç­‰å¾…çŠ¶æ€</span></span><br><span class="line">                    <span class="comment">// &quot;&quot;.wait();</span></span><br><span class="line">                    condition.await();    <span class="comment">//ä½¿ç”¨é€šä¿¡èµ„æºåˆ›å»ºå¯¹è±¡</span></span><br><span class="line">                &#125; </span><br><span class="line">                <span class="comment">//å› ä¸ºifæ²¡æœ‰æ‰§è¡Œå°±è¯æ˜ï¼Œæ²¡æœ‰æ•°æ®å¯ä»¥ç”Ÿäº§</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                money = m + money;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å­˜äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">                <span class="comment">//ç”Ÿäº§æ•°æ®å®Œæ¯•ä¹‹åéœ€è¦ä¿®æ”¹çŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">                isEmpty = <span class="literal">true</span>;</span><br><span class="line">                <span class="comment">//æ‰§è¡Œå”¤é†’æ“ä½œ</span></span><br><span class="line">                <span class="comment">//&quot;&quot;.notifyAll();</span></span><br><span class="line">                condition.signalAll();    <span class="comment">//ä½¿ç”¨é€šä¿¡èµ„æºåˆ›å»ºå¯¹è±¡</span></span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">finally</span> </span><br><span class="line">            &#123;</span><br><span class="line">                lock.unlock(); <span class="comment">//é”èµ„æºé‡Šæ”¾</span></span><br><span class="line">            &#125;</span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    *æ¶ˆè´¹è€…å‘å…±äº«èµ„æºä¸­å­˜å‚¨æ•°æ®çš„æ–¹æ³•ã€æ¶ˆè´¹ã€‘</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> m æ¶ˆè´¹é’±</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">popMoney</span><span class="params">(<span class="type">double</span> m)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//synchronized (&quot;&quot;) </span></span><br><span class="line">        <span class="comment">//&#123;</span></span><br><span class="line">                lock.lock();</span><br><span class="line">                <span class="keyword">try</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// å¢åŠ çº¿ç¨‹é€šä¿¡æ“ä½œ</span></span><br><span class="line">                    <span class="comment">//isEmptyçŠ¶æ€å€¼ falseä»£è¡¨æ²¡æœ‰æ•°æ® trueä»£è¡¨æœ‰å±æ€§</span></span><br><span class="line">                    <span class="comment">//åªéœ€è¦å°†ifä¿®æ”¹ä¸ºwhileå³å¯</span></span><br><span class="line">                    <span class="keyword">while</span>(!isEmpty)    <span class="comment">//æ²¡æœ‰æ•°æ®çš„æ—¶å€™ä¸èƒ½æ‰§è¡Œæ¶ˆè´¹ï¼Œç­‰å¾…ç”Ÿäº§</span></span><br><span class="line">                    &#123; </span><br><span class="line">                    </span><br><span class="line">                        <span class="comment">/*</span></span><br><span class="line"><span class="comment">                            æ²¡æœ‰æ•°æ®isEmptyå€¼æ˜¯falseï¼Œå–éæ“ä½œ !false --ã€‹ true ifå°±æ‰§è¡Œç­‰å¾…</span></span><br><span class="line"><span class="comment">                            æœ‰æ•°æ®isEmptyå€¼æ˜¯true ï¼Œå–éæ“ä½œ !true --ã€‹false ifå°±ä¸æ‰§è¡Œç­‰å¾…ï¼Œè¿›è¡Œæ¶ˆè´¹</span></span><br><span class="line"><span class="comment">                        */</span></span><br><span class="line">                        <span class="comment">//&quot;&quot;.wait();</span></span><br><span class="line">                        condition.await();</span><br><span class="line">                    &#125; </span><br><span class="line">                    <span class="comment">//ifåˆ†æ”¯è¯­å¥ä¸æ‰§è¡Œå°±è¯æ˜æœ‰æ•°æ®ï¼Œè¿›è¡Œæ¶ˆè´¹æ“ä½œ</span></span><br><span class="line">                    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">                    money = money - m;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;å–äº†&quot;</span> + m + <span class="string">&quot;ä½™é¢æ˜¯ï¼š&quot;</span> + money);</span><br><span class="line">                    <span class="comment">//ä¿®æ”¹çŠ¶æ€æ•°æ®</span></span><br><span class="line">                    isEmpty = <span class="literal">false</span>;</span><br><span class="line">                    <span class="comment">//è¿›è¡Œå”¤é†’æ“ä½œ</span></span><br><span class="line">                    <span class="comment">// &quot;&quot;.notifyAll();</span></span><br><span class="line">                    condition.signalAll();</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">catch</span> (InterruptedException e) </span><br><span class="line">                &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">finally</span> </span><br><span class="line">                &#123;</span><br><span class="line">                    lock.unlock();</span><br><span class="line">                &#125;</span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="çŸ¥è¯†ç‚¹ä¹ï¼šçº¿ç¨‹å£°æ˜å‘¨æœŸ"><a href="#çŸ¥è¯†ç‚¹ä¹ï¼šçº¿ç¨‹å£°æ˜å‘¨æœŸ" class="headerlink" title="çŸ¥è¯†ç‚¹ä¹ï¼šçº¿ç¨‹å£°æ˜å‘¨æœŸ"></a><center>çŸ¥è¯†ç‚¹ä¹ï¼šçº¿ç¨‹å£°æ˜å‘¨æœŸ</center></h1><img src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202403012240972.png" alt="å£°æ˜å‘¨æœŸ" style="zoom:50%;">

<p>çº¿ç¨‹å£°æ˜å‘¨æœŸåˆ†ä¸ºä¸¤æ¡çº¿:</p>
<ol>
<li>åŸºç¡€çº¿ç¨‹å£°æ˜å‘¨æœŸï¼š æ–°å»º â€”ã€‹ å‡†å¤‡å°±ç»ª â€”ã€‹ è¿è¡ŒçŠ¶æ€ â€”ã€‹ æ­»äº¡çŠ¶æ€</li>
<li>å¯¹çº¿ç¨‹æ·»åŠ äº†ä¸€äº›æ“ä½œé€ æˆçº¿ç¨‹é˜»å¡ç°è±¡çš„äº§ç”Ÿã€sleepã€joinã€waitã€synchronizedç­‰ç­‰ã€‘</li>
</ol>
<p>æ–°å»º â€”ã€‹ å‡†å¤‡å°±ç»ª â€”ã€‹ è¿è¡ŒçŠ¶æ€ â€”ã€‹ã€ é˜»å¡çŠ¶æ€ â€”ã€‹ å‡†å¤‡å°±ç»ª â€”ã€‹ è¿è¡ŒçŠ¶æ€ã€‘ â€”ã€‹ æ­»äº¡çŠ¶æ€</p>
<p>PSï¼šåœ¨é˜»å¡çŠ¶æ€æ²¡æœ‰æ¶ˆå¤±ä¹‹å‰</p>
<p>å‡†å¤‡å°±ç»ª â€”ã€‹ è¿è¡ŒçŠ¶æ€ â€”ã€‹é˜»å¡çŠ¶æ€ â€”ã€‹ å‡†å¤‡å°±ç»ª â€”ã€‹ è¿è¡ŒçŠ¶æ€ â€¦.. ã€ä¼šä¸€ç›´é‡å¤æ‰§è¡Œã€‘</p>
<p>1ã€æ–°å»ºçŠ¶æ€(new):ä½¿ç”¨newåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡,ä»…ä»…åœ¨å †ä¸­åˆ†é…å†…å­˜ç©ºé—´,åœ¨è°ƒç”¨startæ–¹æ³•ä¹‹å‰.</p>
<p>&ensp;&ensp;&ensp;&ensp;æ–°å»ºçŠ¶æ€ä¸‹,çº¿ç¨‹å‹æ ¹å°±æ²¡æœ‰å¯åŠ¨,ä»…ä»…åªæ˜¯å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡è€Œå·².</p>
<p>&ensp;&ensp;&ensp;&ensp;Thread t &#x3D; new Thread();&#x2F;&#x2F;æ­¤æ—¶tå°±å±äºæ–°å»ºçŠ¶æ€</p>
<p>&ensp;&ensp;&ensp;&ensp;å½“æ–°å»ºçŠ¶æ€ä¸‹çš„çº¿ç¨‹å¯¹è±¡è°ƒç”¨äº†startæ–¹æ³•,æ­¤æ—¶ä»æ–°å»ºçŠ¶æ€è¿›å…¥å¯è¿è¡ŒçŠ¶æ€</p>
<p>&ensp;&ensp;&ensp;&ensp;çº¿ç¨‹å¯¹è±¡çš„startæ–¹æ³•åªèƒ½è°ƒç”¨ä¸€æ¬¡,å¦åˆ™æŠ¥é”™:IllegalThreadStateException</p>
<p>2ã€å¯è¿è¡ŒçŠ¶æ€(runnable):åˆ†æˆä¸¤ç§çŠ¶æ€ï¼Œreadyå’Œrunningã€‚åˆ†åˆ«è¡¨ç¤ºå°±ç»ªçŠ¶æ€å’Œè¿è¡ŒçŠ¶æ€</p>
<p>&ensp;&ensp;&ensp;&ensp;å°±ç»ªçŠ¶æ€:çº¿ç¨‹å¯¹è±¡è°ƒç”¨startæ–¹æ³•ä¹‹å,ç­‰å¾…JVMçš„è°ƒåº¦(æ­¤æ—¶è¯¥çº¿ç¨‹å¹¶æ²¡æœ‰è¿è¡Œ).</p>
<p>&ensp;&ensp;&ensp;&ensp;è¿è¡ŒçŠ¶æ€:çº¿ç¨‹å¯¹è±¡è·å¾—JVMè°ƒåº¦,å¦‚æœå­˜åœ¨å¤šä¸ªCPU,é‚£ä¹ˆå…è®¸å¤šä¸ªçº¿ç¨‹å¹¶è¡Œè¿è¡Œ</p>
<p>3ã€é˜»å¡çŠ¶æ€(blocked):æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å› ä¸ºæŸäº›åŸå› æ”¾å¼ƒCPU,æš‚æ—¶åœæ­¢è¿è¡Œ,å°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€.</p>
<p>&ensp;&ensp;&ensp;&ensp;æ­¤æ—¶JVMä¸ä¼šç»™çº¿ç¨‹åˆ†é…CPU,ç›´åˆ°çº¿ç¨‹é‡æ–°è¿›å…¥å°±ç»ªçŠ¶æ€,æ‰æœ‰æœºä¼šè½¬åˆ°è¿è¡ŒçŠ¶æ€.</p>
<p>&ensp;&ensp;&ensp;&ensp;é˜»å¡çŠ¶æ€åªèƒ½å…ˆè¿›å…¥å°±ç»ªçŠ¶æ€,ä¸èƒ½ç›´æ¥è¿›å…¥è¿è¡ŒçŠ¶æ€</p>
<p>&ensp;&ensp;&ensp;&ensp;é˜»å¡çŠ¶æ€çš„ä¸¤ç§æƒ…å†µ:</p>
<p>&ensp;&ensp;&ensp;&ensp;ï¼ˆ1ï¼‰å½“Açº¿ç¨‹å¤„äºè¿è¡Œè¿‡ç¨‹æ—¶,è¯•å›¾è·å–åŒæ­¥é”æ—¶,å´è¢«Bçº¿ç¨‹è·å–.æ­¤æ—¶JVMæŠŠå½“å‰Açº¿ç¨‹å­˜åˆ°å¯¹è±¡çš„é”æ± ä¸­,Açº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€.</p>
<p>&ensp;&ensp;&ensp;&ensp;ï¼ˆ2ï¼‰å½“çº¿ç¨‹å¤„äºè¿è¡Œè¿‡ç¨‹æ—¶,å‘å‡ºäº†IOè¯·æ±‚æ—¶,æ­¤æ—¶è¿›å…¥é˜»å¡çŠ¶æ€</p>
<p>4ã€ç­‰å¾…çŠ¶æ€(waiting)(ç­‰å¾…çŠ¶æ€åªèƒ½è¢«å…¶ä»–çº¿ç¨‹å”¤é†’):æ­¤æ—¶ä½¿ç”¨çš„æ— å‚æ•°çš„waitæ–¹æ³•,</p>
<p>&ensp;&ensp;&ensp;&ensp;ï¼ˆ1ï¼‰å½“çº¿ç¨‹å¤„äºè¿è¡Œè¿‡ç¨‹æ—¶,è°ƒç”¨äº†wait()æ–¹æ³•,æ­¤æ—¶JVMæŠŠå½“å‰çº¿ç¨‹å­˜åœ¨å¯¹è±¡ç­‰å¾…æ± ä¸­</p>
<p>5ã€è®¡æ—¶ç­‰å¾…çŠ¶æ€(timed waiting)(ä½¿ç”¨äº†å¸¦å‚æ•°çš„waitæ–¹æ³•æˆ–è€…sleepæ–¹æ³•)</p>
<p>&ensp;&ensp;&ensp;&ensp;(1)å½“çº¿ç¨‹å¤„äºè¿è¡Œè¿‡ç¨‹æ—¶,è°ƒç”¨äº†wait(long time)æ–¹æ³•,æ­¤æ—¶JVMæŠŠå½“å‰çº¿ç¨‹å­˜åœ¨å¯¹è±¡ç­‰å¾…æ± ä¸­.</p>
<p>&ensp;&ensp;&ensp;&ensp;(2)å½“å‰çº¿ç¨‹æ‰§è¡Œäº†sleep(long time)æ–¹æ³•.</p>
<p>6ã€ç»ˆæ­¢çŠ¶æ€(terminated):é€šå¸¸ç§°ä¸ºæ­»äº¡çŠ¶æ€ï¼Œè¡¨ç¤ºçº¿ç¨‹ç»ˆæ­¢.</p>
<p>&ensp;&ensp;&ensp;&ensp;(1)æ­£å¸¸æ‰§è¡Œå®Œrunæ–¹æ³•è€Œé€€å‡º(æ­£å¸¸æ­»äº¡).</p>
<p>&ensp;&ensp;&ensp;&ensp;(2)é‡åˆ°å¼‚å¸¸è€Œé€€å‡º(å‡ºç°å¼‚å¸¸ä¹‹å,ç¨‹åºå°±ä¼šä¸­æ–­)(æ„å¤–æ­»äº¡)</p>
<p>çº¿ç¨‹ä¸€æ—¦ç»ˆæ­¢,å°±ä¸èƒ½å†é‡å¯å¯åŠ¨,å¦åˆ™æŠ¥é”™(IllegalThreadStateException).</p>
<p>åœ¨Threadç±»ä¸­è¿‡æ—¶çš„æ–¹æ³•(å› ä¸ºå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜,æ‰€ä»¥å¼ƒç”¨äº†ã€çœŸå¿ƒå¥½ç”¨ï¼Œç»å¯¹ä¸èƒ½ç”¨ã€‘)</p>
<p>&ensp;&ensp;&ensp;&ensp;void suspend() :æš‚åœå½“å‰çº¿ç¨‹</p>
<p>&ensp;&ensp;&ensp;&ensp;void resume() :æ¢å¤å½“å‰çº¿ç¨‹</p>
<p>&ensp;&ensp;&ensp;&ensp;void stop() :ç»“æŸå½“å‰çº¿ç¨‹</p>
<h1 id="çŸ¥è¯†ç‚¹åï¼šæ‹“å±•"><a href="#çŸ¥è¯†ç‚¹åï¼šæ‹“å±•" class="headerlink" title="çŸ¥è¯†ç‚¹åï¼šæ‹“å±•"></a><center>çŸ¥è¯†ç‚¹åï¼šæ‹“å±•</center></h1><h2 id="1ã€çº¿ç¨‹æ± ã€é‡ç‚¹ã€‘"><a href="#1ã€çº¿ç¨‹æ± ã€é‡ç‚¹ã€‘" class="headerlink" title="1ã€çº¿ç¨‹æ± ã€é‡ç‚¹ã€‘"></a><center>1ã€çº¿ç¨‹æ± ã€é‡ç‚¹ã€‘</center></h2><h3 id="ï¼ˆ1ï¼‰çº¿ç¨‹æ± æ¦‚å¿µ"><a href="#ï¼ˆ1ï¼‰çº¿ç¨‹æ± æ¦‚å¿µ" class="headerlink" title="ï¼ˆ1ï¼‰çº¿ç¨‹æ± æ¦‚å¿µ"></a>ï¼ˆ1ï¼‰çº¿ç¨‹æ± æ¦‚å¿µ</h3><p>å¦‚æœæœ‰éå¸¸çš„å¤šçš„ä»»åŠ¡éœ€è¦å¤šçº¿ç¨‹æ¥å®Œæˆï¼Œä¸”æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶é—´ä¸ä¼šå¤ªé•¿ï¼Œè¿™æ ·é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ã€‚</p>
<p>é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¼šæ¯”è¾ƒè€—æ€§èƒ½ã€‚æœ‰äº†çº¿ç¨‹æ± å°±ä¸è¦åˆ›å»ºæ›´å¤šçš„çº¿ç¨‹æ¥å®Œæˆä»»åŠ¡ï¼Œå› ä¸ºçº¿ç¨‹å¯ä»¥é‡ç”¨</p>
<p>çº¿ç¨‹æ± ç”¨ç»´æŠ¤è€…ä¸€ä¸ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ä¸­ä¿å­˜ç€å¤„äºç­‰å¾…ï¼ˆç©ºé—²ï¼‰çŠ¶æ€çš„çº¿ç¨‹ã€‚ä¸ç”¨æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„çº¿ç¨‹</p>
<h3 id="ï¼ˆ2ï¼‰çº¿ç¨‹æ± å®ç°åŸç†"><a href="#ï¼ˆ2ï¼‰çº¿ç¨‹æ± å®ç°åŸç†" class="headerlink" title="ï¼ˆ2ï¼‰çº¿ç¨‹æ± å®ç°åŸç†"></a>ï¼ˆ2ï¼‰çº¿ç¨‹æ± å®ç°åŸç†</h3><img src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202403012242641.png" alt="å®ç°åŸç†" style="zoom:50%;">

<h3 id="ï¼ˆ3ï¼‰çº¿ç¨‹æ± ä¸­å¸¸è§çš„ç±»"><a href="#ï¼ˆ3ï¼‰çº¿ç¨‹æ± ä¸­å¸¸è§çš„ç±»" class="headerlink" title="ï¼ˆ3ï¼‰çº¿ç¨‹æ± ä¸­å¸¸è§çš„ç±»"></a>ï¼ˆ3ï¼‰çº¿ç¨‹æ± ä¸­å¸¸è§çš„ç±»</h3><p>å¸¸ç”¨çš„çº¿ç¨‹æ± æ¥å£å’Œç±»(æ‰€åœ¨åŒ…java.util.concurrent)</p>
<p>Executorï¼šçº¿ç¨‹æ± çš„é¡¶çº§æ¥å£ã€‚</p>
<p>ExecutorServiceï¼šçº¿ç¨‹æ± æ¥å£ï¼Œå¯è¿‡submit(Runnable task) æäº¤ä»»åŠ¡ä»£ç </p>
<p>Executorså·¥å‚ç±»ï¼šé€šè¿‡æ­¤ç±»å¯ä»¥è·å¾—ä¸€ä¸ªçº¿ç¨‹æ± </p>
<table>
<thead>
<tr>
<th align="center">æ–¹æ³•å</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">newFixedThreadPool(int nThreads)</td>
<td align="center">è·å–å›ºå®šæ•°é‡çš„çº¿ç¨‹æ± ã€‚å‚æ•°ï¼šæŒ‡å®šçº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„æ•°é‡</td>
</tr>
<tr>
<td align="center">newCachedThreadPool()</td>
<td align="center">è·å¾—åŠ¨æ€æ•°é‡çš„çº¿ç¨‹æ± ï¼Œå¦‚ä¸å¤Ÿåˆ™åˆ›å»ºæ–°çš„ï¼Œæ— ä¸Šé™</td>
</tr>
</tbody></table>
<p><strong>åˆ›å»ºæ–¹æ³•ä¸€ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.demo.thread1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½œè€…ï¼šæ˜Ÿä»”</span></span><br><span class="line"><span class="comment"> * æè¿°ï¼šæ°¸æ— Bug</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolDemo1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± å¯¹è±¡   åˆ›å»ºäº†ä¸€ä¸ªå›ºå®šæ•°é‡3ä¸ªçš„çº¿ç¨‹æ± </span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">es</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">3</span>);   <span class="comment">//è¿”å›ExecutorServiceå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//2.é€šè¿‡çº¿ç¨‹æ± å¯¹è±¡è°ƒç”¨sumitæ–¹æ³•æ¥æäº¤çº¿ç¨‹ä»»åŠ¡</span></span><br><span class="line">        es.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable1</span>());   <span class="comment">//ä¼ å…¥å®ç°runnableæ¥å£çš„ç±»</span></span><br><span class="line">        es.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable2</span>());</span><br><span class="line">        es.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable3</span>());</span><br><span class="line">        es.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable4</span>());</span><br><span class="line">        <span class="comment">//3.ç»“æŸçº¿ç¨‹æ± </span></span><br><span class="line">        es.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable1</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable2</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>; i &lt; <span class="number">20</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable3</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">20</span>; i &lt; <span class="number">30</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable4</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">30</span>; i &lt; <span class="number">40</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæ–¹å¼äºŒï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.demo.thread1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½œè€…ï¼šæ˜Ÿä»”</span></span><br><span class="line"><span class="comment"> * æè¿°ï¼šæ°¸æ— Bug</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolDemo02</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± å¯¹è±¡   åˆ›å»ºä¸€ä¸ªå¸¦ç¼“å­˜çš„è¿æ¥æ± å¯¹è±¡</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">es</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//2.é€šè¿‡çº¿ç¨‹æ± å¯¹è±¡ï¼Œæäº¤çº¿ç¨‹ä»»åŠ¡ï¼Œå¹¶å¯åŠ¨çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        es.submit(<span class="keyword">new</span> <span class="title class_">Runnable</span>()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">try</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">                    &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;&quot;</span> + i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        es.submit(<span class="keyword">new</span> <span class="title class_">Runnable</span>()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">try</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">                    &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;&quot;</span> + i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        es.submit(<span class="keyword">new</span> <span class="title class_">Runnable</span>()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">try</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">                    &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;&quot;</span> + i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//3.å…³é—­è¿æ¥æ± </span></span><br><span class="line">        es.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ï¼ˆ4ï¼‰Callableæ¥å£"><a href="#ï¼ˆ4ï¼‰Callableæ¥å£" class="headerlink" title="ï¼ˆ4ï¼‰Callableæ¥å£"></a>ï¼ˆ4ï¼‰Callableæ¥å£</h3><p>JDK5åŠ å…¥ï¼Œä¸Runnableæ¥å£ç±»ä¼¼ï¼Œå®ç°ä¹‹åä»£è¡¨ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ã€‚</p>
<p>Callableå…·æœ‰æ³›å‹è¿”å›å€¼ã€å¯ä»¥å£°æ˜å¼‚å¸¸</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Callable</span>&lt; V &gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸ä½¿ç”¨è¿”å›å€¼å’ŒRunnableçš„ä½œç”¨ä¸€æ ·</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.demo.thread1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½œè€…ï¼šæ˜Ÿä»”</span></span><br><span class="line"><span class="comment"> * æè¿°ï¼šæ°¸æ— Bug</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CallableDemo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">es</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//2.é€šè¿‡çº¿ç¨‹æ± å¯¹è±¡æäº¤çº¿ç¨‹ä»»åŠ¡ï¼Œå¹¶å¯åŠ¨çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        es.submit(<span class="keyword">new</span> <span class="title class_">MyCallable</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.å…³é—­çº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        es.shutdown();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>   <span class="comment">//Callableæ¥å£çš„æ³›å‹è¡¨ç¤ºcallæ–¹æ³•è¿”å›å€¼çš„ç±»å‹</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨è¿”å›å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.demo.thread1;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½œè€…ï¼šæ˜Ÿä»”</span></span><br><span class="line"><span class="comment"> * æè¿°ï¼šæ°¸æ— Bug</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CallableDemo02</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">es</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//2.é€šè¿‡çº¿ç¨‹æ± å¯¹è±¡æäº¤çº¿ç¨‹ä»»åŠ¡ï¼Œå¹¶å¯åŠ¨çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        Future&lt;String&gt; future = es.submit(<span class="keyword">new</span> <span class="title class_">MyCallable2</span>());   <span class="comment">//ä¿å­˜çº¿ç¨‹çš„è¿”å›ç»“æœ</span></span><br><span class="line">        System.out.println(future.get());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.å…³é—­çº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        es.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCallable2</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt;</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è¿™æ˜¯callæ–¹æ³•è¿”å›å€¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.demo.thread1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½œè€…ï¼šæ˜Ÿä»”</span></span><br><span class="line"><span class="comment"> * æè¿°ï¼šæ°¸æ— Bug</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CallableDemo03</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//éœ€æ±‚ï¼šçº¿ç¨‹A è®¡ç®—1~50 çº¿ç¨‹B 51~100  æœ€ç»ˆå¾—åˆ°ç»“æœ</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">es</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        Future&lt;Integer&gt; f1 = es.submit(<span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Integer&gt;()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; <span class="number">51</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    sum += i;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> sum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Future&lt;Integer&gt; f2 = es.submit(<span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Integer&gt;()</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Integer <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">51</span>; i &lt; <span class="number">101</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    sum += i;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> sum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“æœä¸º:&quot;</span> + (f1.get() + f2.get()));</span><br><span class="line">        es.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ï¼ˆ5ï¼‰Futureæ¥å£"><a href="#ï¼ˆ5ï¼‰Futureæ¥å£" class="headerlink" title="ï¼ˆ5ï¼‰Futureæ¥å£"></a>ï¼ˆ5ï¼‰Futureæ¥å£</h3><p>Futureæ¥å£è¡¨ç¤ºå°†è¦æ‰§è¡Œå®Œä»»åŠ¡çš„ç»“æœã€‚</p>
<p>get()ä»¥é˜»å¡å½¢å¼ç­‰å¾…Futureä¸­çš„å¼‚æ­¥å¤„ç†ç»“æœï¼ˆcall()çš„è¿”å›å€¼ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCallable2</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Runnableæ¥å£å’ŒCallableæ¥å£çš„åŒºåˆ«ï¼Ÿ</span></span><br><span class="line"><span class="comment">    * 1ã€è¿™ä¸¤ä¸ªæ¥å£éƒ½å¯ä»¥å½“åšçº¿ç¨‹ä»»åŠ¡æäº¤å¹¶æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">    * 2ã€Callableæ¥å£æ‰§è¡Œå®Œçº¿ç¨‹ä»»åŠ¡ä¹‹åæœ‰è¿”å›å€¼ï¼Œè€ŒRunnableæ¥å£æ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="comment">    * 3ã€Callableæ¥å£ä¸­çš„callæ–¹æ³•å·²ç»æŠ›å‡ºäº†å¼‚å¸¸ï¼Œè€ŒRunnableæ¥å£ä¸èƒ½æŠ›å‡ºç¼–è¯‘å¼‚å¸¸</span></span><br><span class="line"><span class="comment">    * Futureæ¥å£ï¼š</span></span><br><span class="line"><span class="comment">    * ç”¨äºæ¥å£Callableçº¿ç¨‹ä»»åŠ¡çš„è¿”å›å€¼ã€‚</span></span><br><span class="line"><span class="comment">    * get()æ–¹æ³•å½“çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åæ‰èƒ½è·å–è¿”å›å€¼ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªé˜»å¡å¼çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">    *éšå ‚æ¡ˆä¾‹ï¼š</span></span><br><span class="line"><span class="comment">    * ä½¿ç”¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œå¹¶å‘è®¡ç®—1-100çš„å’Œï¼Œ ä¸€ä¸ªçº¿ç¨‹è®¡ç®—1~50,å¦ä¸€ä¸ªçº¿ç¨‹è®¡ç®—51~100ï¼Œ æœ€ç»ˆæ±‡æ€»ç»“æœ</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException,</span><br><span class="line">ExecutionException </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1ã€åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">es</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//2ã€é€šè¿‡çº¿ç¨‹æ± æäº¤çº¿ç¨‹å¹¶æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        Future&lt;String&gt; future = es.submit(<span class="keyword">new</span> <span class="title class_">MyCallable1</span>());</span><br><span class="line">        <span class="comment">//è·å–çº¿ç¨‹ä»»åŠ¡çš„è¿”å›å€¼</span></span><br><span class="line">        System.out.println(future.get());</span><br><span class="line">        System.out.println(<span class="string">&quot;å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ&quot;</span>);</span><br><span class="line">        <span class="comment">//3ã€å…³é—­çº¿ç¨‹æ± </span></span><br><span class="line">        es.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCallable1</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) </span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">&quot;---&gt;&quot;</span>+i);</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è¿™æ˜¯Callableçº¿ç¨‹ä»»åŠ¡çš„è¿”å›å€¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ï¼ˆ6ï¼‰è¯»å†™é”"><a href="#ï¼ˆ6ï¼‰è¯»å†™é”" class="headerlink" title="ï¼ˆ6ï¼‰è¯»å†™é”"></a>ï¼ˆ6ï¼‰è¯»å†™é”</h3><p>ReentrantReadWriteLockï¼š</p>
<p>&ensp;&ensp;&ensp;&ensp;ä¸€ç§æ”¯æŒä¸€å†™å¤šè¯»çš„åŒæ­¥é”ï¼Œè¯»å†™åˆ†ç¦»ï¼Œå¯åˆ†åˆ«åˆ†é…è¯»é”ã€å†™é”ã€‚</p>
<p>&ensp;&ensp;&ensp;&ensp;æ”¯æŒå¤šæ¬¡åˆ†é…è¯»é”ï¼Œä½¿å¤šä¸ªè¯»æ“ä½œå¯ä»¥å¹¶å‘æ‰§è¡Œã€‚</p>
<p>äº’æ–¥è§„åˆ™ï¼š</p>
<p>&ensp;&ensp;&ensp;&ensp;å†™-å†™ï¼šäº’æ–¥ï¼Œé˜»å¡</p>
<p>&ensp;&ensp;&ensp;&ensp;è¯»-å†™ï¼šäº’æ–¥ï¼Œè¯»é˜»å¡å†™ã€å†™é˜»å¡è¯»ã€‚</p>
<p>&ensp;&ensp;&ensp;&ensp;è¯»-è¯»ï¼šä¸äº’æ–¥ã€ä¸é˜»å¡ã€‚</p>
<p>&ensp;&ensp;&ensp;&ensp;åœ¨è¯»æ“ä½œè¿œè¿œé«˜äºå†™æ“ä½œçš„ç¯å¢ƒä¸­ï¼Œå¯åœ¨ä¿éšœçº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œæé«˜è¿è¡Œæ•ˆç‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qf.demo.thread2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantReadWriteLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½œè€…ï¼šæ˜Ÿä»”</span></span><br><span class="line"><span class="comment"> * æè¿°ï¼šæ°¸æ— Bug</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReadWriterLockDemo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//è®°å½•å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">es</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//2.æäº¤8ä¸ªè¯»æ“ä½œä»»åŠ¡ï¼Œæäº¤2ä¸ªå†™æ“ä½œä»»åŠ¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        <span class="type">ReadThread</span> <span class="variable">readThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReadThread</span>(user);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            es.submit(readThread);</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="type">WriteThread</span> <span class="variable">writeThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WriteThread</span>(user);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            es.submit(writeThread);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3.ç»“æŸçº¿ç¨‹æ± </span></span><br><span class="line">        es.shutdown();</span><br><span class="line">        <span class="comment">//es.isTerminated();    è·å–å½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€ï¼Œå¦‚æœçº¿ç¨‹æ± é’Ÿçš„ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œé‚£ä¹ˆè¿”å›trueï¼Œå¦åˆ™è¿”å›false</span></span><br><span class="line">        <span class="comment">//System.out.println(es.isTerminated());</span></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬å¸Œæœ›ä»¥ä¸‹çš„ä»£ç åœ¨çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œç»“æŸä¹‹åå†æ‰§è¡Œ.åˆ©ç”¨ä»£ç ç©ºè½¬æ¥åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">while</span> (!es.isTerminated())</span><br><span class="line">        &#123;&#125;</span><br><span class="line">        <span class="comment">//è®°å½•ç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;è€—æ—¶&quot;</span> + (end-start) + <span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å†™çº¿ç¨‹</span></span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">WriteThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    User user;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">WriteThread</span><span class="params">(User user)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        user.setName(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¯»çº¿ç¨‹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ReadThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    User user;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ReadThread</span><span class="params">(User user)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.user = user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        user.getName();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//è¯»å†™é”</span></span><br><span class="line">    <span class="type">ReentrantReadWriteLock</span> <span class="variable">rrwl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantReadWriteLock</span>();</span><br><span class="line">    <span class="comment">//è¯»é”</span></span><br><span class="line">    ReentrantReadWriteLock.<span class="type">ReadLock</span> <span class="variable">readLock</span> <span class="operator">=</span> rrwl.readLock();</span><br><span class="line">    <span class="comment">//å†™é”</span></span><br><span class="line">    ReentrantReadWriteLock.<span class="type">WriteLock</span> <span class="variable">writeLock</span> <span class="operator">=</span> rrwl.writeLock();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å†™æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span></span><br><span class="line">    &#123;</span><br><span class="line">        writeLock.lock();</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            writeLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¯»æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        readLock.lock();</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            readLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¯»å’Œå†™éƒ½éœ€è¦èŠ±ä¸€ç§’ï¼Œè€Œè¯»å’Œè¯»æ˜¯ä¸å½±å“çš„ï¼Œè¯»å’Œå†™çš„äº’æ–¥çš„ï¼Œå†™å’Œå†™æ˜¯äº’æ–¥çš„</span></span><br><span class="line"><span class="comment">//class User</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//    private String name;</span></span><br><span class="line"><span class="comment">//    Lock lock = new ReentrantLock();</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    //å†™æ“ä½œ</span></span><br><span class="line"><span class="comment">//    public void setName(String name)</span></span><br><span class="line"><span class="comment">//    &#123;</span></span><br><span class="line"><span class="comment">//        lock.lock();</span></span><br><span class="line"><span class="comment">//        try</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            Thread.sleep(1000);</span></span><br><span class="line"><span class="comment">//            this.name = name;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        catch (InterruptedException e)</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        finally</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            lock.unlock();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    //è¯»æ“ä½œ</span></span><br><span class="line"><span class="comment">//    public String getName()</span></span><br><span class="line"><span class="comment">//    &#123;</span></span><br><span class="line"><span class="comment">//        lock.lock();</span></span><br><span class="line"><span class="comment">//        try</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            Thread.sleep(1000);</span></span><br><span class="line"><span class="comment">//            return name;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        catch (InterruptedException e)</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        finally</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            lock.unlock();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        return null;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="ï¼ˆ7ï¼‰é‡å…¥é”"><a href="#ï¼ˆ7ï¼‰é‡å…¥é”" class="headerlink" title="ï¼ˆ7ï¼‰é‡å…¥é”"></a>ï¼ˆ7ï¼‰é‡å…¥é”</h3><p>é‡å…¥é”:åœ¨åŒæ­¥é”ä¸­å¯ä»¥ç»§ç»­åŠ å…¥åŒæ­¥é”(é”å¯¹è±¡æ˜¯åŒä¸€ä¸ª)</p>
<p>&ensp;&ensp;&ensp;&ensp;synchronizedå’ŒLocké”éƒ½å¯ä»¥å®ç°é”çš„é‡å…¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestReentrantLock</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * é‡å…¥é”:åœ¨åŒæ­¥é”ä¸­å¯ä»¥ç»§ç»­åŠ å…¥åŒæ­¥é”(é”å¯¹è±¡æ˜¯åŒä¸€ä¸ª)</span></span><br><span class="line"><span class="comment">    * synchronizedå’ŒLocké”éƒ½å¯ä»¥å®ç°é”çš„é‡å…¥</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>()).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        a();</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">//å½“å‰é”å¯¹è±¡ä¸ºthis</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">a</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        b();</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">//å½“å‰é”å¯¹è±¡ä¸ºthis</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">b</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">        c();</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">c</span><span class="params">()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ï¼ˆ8ï¼‰å…¬å¹³é”"><a href="#ï¼ˆ8ï¼‰å…¬å¹³é”" class="headerlink" title="ï¼ˆ8ï¼‰å…¬å¹³é”"></a>ï¼ˆ8ï¼‰å…¬å¹³é”</h3><p>å…¬å¹³é”å’Œéå…¬å¹³é”</p>
<p>&ensp;&ensp;&ensp;&ensp;éå…¬å¹³é”ï¼šä¼˜å…ˆä½¿ç”¨ä¸Šä¸€ä¸ªçº¿ç¨‹æ¥ç€æ‰§è¡Œä¸‹é¢çš„çº¿ç¨‹ä»»åŠ¡</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;synchronizedæ˜¯éå…¬å¹³é”çš„å®ç°ï¼Œæ— æ³•å®ç°å…¬å¹³é”</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;locké”é»˜è®¤æ˜¯éå…¬å¹³é”ï¼Œå¦‚æœæƒ³è¦å®ç°å…¬å¹³é”ï¼Œé‚£ä¹ˆéœ€è¦åœ¨æ„é€ æ–¹æ³•è®¾ç½®ä¸ºtrue</p>
<p>&ensp;&ensp;&ensp;&ensp;å…¬å¹³é”ï¼šè®©æ¯ä¸ªçº¿ç¨‹éƒ½å…¬å¹³å»æ‰§è¡Œçº¿ç¨‹ä»»åŠ¡</p>
<p>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;locké”å¯ä»¥å®ç°å…¬å¹³é”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Locké”å®ç°å…¬å¹³é” å‚æ•°ä¸ºtrueè¡¨ç¤ºæ˜¯å…¬å¹³é”ï¼Œé»˜è®¤æ˜¯falseè¡¨ç¤ºéå…¬å¹³é”</span></span><br><span class="line"><span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>(<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author_group"><a class="post-copyright__author_img" href="/about/"><img class="post-copyright__author_img_front" src="/img/pwa/favicon.ico"></a><div class="post-copyright__author_name">æ˜Ÿä»”äººç”Ÿå½•</div><div class="post-copyright__author_desc">çæƒœå½“ä¸‹ ä¸è´Ÿæ­¤ç”Ÿ</div></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div id="quit-box" onclick="RemoveRewardMask()"></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬æ–‡æ˜¯åŸåˆ›æ–‡ç« ï¼Œé‡‡ç”¨<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>åè®®ï¼Œå®Œæ•´è½¬è½½è¯·æ³¨æ˜æ¥è‡ª<a href="/">æ˜Ÿä»”äººç”Ÿå½•</a></span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/"><span class="tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>Java<span class="tagsPageCount">26</span></span></a></div></div></div><nav class="needEndHide pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/5883a4af.html"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">26.åå°„</div></div></a></div><div class="next-post pull-right"><a href="/post/3e1167ea.html"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">23.IOæµ</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><div class="author-info__top-group"><div class="author-info__sayhi" id="author-info__sayhi" onclick="sco.changeSayHelloText()">sayhello.morning</div></div></div><div class="avatar-img-group"><img class="avatar-img" alt="å¤´åƒ" src="/img/avatar.avif"></div><div class="author-info__description_group"><div class="author-info__description">Here is my personal blog</div><div class="author-info__description2">I believe you can find knowledge and tutorials here that will be useful to you.</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about/"><div class="author-info__name">æ˜Ÿä»”</div><div class="author-info__desc">çæƒœå½“ä¸‹ ä¸è´Ÿæ­¤ç”Ÿ</div></a><div class="card-info-social-icons is-center"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="solitude fa-solid fa-bars"></i><span>æ–‡ç« ç›®å½•</span></div><div class="toc-content" id="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%80%EF%BC%9AThread%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80"><span class="toc-text">çŸ¥è¯†ç‚¹ä¸€ï¼šThreadçº¿ç¨‹åŸºç¡€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%8C%EF%BC%9A%E5%B9%B6%E8%A1%8C%E5%92%8C%E5%B9%B6%E5%8F%91"><span class="toc-text">çŸ¥è¯†ç‚¹äºŒï¼šå¹¶è¡Œå’Œå¹¶å‘</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B"><span class="toc-text">çŸ¥è¯†ç‚¹ä¸‰ï¼šçº¿ç¨‹å’Œè¿›ç¨‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%9B%9B%EF%BC%9AJava%E7%A8%8B%E5%BA%8F%E4%B8%AD%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">çŸ¥è¯†ç‚¹å››ï¼šJavaç¨‹åºä¸­å®ç°çº¿ç¨‹çš„æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F%E4%B9%8B%E7%BB%A7%E6%89%BFThread%E7%B1%BB"><span class="toc-text">1ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹ç»§æ‰¿Threadç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E6%96%B9%E5%BC%8F%E4%B9%8B%E5%AE%9E%E7%8E%B0Runnable%E6%8E%A5%E5%8F%A3"><span class="toc-text">2ã€çº¿ç¨‹åˆ›å»ºæ–¹å¼ä¹‹å®ç°Runnableæ¥å£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81Thread%E7%B1%BB%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E5%92%8CRunnable%E6%8E%A5%E5%8F%A3%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B"><span class="toc-text">3ã€Threadç±»åˆ›å»ºçº¿ç¨‹å’ŒRunnableæ¥å£åˆ›å»ºçº¿ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81start%E6%96%B9%E6%B3%95%E5%92%8Crun%E6%96%B9%E6%B3%95"><span class="toc-text">4ã€startæ–¹æ³•å’Œrunæ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E4%BD%BF%E7%94%A8%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB%E6%88%96Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BE%BF%E6%8D%B7%E7%9A%84%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E5%AF%B9%E8%B1%A1%E5%B9%B6%E6%89%A7%E8%A1%8C%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-text">5ã€ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æˆ–Lambdaè¡¨è¾¾å¼ä¾¿æ·çš„åˆ›å»ºçº¿ç¨‹å¯¹è±¡å¹¶æ‰§è¡Œï¼ˆäº†è§£ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%BA%94%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">çŸ¥è¯†ç‚¹äº”ï¼šçº¿ç¨‹å¸¸ç”¨æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81getState"><span class="toc-text">1ã€çº¿ç¨‹çŠ¶æ€getState</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7setPriority"><span class="toc-text">2ã€çº¿ç¨‹ä¼˜å…ˆçº§setPriority</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%9B%B4%E6%94%B9%E5%92%8C%E8%8E%B7%E5%8F%96%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%90%8D%E5%AD%97"><span class="toc-text">3ã€æ›´æ”¹å’Œè·å–çº¿ç¨‹çš„åå­—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E7%BA%BF%E7%A8%8B%E4%BC%91%E7%9C%A0sleep%E3%80%90%E4%BD%BF%E7%94%A8%E5%87%A0%E7%8E%87%E6%9E%81%E9%AB%98%E3%80%91"><span class="toc-text">4ã€çº¿ç¨‹ä¼‘çœ sleepã€ä½¿ç”¨å‡ ç‡æé«˜ã€‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E7%BA%BF%E7%A8%8B%E7%A4%BC%E8%AE%A9yield%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-text">5ã€çº¿ç¨‹ç¤¼è®©yieldï¼ˆäº†è§£ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E7%BA%BF%E7%A8%8B%E5%90%88%E5%B9%B6join"><span class="toc-text">6ã€çº¿ç¨‹åˆå¹¶join</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E7%BA%BF%E7%A8%8B%E4%B8%AD%E6%96%AD-%E6%A0%87%E8%AE%B0"><span class="toc-text">7ã€çº¿ç¨‹ä¸­æ–­(æ ‡è®°)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%85%AD%EF%BC%9A%E7%81%AB%E8%BD%A6%E5%94%AE%E7%A5%A8%E9%97%AE%E9%A2%98"><span class="toc-text">çŸ¥è¯†ç‚¹å…­ï¼šç«è½¦å”®ç¥¨é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#GetInstance"><span class="toc-text">GetInstance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B9%B6%E5%8F%91%E8%AE%BF%E9%97%AE%E4%B8%B4%E7%95%8C%E8%B5%84%E6%BA%90%EF%BC%8C%E4%BF%9D%E8%AF%81%E8%B5%84%E6%BA%90%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-text">1ã€å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ä¸´ç•Œèµ„æºï¼Œä¿è¯èµ„æºå®‰å…¨é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81synchronized%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">2ã€synchronizedå…³é”®å­—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%95-%E5%AF%B9%E8%B1%A1%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%95-%E6%88%90%E5%91%98%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%95"><span class="toc-text">3ã€åŒæ­¥æ–¹æ³•&#x2F;å¯¹è±¡åŒæ­¥æ–¹æ³•&#x2F;æˆå‘˜åŒæ­¥æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E7%B1%BB%E9%94%81-%E7%B1%BB%E5%90%8C%E6%AD%A5%E4%BB%A3%E7%A0%81%E5%9D%97-%E7%B1%BB%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%95-%E9%9D%99%E6%80%81%E5%90%8C%E6%AD%A5%E6%96%B9%E6%B3%95"><span class="toc-text">4ã€ç±»é”&#x2F;ç±»åŒæ­¥ä»£ç å—&#x2F;ç±»åŒæ­¥æ–¹æ³•&#x2F;é™æ€åŒæ­¥æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%83%EF%BC%9A%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="toc-text">çŸ¥è¯†ç‚¹ä¸ƒï¼šçº¿ç¨‹é€šä¿¡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%AE%8C%E6%88%90%E7%94%9F%E4%BA%A7%E8%80%85%E5%92%8C%E6%B6%88%E8%B4%B9%E8%80%85%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%9E%8Bv1%E7%89%88%E6%9C%AC"><span class="toc-text">1ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v1ç‰ˆæœ¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%AE%8C%E6%88%90%E7%94%9F%E4%BA%A7%E8%80%85%E5%92%8C%E6%B6%88%E8%B4%B9%E8%80%85%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%9E%8Bv2%E7%89%88%E6%9C%AC"><span class="toc-text">2ã€å®Œæˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…é€šä¿¡æ¨¡å‹v2ç‰ˆæœ¬</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%88%86%E6%9E%90%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-text">3ã€åˆ†ææ‰§è¡Œæµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%85%AB%EF%BC%9A%E5%A4%9A%E5%AF%B9%E5%A4%9A%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%9E%8B"><span class="toc-text">çŸ¥è¯†ç‚¹å…«ï¼šå¤šå¯¹å¤šé€šä¿¡æ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E8%B4%9F%E6%95%B0%E9%97%AE%E9%A2%98"><span class="toc-text">1ã€è´Ÿæ•°é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%AD%BB%E7%AD%89%E5%BE%85%E9%97%AE%E9%A2%98"><span class="toc-text">2ã€æ­»ç­‰å¾…é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%89%A9%E5%B1%95%EF%BC%9ALock%E6%8E%A5%E5%8F%A3%E3%80%90%E6%98%BE%E7%A4%BA%E9%94%81%E3%80%91"><span class="toc-text">3ã€æ‰©å±•ï¼šLockæ¥å£ã€æ˜¾ç¤ºé”ã€‘</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B9%9D%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%A3%B0%E6%98%8E%E5%91%A8%E6%9C%9F"><span class="toc-text">çŸ¥è¯†ç‚¹ä¹ï¼šçº¿ç¨‹å£°æ˜å‘¨æœŸ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E5%8D%81%EF%BC%9A%E6%8B%93%E5%B1%95"><span class="toc-text">çŸ¥è¯†ç‚¹åï¼šæ‹“å±•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%BA%BF%E7%A8%8B%E6%B1%A0%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-text">1ã€çº¿ç¨‹æ± ã€é‡ç‚¹ã€‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%BA%BF%E7%A8%8B%E6%B1%A0%E6%A6%82%E5%BF%B5"><span class="toc-text">ï¼ˆ1ï¼‰çº¿ç¨‹æ± æ¦‚å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">ï¼ˆ2ï¼‰çº¿ç¨‹æ± å®ç°åŸç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E7%BA%BF%E7%A8%8B%E6%B1%A0%E4%B8%AD%E5%B8%B8%E8%A7%81%E7%9A%84%E7%B1%BB"><span class="toc-text">ï¼ˆ3ï¼‰çº¿ç¨‹æ± ä¸­å¸¸è§çš„ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%884%EF%BC%89Callable%E6%8E%A5%E5%8F%A3"><span class="toc-text">ï¼ˆ4ï¼‰Callableæ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%885%EF%BC%89Future%E6%8E%A5%E5%8F%A3"><span class="toc-text">ï¼ˆ5ï¼‰Futureæ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E8%AF%BB%E5%86%99%E9%94%81"><span class="toc-text">ï¼ˆ6ï¼‰è¯»å†™é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%887%EF%BC%89%E9%87%8D%E5%85%A5%E9%94%81"><span class="toc-text">ï¼ˆ7ï¼‰é‡å…¥é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%888%EF%BC%89%E5%85%AC%E5%B9%B3%E9%94%81"><span class="toc-text">ï¼ˆ8ï¼‰å…¬å¹³é”</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="solitude fa-solid fa-map"></i><span>æœ€è¿‘å‘å¸ƒ</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/93c966f3.html" title="ç”µæœºæ§åˆ¶"><img alt="ç”µæœºæ§åˆ¶" src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202404082146483.jpg"></a><div class="content"><span class="title" href="/post/93c966f3.html" title="ç”µæœºæ§åˆ¶">ç”µæœºæ§åˆ¶</span><span class="article-recent_post_categories" href="/post/93c966f3.html">51å•ç‰‡æœº</span></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/8212ff63.html" title="å•æ€»çº¿é€šä¿¡"><img alt="å•æ€»çº¿é€šä¿¡" src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202404082146483.jpg"></a><div class="content"><span class="title" href="/post/8212ff63.html" title="å•æ€»çº¿é€šä¿¡">å•æ€»çº¿é€šä¿¡</span><span class="article-recent_post_categories" href="/post/8212ff63.html">51å•ç‰‡æœº</span></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/f5fba2c3.html" title="6.IICé€šä¿¡"><img alt="6.IICé€šä¿¡" src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202404082146483.jpg"></a><div class="content"><span class="title" href="/post/f5fba2c3.html" title="6.IICé€šä¿¡">6.IICé€šä¿¡</span><span class="article-recent_post_categories" href="/post/f5fba2c3.html">51å•ç‰‡æœº</span></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/f736596e.html" title="ä¸²å£"><img alt="ä¸²å£" src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202404082146483.jpg"></a><div class="content"><span class="title" href="/post/f736596e.html" title="ä¸²å£">ä¸²å£</span><span class="article-recent_post_categories" href="/post/f736596e.html">51å•ç‰‡æœº</span></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/2e5216dd.html" title="å®šæ—¶å™¨/è®¡æ•°å™¨"><img alt="å®šæ—¶å™¨/è®¡æ•°å™¨" src="https://cdn.jsdelivr.net/gh/xinzai-x/MyPic/img/202404082146483.jpg"></a><div class="content"><span class="title" href="/post/2e5216dd.html" title="å®šæ—¶å™¨/è®¡æ•°å™¨">å®šæ—¶å™¨/è®¡æ•°å™¨</span><span class="article-recent_post_categories" href="/post/2e5216dd.html">51å•ç‰‡æœº</span></div></div></div></div></div></div></main><footer id="footer"><div id="st-footer-bar"><div class="footer-logo"><span>Solitude</span></div><div class="footer-bar-description">Articles from Ever Fu.</div><a class="footer-bar-link" href="/about/">Learn more</a></div><div id="footer_deal"></div><div id="st-footer"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div class="copyright">Â© 2023 - 2024 By&nbsp;<a class="footer-bar-link" href="/">æ˜Ÿä»”</a></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/everfu/hexo-theme-solitude" alt="Theme">Theme</a></div></div></div></footer></div><!-- right_menu--><!-- inject body--><div><script src="/js/utils.js?v=2.0.6"></script><script src="/js/main.js?v=2.0.6"></script><script src="/js/third_party/waterfall.min.js?v=2.0.6"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script src="/js/third_party/universe.min.js?v=2.0.6"></script><script>dark()
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js"></script><div class="js-pjax"></div></div><!-- pjax--><script>const pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: ['title','#body-wrap','#site-config','meta[name="description"]','.js-pjax','meta[property^="og:"]','#config-diff'],
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
})

document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
})

document.addEventListener('pjax:complete', () => {
    window.refreshFn()

    document.querySelectorAll('script[data-pjax]').forEach(item => {
        const newScript = document.createElement('script')
        const content = item.text || item.textContent || item.innerHTML || ""
        Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
        newScript.appendChild(document.createTextNode(content))
        item.parentNode.replaceChild(newScript, item)
    })

    GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

})

document.addEventListener('pjax:error', (e) => {
    if (e.request.status === 404) {
        pjax.loadUrl('/404.html')
    }
})</script><!-- theme--><script>initTheme = () => {
    let isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const cachedMode = utils.saveToLocal.get('theme');
    if (cachedMode === undefined) {
        const nowMode =
            isDarkMode ? 'dark' : 'light'
        document.documentElement.setAttribute('data-theme', nowMode);
    } else {
        document.documentElement.setAttribute('data-theme', cachedMode);
    }
    typeof rm === 'object' && rm.mode(cachedMode === 'dark' && isDarkMode)
}
initTheme()</script><!-- google adsense--><!-- search--><!-- Tianli-Talk--><!-- music--></body></html><script>const posts=["post/93c966f3.html","post/8212ff63.html","post/f5fba2c3.html","post/f736596e.html","post/2e5216dd.html","post/81b224e1.html","post/74750b31.html","post/f8f1fb54.html","post/c6b2a2fd.html","post/def84ee6.html","post/1f293ccb.html","post/79959306.html","post/5f6e69ef.html","post/d20e58f5.html","post/6c3f8114.html","post/2ec6e870.html","post/812d49a5.html","post/df95841.html","post/f1dbdc9f.html","post/5883a4af.html","post/fbc0ae86.html","post/3e1167ea.html","post/8f9052f9.html","post/a24af109.html","post/9e25cba9.html","post/a920af81.html","post/fe7ab1f0.html","post/76fa8c0d.html","post/86a3300e.html","post/6749388c.html","post/43a94ea1.html","post/ded373.html","post/74955f2f.html","post/75e75572.html","post/6a2c2bbd.html","post/5c2f197a.html","post/4a789563.html","post/c46a5cd3.html","post/1b3fd879.html","post/26831432.html","post/3cc3da73.html","post/fbc82303.html","post/3ccb602.html","post/ca0fcd03.html","post/6ac19130.html","post/8c9aed93.html","post/66861d4a.html","post/de801b7c.html","post/ee96f7a4.html","post/a8259cf6.html","post/2d17b932.html","post/57da986d.html","post/a0b1b02e.html","post/72b1c7b1.html","post/17bf8c68.html","post/7821492f.html","post/cf0c504a.html","post/e2246be5.html","post/9b06d854.html","post/5bdb5548.html","post/bec635c1.html","post/3ec1fd44.html","post/b70ae4e7.html","post/804ae251.html","post/df718222.html","post/3b48d11a.html","post/7422213c.html","post/6271a51c.html","post/6f76074c.html","post/8212f318.html","post/cb87841d.html","post/b2041fc0.html"];function toRandomPost(){ pjax.loadUrl(GLOBAL_CONFIG.root+posts[Math.floor(Math.random()*posts.length)]); }</script>